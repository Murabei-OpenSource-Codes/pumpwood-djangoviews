<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.5.1"/>
    <title>pumpwood-djangoviews.src.pumpwood_djangoviews.views API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../pumpwood_djangoviews.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;pumpwood-djangoviews.src.pumpwood_djangoviews</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#save_serializer_instance">save_serializer_instance</a>
            </li>
            <li>
                    <a class="class" href="#PumpWoodRestService">PumpWoodRestService</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#PumpWoodRestService.endpoint_description">endpoint_description</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.dimensions">dimensions</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.icon">icon</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.service_model">service_model</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.storage_object">storage_object</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.microservice">microservice</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.trigger">trigger</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.serializer">serializer</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.file_fields">file_fields</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.list_paginate_limit">list_paginate_limit</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.gui_retrieve_fieldset">gui_retrieve_fieldset</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.gui_verbose_field">gui_verbose_field</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodRestService.gui_readonly">gui_readonly</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.get_gui_retrieve_fieldset">get_gui_retrieve_fieldset</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.get_gui_verbose_field">get_gui_verbose_field</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.get_gui_readonly">get_gui_readonly</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.get_list_fields">get_list_fields</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.list">list</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.list_without_pag">list_without_pag</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.retrieve">retrieve</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.retrieve_file">retrieve_file</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.delete">delete</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.delete_many">delete_many</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.remove_file_field">remove_file_field</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.list_actions">list_actions</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.execute_action">execute_action</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.cls_fields_options">cls_fields_options</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.search_options">search_options</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.fill_options">fill_options</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.list_view_options">list_view_options</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.retrieve_view_options">retrieve_view_options</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodRestService.fill_options_validation">fill_options_validation</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#PumpWoodDataBaseRestService">PumpWoodDataBaseRestService</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#PumpWoodDataBaseRestService.model_variables">model_variables</a>
                        </li>
                        <li>
                                <a class="variable" href="#PumpWoodDataBaseRestService.expected_cols_bulk_save">expected_cols_bulk_save</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodDataBaseRestService.pivot">pivot</a>
                        </li>
                        <li>
                                <a class="function" href="#PumpWoodDataBaseRestService.bulk_save">bulk_save</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
pumpwood-djangoviews<wbr>.src<wbr>.<a href="./../pumpwood_djangoviews.html">pumpwood_djangoviews</a><wbr>.views    </h1>

                        <div class="docstring"><p>Create views using Pumpwood pattern.</p>

<p>Define base views associated with Pumpwood end-points.</p>
</div>

                        <input id="mod-views-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-views-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">Create views using Pumpwood pattern.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">Define base views associated with Pumpwood end-points.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">import</span> <span class="nn">simplejson</span> <span class="k">as</span> <span class="nn">json</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">import</span> <span class="nn">datetime</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">import</span> <span class="nn">pumpwood_djangoauth.i8n.translate</span> <span class="k">as</span> <span class="nn">_</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">import</span> <span class="nn">copy</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">from</span> <span class="nn">django.db.models.fields</span> <span class="kn">import</span> <span class="n">NOT_PROVIDED</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">from</span> <span class="nn">django.db.models.fields.files</span> <span class="kn">import</span> <span class="n">FieldFile</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">viewsets</span><span class="p">,</span> <span class="n">status</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">from</span> <span class="nn">rest_framework.response</span> <span class="kn">import</span> <span class="n">Response</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="kn">from</span> <span class="nn">werkzeug.utils</span> <span class="kn">import</span> <span class="n">secure_filename</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="kn">from</span> <span class="nn">pumpwood_miscellaneous.storage</span> <span class="kn">import</span> <span class="n">PumpWoodStorage</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="kn">from</span> <span class="nn">pumpwood_communication</span> <span class="kn">import</span> <span class="n">exceptions</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="kn">from</span> <span class="nn">pumpwood_communication.microservices</span> <span class="kn">import</span> <span class="n">PumpWoodMicroService</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="kn">from</span> <span class="nn">pumpwood_djangoviews.renderer</span> <span class="kn">import</span> <span class="n">PumpwoodJSONRenderer</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="kn">from</span> <span class="nn">pumpwood_djangoviews.query</span> <span class="kn">import</span> <span class="n">filter_by_dict</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="kn">from</span> <span class="nn">pumpwood_djangoviews.action</span> <span class="kn">import</span> <span class="n">load_action_parameters</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="kn">from</span> <span class="nn">pumpwood_djangoviews.aux.map_django_types</span> <span class="kn">import</span> <span class="n">django_map</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="kn">from</span> <span class="nn">pumpwood_djangoviews.serializers</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>    <span class="n">MicroserviceForeignKeyField</span><span class="p">,</span> <span class="n">MicroserviceRelatedField</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>    <span class="n">LocalForeignKeyField</span><span class="p">,</span> <span class="n">LocalRelatedField</span><span class="p">,</span> <span class="n">DynamicFieldsModelSerializer</span><span class="p">)</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="k">def</span> <span class="nf">save_serializer_instance</span><span class="p">(</span><span class="n">serializer_instance</span><span class="p">):</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">    Save instant using serializer and raise if any validation error.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">    Is is not valid acording to serializer validation, raise error.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">    Args:</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">        serializer_instance:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">            Serializer with an object to be saved.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">    Returns:</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">        New object updated or created.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">    Raises:</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">        PumpWoodObjectSavingException:</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">            &#39;Error when validating fields when saving object&#39;. Raise error if</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="sd">            validation of serializer is not correct. It will return error</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="sd">            dictonary at error payload.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">serializer_instance</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>    <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>        <span class="k">return</span> <span class="n">serializer_instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>        <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Error when validating fields when saving object&quot;</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>            <span class="n">payload</span><span class="o">=</span><span class="n">serializer_instance</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="k">class</span> <span class="nc">PumpWoodRestService</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">    Basic View-Set for pumpwood rest end-points.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="sd">    Example:</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="sd">    ```python</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="sd">    from metabase.models import MetabaseDashboard</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="sd">    from metabase.serializers import MetabaseDashboardSerializer</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">    from config import storage_object, microservice</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">    class RestMetabaseDashboard(PumpWoodRestService):</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="sd">        endpoint_description = &quot;Metabase Dashboard&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">        notes = &quot;Register and generate url to embed Metabase dashboards&quot;</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        # Django model that will be mapped to this end-point</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">        service_model = MetabaseDashboard</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">        # Serializer that will be used to dump model data</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">        serializer = MetabaseDashboardSerializer</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">        # PumpwoodStorage object that will be used to save and retrieve</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">        # file data from storage.</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">        storage_object = storage_object</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="sd">        # PumpWoodMicroService object used to communicate with other</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">        # microservice if necessary. Ex: Trigger ETL Jobs on object</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="sd">        # saving and update.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">        microservice = microservice</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">        # Fields that will be considered as files and extensions that</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">        # will be accepted.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">        file_fields = {</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">            &#39;file&#39;: [&#39;json&#39;, &#39;xlsx&#39;]</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">        }</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">        ###########################################################</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        # Gui this information will be returned at retrieve_options</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">        # to help frontend correctly render app frontend.</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a><span class="sd">        # Set field sets, grouping the fields and hiding those that</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a><span class="sd">        # ar not listed on fieldsets</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a><span class="sd">        gui_retrieve_fieldset = [{</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="sd">                &quot;name&quot;: &quot;main&quot;,</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="sd">                    &quot;status&quot;, &quot;alias&quot;, &quot;description&quot;, &quot;notes&quot;,</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="sd">                    &quot;dimensions&quot;, &quot;updated_by&quot;, &quot;updated_at&quot;]</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="sd">            }, {</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">                &quot;name&quot;: &quot;embedding&quot;,</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">                    &quot;metabase_id&quot;, &quot;auto_embedding&quot;, &quot;object_model_class&quot;,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">                    &quot;object_pk&quot;]</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">            }, {</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="sd">                &quot;name&quot;: &quot;config&quot;,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">                    &quot;expire_in_min&quot;, &quot;default_theme&quot;,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">                    &quot;default_is_bordered&quot;, &quot;default_is_titled&quot;]</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">            }, {</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a><span class="sd">                &quot;name&quot;: &quot;extra_info&quot;,</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">                &quot;fields&quot;: [&quot;extra_info&quot;]</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">            }</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="sd">        ]</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">        # This fields will be set as readonly if fill_options_validation</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">        # is called with query parameter `?user_type=gui`</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">        gui_readonly = [&quot;updated_by_id&quot;, &quot;updated_at&quot;, &quot;extra_info&quot;]</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">        # Indication how the object could be presented to user</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a><span class="sd">        gui_verbose_field = &#39;{pk} | {description}&#39;</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">    ```</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>    <span class="n">_view_type</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>    <span class="n">renderer_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">PumpwoodJSONRenderer</span><span class="p">]</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>    <span class="c1">#####################</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>    <span class="c1"># Route information #</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>    <span class="n">endpoint_description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Description of the end-point, this information will be avaiable at</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">       `rest/pumpwood/endpoints/` for frontend. This information will be</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">       saved at KongRoute, it must be unique for all microservices&quot;&quot;&quot;</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>    <span class="n">dimensions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Dimensions associated with end-points. This information will be saved</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">       at KongRoute dimensions.&quot;&quot;&quot;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>    <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Icon associated with model class. This information will be saved</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">       at KongRoute icon field.&quot;&quot;&quot;</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>    <span class="c1">#####################</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>    <span class="n">service_model</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Django model associated end-points will be made avaiable.&quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>    <span class="n">storage_object</span><span class="p">:</span> <span class="n">PumpWoodStorage</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;PumpwoodStorage object that will be used to save and retrieve</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">       file data from storage.&quot;&quot;&quot;</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>    <span class="n">microservice</span><span class="p">:</span> <span class="n">PumpWoodMicroService</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;PumpWoodMicroService object used to communicate with other</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">       microservice if necessary. Ex: Trigger ETL Jobs on object</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">       saving and update.&quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>    <span class="n">trigger</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;If should be called ELTTrigger at ETL microservice at saving, deleting</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">       and executing actions. Default value is False.&quot;&quot;&quot;</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>    <span class="c1"># List fields</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>    <span class="n">serializer</span><span class="p">:</span> <span class="n">DynamicFieldsModelSerializer</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializer that will be used to dump data on end-points.&quot;&quot;&quot;</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>    <span class="n">file_fields</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;File fields associated with model, it is a dictonary with keys as</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">       field keys and values as a list of accepted extensions.&quot;&quot;&quot;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>    <span class="c1"># Front-end uses 50 as limit to check if all data have been fetched,</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>    <span class="c1"># if change this parameter, be sure to update front-end list component.</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>    <span class="n">list_paginate_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;List end-point pagination default limit.&quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>    <span class="c1">#######</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>    <span class="c1"># Gui #</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>    <span class="n">gui_retrieve_fieldset</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve field set to be passed to gui from `retrieve_view_options`.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">       It is a list of dictonary with keys name for name of the viewset and</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">       fields for the fields that are associated.</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">       Example:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">       ```python</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">       gui_retrieve_fieldset = [{</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">               &quot;name&quot;: &quot;main&quot;,</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">                   &quot;status&quot;, &quot;alias&quot;, &quot;description&quot;, &quot;notes&quot;,</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a><span class="sd">                   &quot;dimensions&quot;, &quot;updated_by&quot;, &quot;updated_at&quot;]</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="sd">           }, {</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">               &quot;name&quot;: &quot;embedding&quot;,</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">                   &quot;metabase_id&quot;, &quot;auto_embedding&quot;, &quot;object_model_class&quot;,</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a><span class="sd">                   &quot;object_pk&quot;]</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">           }, {</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">               &quot;name&quot;: &quot;config&quot;,</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">                   &quot;expire_in_min&quot;, &quot;default_theme&quot;,</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="sd">                   &quot;default_is_bordered&quot;, &quot;default_is_titled&quot;]</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">           }, {</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">               &quot;name&quot;: &quot;extra_info&quot;,</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">               &quot;fields&quot;: [&quot;extra_info&quot;]</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">           }</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">       ]</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">       ```</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>    <span class="n">gui_verbose_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;pk&#39;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Suggest verbose for object using information from object. It is set</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">       as python string format, default `pk`. Ex: `{pk} | {description}` will</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">       use information from `pk` and `description` keys.&quot;&quot;&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>    <span class="n">gui_readonly</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set readonly fields when calling with `user_type=gui` for</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">       `fill_options_validation` end-point.&quot;&quot;&quot;</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>    <span class="c1">#######</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>    <span class="c1">###############################</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>    <span class="c1"># Gui attribute get functions #</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>    <span class="k">def</span> <span class="nf">get_gui_retrieve_fieldset</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">        Return gui_retrieve_fieldset attribute.</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a><span class="sd">        to get `gui_retrieve_fieldset` attribute.</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a><span class="sd">        Returns:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">            Return `gui_retrieve_fieldset` attribute.</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_retrieve_fieldset</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>    <span class="k">def</span> <span class="nf">get_gui_verbose_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="sd">        Return gui_verbose_field attribute.</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">        to get `gui_verbose_field` attribute.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">        Returns:</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">            Return `gui_verbose_field` attribute.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_verbose_field</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>    <span class="k">def</span> <span class="nf">get_gui_readonly</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">        Return gui_readonly attribute.</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">        to get `gui_readonly` attribute.</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">        Returns:</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a><span class="sd">            Return `gui_readonly` attribute.</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_readonly</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>    <span class="k">def</span> <span class="nf">get_list_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">        Return list_fields from associated serializer.</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">        to get `cls.serializer().get_list_fields()` data.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        Returns:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">            Return list_fields for model.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>        <span class="n">serializer_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">()</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>        <span class="k">return</span> <span class="n">serializer_obj</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>    <span class="c1">########################</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>    <span class="k">def</span> <span class="nf">_allowed_extension</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">allowed_extensions</span><span class="p">):</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>        <span class="n">extension</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>            <span class="n">extension</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_extensions</span><span class="p">:</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_extensions</span><span class="p">:</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>                <span class="k">return</span> <span class="p">[(</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>                    <span class="s2">&quot;File </span><span class="si">{filename}</span><span class="s2"> with extension </span><span class="si">{extension}</span><span class="s2"> not &quot;</span> <span class="o">+</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>                    <span class="s2">&quot;allowed.</span><span class="se">\n</span><span class="s2"> Allowed extensions: </span><span class="si">{allowed_extensions}</span><span class="s2">&quot;</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                         <span class="n">allowed_extensions</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">allowed_extensions</span><span class="p">))]</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a><span class="sd">        View function to list objects with pagination.</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="sd">        Number of objects are limited by. To get next page, use</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd">        exclude_dict[&#39;pk__in&#39;: [list of the received pks]] to get more</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd">        objects.</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a><span class="sd">        ..: notes:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a><span class="sd">        Use to limit the query .query.filter_by_dict function. Request</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">        expected parameters and query parameters are listed bellow:</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">        - **limit [int] = None:**</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">            Limit of the query result, if not set attribute</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">            `list_paginate_limit` will be used insted.&lt;br&gt;</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="sd">        No query data.</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">        Args:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">            request: Django request object.</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">        Returns:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">            Return the result of the query limited to</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">            `list_paginate_limit` attribute. Objects are serialized</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">            using `serializer` attribute.</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">        Raises:</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="n">limit</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>            <span class="n">list_paginate_limit</span> <span class="o">=</span> <span class="n">limit</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_paginate_limit</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>            <span class="c1">################################################################</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>                        <span class="k">break</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>            <span class="c1">################################################################</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)[:</span><span class="n">list_paginate_limit</span><span class="p">]</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>    <span class="k">def</span> <span class="nf">list_without_pag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">        View function to list objects **without** pagination.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        ..: notes:</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a><span class="sd">        .. warning::</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">            Be careful with the number of the objects that will be fetched!</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="sd">            This end-point does not paginate data returning all information</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">            of query result.</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">        No query data.</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">        Args:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">            request: Django request object.</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">        Returns:</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">            Return the result of the query **without** pagination . Objects</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">            are serialized using `serializer` attribute.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">        Raises:</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>            <span class="c1">################################################################</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>                        <span class="k">break</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>            <span class="c1">################################################################</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="sd">        Retrieve view, uses the retrieve_serializer to return object with pk.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="sd">        Query parameters are loaded as json data, ex:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">        `json.loads(request.query_params.get(&#39;fields&#39;, &#39;null&#39;))`</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">        - **fields [List[str]] = None:** List of the fields that should be</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">            returned.</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">        - **foreign_key_fields [bool] = False:** If foreign key should be</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">            returned with object data.</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">        - **related_fields [bool] = False:** If related fields should be</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">            returned with object data.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">        - **default_fields [bool] = False:** If only serializer list_fields</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a><span class="sd">            should be returned.</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        Args:</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">            request [pk]:</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">                Django request.</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">            int [pk]:</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">                Object pk to be retrieve</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">        Returns:</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">            The representation of the object with pk dumped by</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">            self.serializer using arguments passed on query parameters.</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="c1">##########################</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="c1"># Get serializer options #</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span><span class="p">))</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foreign_key_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>        <span class="n">related_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;related_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>        <span class="n">default_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>        <span class="c1">##########################</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="n">response_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>            <span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>            <span class="n">related_fields</span><span class="o">=</span><span class="n">related_fields</span><span class="p">,</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>            <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>    <span class="k">def</span> <span class="nf">retrieve_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">        Read file without stream.</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">        .. warning::</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">            This end-point will read de file from storage and them return the</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">            request. Be carefull when retriving large files (greater than</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a><span class="sd">            10Mb).</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        - **file_field [str]:** File field to receive stream file.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">            returned with object data.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">        Args:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">            pk [int]:</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">                Pk of the object to save file field.</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">        Returns:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">            Return a file associated with object pk, file field `file_field`</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">            read from storage.</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">        Raises:</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">                &#39;{field} must be set on file_fields dictionary.&#39;. Indicates</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="sd">                that the requested file field was not found on view</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">                `file_fields` attribute.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">                &#39;storage_object not set&#39;. Indicates that the `storage_object`</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="sd">                attribute is not set at view. This view can not perform</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">                file operations.</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">                &#39;field [{}] is not set at object&#39;. Indicates that requested</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">                file field is not set on object.</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>                <span class="s2">&quot;storage_object not set&quot;</span><span class="p">)</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>                <span class="s2">&quot;&#39;</span><span class="si">{field}</span><span class="s2">&#39; must be set on file_fields dictionary.&quot;</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">file_field</span><span class="p">)</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>                <span class="n">msg</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>                    <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">,</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>                    <span class="n">file_field</span><span class="p">:</span> <span class="s1">&#39;not_found&#39;</span><span class="p">})</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">FieldFile</span><span class="p">):</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] is not set at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>        <span class="n">file_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]))</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;content_type&quot;</span><span class="p">]</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="s1">&#39;attachment; filename=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">file_name</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">        Delete view.</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">        .. notes::</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a><span class="sd">            If model has deleted field, the default behaviour will set this</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">            field to True not deleting the object. To force deletion it is</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a><span class="sd">            necessary to use query paramenter `force_delete=True`</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a><span class="sd">        - **force_delete [bool] = False:** Force deletion of models that</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a><span class="sd">            have `deleted` field. If False, object with deleted</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a><span class="sd">            will not be deleted, but deleted will be set as True.</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="sd">        Args:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">            pk [int]: Object pk to be retrieve.</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">        Returns:</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">            Return the object that was removed.</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>        <span class="n">force_delete</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>            <span class="s1">&#39;force_delete&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>        <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>        <span class="c1"># If object has deleted field, set it to True if force_delete</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="c1"># parameter is not set, this will function for objects that</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="c1"># deletion is not a good pratice for keep data audit.</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_delete</span><span class="p">:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">deleted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">return_data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>    <span class="k">def</span> <span class="nf">delete_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">        Delete many data using filter.</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        .. warning::</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">            This action will delete all objects that satisfies the query</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">            filter_dict and exclude_dict. It will also delete objects with</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">            deleted fields. **THIS REQUEST CAN NOT BE UNDONE**.</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        Args:</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">        Returns:</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a><span class="sd">            True if operation has completed.</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a><span class="sd">        Raises:</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="sd">            PumpWoodObjectDeleteException:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="sd">                If any error raised when performing request.</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>            <span class="n">query_set</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDeleteException</span><span class="p">(</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>    <span class="k">def</span> <span class="nf">remove_file_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">        Remove file field.</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">        - **file_field [str]:**</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">            File field associated with a file that will be removed.&lt;br&gt;</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        Args:</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">            pk [int]: pk of the object.</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a><span class="sd">        Returns:</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="sd">            True if the object was removed.</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">        Raises:</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">                Indicates that `file_file` is not in file_fields keys of</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a><span class="sd">                the view.</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="sd">                &#39;field [{}] not found at object&#39;. Indicates that file was not</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">                found on storage.</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>                <span class="s2">&quot;file_field must be set on self.file_fields dictionary.&quot;</span><span class="p">)</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>        <span class="n">file</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] not found at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a><span class="sd">        Save and update object acording to request.data.</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a><span class="sd">        Object will be updated if request.data[&#39;pk&#39;] is not None.</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a><span class="sd">        Object to be saved. If a pk is set them the object will be updated,</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a><span class="sd">        if pk is None or not set a new object will be created.</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">        Args:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">        Returns:</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a><span class="sd">            Serialized new/updated object.</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">        Raises:</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">            PumpWoodException:</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">                &#39;Object model class diferent from {service_model} :</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">                {service_model}&#39;. Indicates that the end-point and the</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">                model_class of the object are impatible.</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">                &#39;Error when validating fields when saving object&#39;. Indicates</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a><span class="sd">                that there were error when validating object</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">                at the serializer. Error payload will have the fields with</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">                error as keys of the dictonary.</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>        <span class="n">request_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>        <span class="k">if</span> <span class="s2">&quot;application/json&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">content_type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__json__&quot;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">))</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>        <span class="n">data_pk</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="n">saved_obj</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="c1"># update</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="k">if</span> <span class="n">data_pk</span><span class="p">:</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>            <span class="n">data_to_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">data_pk</span><span class="p">)</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>                <span class="n">data_to_update</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="c1"># save</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>                <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>        <span class="c1"># Uploading files</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>        <span class="n">object_errors</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>        <span class="n">file_save_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%Hh%Mm%Ss&quot;</span><span class="p">)</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>            <span class="n">field_errors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">:</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>                <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>                <span class="n">file_name</span> <span class="o">=</span> <span class="n">secure_filename</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>                <span class="n">field_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_extension</span><span class="p">(</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>                    <span class="n">filename</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>                    <span class="n">allowed_extensions</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="p">[</span><span class="n">field</span><span class="p">]))</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>                <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>                    <span class="nb">str</span><span class="p">(</span><span class="n">saved_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>                    <span class="n">file_save_time</span><span class="p">,</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>                    <span class="n">file_name</span><span class="p">)</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_errors</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>                    <span class="n">object_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_errors</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>                    <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>                    <span class="n">file_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{model_class}</span><span class="s1">__</span><span class="si">{field}</span><span class="s1">/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>                        <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">)</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>                    <span class="n">storage_filepath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">write_file</span><span class="p">(</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>                        <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>                        <span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>                        <span class="n">content_type</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">content_type</span><span class="p">,</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>                        <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;overide&#39;</span><span class="p">)</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>                    <span class="nb">setattr</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">storage_filepath</span><span class="p">)</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="k">if</span> <span class="n">object_errors</span> <span class="o">!=</span> <span class="p">{}:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;error when saving object: &quot;</span> \
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>                <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;error when updating object: &quot;</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">object_errors</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="n">message_to_append</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">object_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>                <span class="n">message_to_append</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message_to_append</span><span class="p">)</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>        <span class="n">saved_obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>            <span class="c1"># Process ETLTrigger for the model class</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>            <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">saved_obj</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="c1"># Overhead, serializando e deserializando o objecto</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">response_status</span><span class="p">)</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>    <span class="k">def</span> <span class="nf">_get_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">        Get all actions with action decorator.</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">        @private</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="c1"># this import works here only</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>        <span class="kn">import</span> <span class="nn">inspect</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="n">function_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">))</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="n">method_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">))</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="n">method_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">function_dict</span><span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>            <span class="n">name</span><span class="p">:</span> <span class="n">func</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">method_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;is_action&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)}</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="k">return</span> <span class="n">actions</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>    <span class="k">def</span> <span class="nf">list_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a><span class="sd">        List model exposed actions.</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="sd">        No payload.</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">        Args:</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">        Returns:</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">            Return a list of dictonary with information of the avaiable</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">            actions for model class. Actions info object keys:</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">            - **action_name [str]:** Name of the function associated with</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">                action on model_class.</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">            - **action_name__verbose [str]:** Name of the function associated</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a><span class="sd">                with action on model_class translates by Pumpwood I8s.</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a><span class="sd">            - **doc_string [str]:** Doc string associated with function.</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a><span class="sd">            - **info [str]:** Info for que action passed as argument at action</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="sd">                function decorator.</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a><span class="sd">            - **info__verbose [str]:** Info for que action passed as argument</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="sd">                at action function decorator model_class translates by</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a><span class="sd">                Pumpwood I8s.</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="sd">            - **is_static_function [bool]:** Boolean value setting if function</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a><span class="sd">                is classmethod or staticmethod (True), in this cases it is not</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="sd">                associated with an object and aa pk should no be passed as</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">                argument.</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">            - **parameters [dict]:** Dictionary with paramenter as key and with</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">                keys:</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">                - **default_value [any]:** Default value for paramenter.</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">                - **many [bool]:** If the function parameter is many (list).</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">                - **required [bool]:** If the parameter is necessary to run the</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">                    function or optinal.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">                - **type [str]:** Type of the paramenter that shoul be passed</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a><span class="sd">                    to function.</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">                - **verbose_name [str]:** Parameter name translated using</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">                    Pumpwood I8s.</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">            - **return [dict]:** A dictionary with the type associated with</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a><span class="sd">                function return. Keys:</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a><span class="sd">                - **many [bool]:** If the return result is a list.</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a><span class="sd">                - **type [str]:** Type of the return.</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="n">action_descriptions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__action__</span><span class="si">{action}</span><span class="s2">&quot;</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>            <span class="n">action_dict</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">])</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>            <span class="c1">#########################################################</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>            <span class="c1"># Translate action_name and info to end-user at verbose #</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__action_name&quot;</span><span class="p">)</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__info&quot;</span><span class="p">)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>                <span class="n">item</span><span class="p">[</span><span class="s2">&quot;verbose_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>                    <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__parameters&quot;</span><span class="p">)</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>            <span class="c1">#########################################################</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="n">action_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action_dict</span><span class="p">)</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">action_descriptions</span><span class="p">)</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>    <span class="k">def</span> <span class="nf">execute_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">action_name</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a><span class="sd">        Execute action over object or class using parameters.</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">        Payload dictionary correspont to function parameters as key-&gt;value</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a><span class="sd">        elements.</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a><span class="sd">        Args:</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a><span class="sd">            request:</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a><span class="sd">                Django request.</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="sd">            action_name [str]:</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">                Action name.</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a><span class="sd">            pk [pk]:</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a><span class="sd">                Of the object that will be used to run the action. For</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">                staticmethods and classmethods the object should not be</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">                passed as argument.</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a><span class="sd">        Returns:</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a><span class="sd">            Return a dictonary with keys:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">            -</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">        Raises:</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is not</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a><span class="sd">                a classmethod and not pk provided.&#39;. Indicates that the action</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="sd">                is not a classmethod and the pk was not passed as function</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="sd">                argument.</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is a</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a><span class="sd">                classmethod and pk provided.&#39;. Indicates that the action is</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a><span class="sd">                a classmethod, but a pk was passed as argument.</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="sd">                &#39;Requested object {service_model}[{pk}] not found.&#39;.</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">                Indicates that the object with [pk] was not found on</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a><span class="sd">                database.</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">                &#39;error when unserializing function arguments: [...]&#39;.</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">                Indicates that it was not possible to unserialize objects</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="sd">                passed as function arguments. Pumpwood used function tips</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="sd">                types to convert the arguments on correct types before</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">                passing them to function.</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>        <span class="n">rest_action_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="k">if</span> <span class="n">action_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rest_action_names</span><span class="p">:</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>                <span class="s2">&quot;There is no method </span><span class="si">{action}</span><span class="s2"> in rest actions &quot;</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>                <span class="s2">&quot;for </span><span class="si">{class_name}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>                    <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>                    <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is not &quot;</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>                <span class="s2">&quot;a classmethod and not pk provided.&quot;</span><span class="p">)</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is a&quot;</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>                <span class="s2">&quot;classmethod and pk provided.&quot;</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>        <span class="n">object_dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>            <span class="n">model_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>            <span class="k">if</span> <span class="n">model_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                <span class="n">message_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                    <span class="s2">&quot;Requested object </span><span class="si">{service_model}</span><span class="s2">[</span><span class="si">{pk}</span><span class="s2">] not found.&quot;</span><span class="p">)</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                <span class="n">temp_service_model</span> <span class="o">=</span> \
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="n">message_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>                    <span class="n">service_model</span><span class="o">=</span><span class="n">temp_service_model</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>                        <span class="s2">&quot;service_model&quot;</span><span class="p">:</span> <span class="n">temp_service_model</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">})</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>            <span class="n">object_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>        <span class="n">loaded_parameters</span> <span class="o">=</span> <span class="n">load_action_parameters</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">action</span><span class="p">(</span><span class="o">**</span><span class="n">loaded_parameters</span><span class="p">)</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>                <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>                    <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>            <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">,</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">object_dict</span><span class="p">})</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>    <span class="k">def</span> <span class="nf">cls_fields_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">        Return field options using serializer.</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        Args:</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">            No args.</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">        Returns:</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a><span class="sd">            Return information for each column to render search filters on</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a><span class="sd">            frontend. Each field will have:</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a><span class="sd">            - **column [str]:** Name of the column associated with the</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a><span class="sd">                field (same as the key).</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="sd">            - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">                using Pumpwood I8s.</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a><span class="sd">            - **default [str]:** Defult value for column.</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">            - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">                can be used to pass information about foreign key or</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">                related fields.</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">            - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a><span class="sd">            - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">                collumn translated using Pumpwood I8s.</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">            - **indexed [str]:** If this column is indexed.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="sd">            - **nullable [str]:** If this column is nullable.</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a><span class="sd">            - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a><span class="sd">                key of the table. This is use full for tables with</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a><span class="sd">                composite pk.</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a><span class="sd">            - **read_only [str]:** If this column is read-only on</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a><span class="sd">                end-point. The results for this value may differ from</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a><span class="sd">                fill_validation due to `gui_readonly`.</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="sd">            - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a><span class="sd">            - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a><span class="sd">            - **in [str]:** If column type is options, this key will</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a><span class="sd">                indicates the accepted values for this field. This element</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="sd">                is a dictonary with keys:</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">                - **description:** Human readble value for option.</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a><span class="sd">                - **description__verbose:** Human readble value for</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a><span class="sd">                    option translated by Pumpwood I8s.</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a><span class="sd">                - **value:** Value of the option that will be saved on</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a><span class="sd">                    database, for save end-points use this value to</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a><span class="sd">                    modify the object.</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="n">dict_fields</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>            <span class="n">is_relation</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;is_relation&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_relation</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                <span class="n">dict_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fields__</span><span class="si">{field}</span><span class="s2">&quot;</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>        <span class="c1"># Get read-only fields from serializer</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;read_only_fields&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>        <span class="c1"># Get field serializers</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>        <span class="n">serializer_fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fields</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>        <span class="c1"># Get serializers associated with FKs and related models</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>        <span class="n">microservice_fk_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>        <span class="n">microservice_related_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>        <span class="n">all_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_serializer</span> <span class="ow">in</span> <span class="n">serializer_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>            <span class="c1">################################################################</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>            <span class="c1"># Do not create relations between models in search description #</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>            <span class="n">is_microservice_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceForeignKeyField</span><span class="p">)</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>            <span class="n">is_local_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalForeignKeyField</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>            <span class="k">if</span> <span class="n">is_microservice_fk</span> <span class="ow">or</span> <span class="n">is_local_fk</span><span class="p">:</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>                <span class="n">microservice_fk_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>            <span class="n">is_microservice_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceRelatedField</span><span class="p">)</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>            <span class="n">is_local_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalRelatedField</span><span class="p">)</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>            <span class="k">if</span> <span class="n">is_microservice_related</span> <span class="ow">or</span> <span class="n">is_local_related</span><span class="p">:</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>                <span class="n">microservice_related_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="n">dict_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_serializer</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>                <span class="k">continue</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>            <span class="c1">################################################################</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>            <span class="c1"># Getting correspondent simple type</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>            <span class="n">column_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>            <span class="n">python_type</span> <span class="o">=</span> <span class="n">django_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column_type</span><span class="p">)</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="k">if</span> <span class="n">python_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>                    <span class="s2">&quot;Type [</span><span class="si">{column_type}</span><span class="s2">] not implemented in map dictionary &quot;</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>                    <span class="s2">&quot;django type -&gt; python type&quot;</span><span class="p">)</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>                    <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column_type</span><span class="o">=</span><span class="n">column_type</span><span class="p">))</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>            <span class="c1"># Getting default value</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">column</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">column</span><span class="p">,</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>                <span class="s2">&quot;column__verbose&quot;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>                <span class="s2">&quot;help_text__verbose&quot;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">python_type</span><span class="p">,</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>                    <span class="p">(</span><span class="n">column</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>                    <span class="p">(</span><span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>                <span class="p">),</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="p">{}}</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>            <span class="c1"># Get choice options if avaiable</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>            <span class="n">choices</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>            <span class="k">if</span> <span class="n">choices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;options&quot;</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>                <span class="n">in_list</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>                <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                    <span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                        <span class="n">sentence</span><span class="o">=</span><span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__choices&quot;</span><span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>                    <span class="n">in_list</span><span class="p">[</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>                        <span class="s2">&quot;description__verbose&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_list</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>            <span class="c1"># Set autoincrement for primary keys</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#autoincrement#&quot;</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;doc_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;object primary key&quot;</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>            <span class="c1"># Ajust type if file</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>            <span class="n">file_field</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>            <span class="k">if</span> <span class="n">file_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;extra_info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                    <span class="s2">&quot;permited_file_types&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">}</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>        <span class="c1">#############################################</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_fk_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="k">if</span> <span class="n">column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>                    <span class="s2">&quot;Foreign Key [</span><span class="si">{key}</span><span class="s2">] was not found as model_class &quot;</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                    <span class="s2">&quot;[</span><span class="si">{model_class}</span><span class="s2">] fields&quot;</span><span class="p">)</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodOtherException</span><span class="p">(</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">})</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>            <span class="n">null</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>            <span class="c1"># Getting default value</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;foreign_key&quot;</span><span class="p">,</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">,</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>        <span class="c1">#############################################</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_related_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;related_model&quot;</span><span class="p">,</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">return</span> <span class="n">all_info</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>    <span class="k">def</span> <span class="nf">search_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a><span class="sd">        Return options to be used in list funciton.</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>    <span class="k">def</span> <span class="nf">fill_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a><span class="sd">        Return options for object update acording its partial data.</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>    <span class="k">def</span> <span class="nf">list_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a><span class="sd">        Return information to render list views on frontend.</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a><span class="sd">        No payload data.</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="sd">        Args:</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a><span class="sd">        Returns:</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a><span class="sd">            Return a dictionary with keys:</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a><span class="sd">            - **list_fields[List[str]]:** Return a list of default list fields</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a><span class="sd">                that should be redendered on list view.</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a><span class="sd">            - **field_type [dict]:** Return information for each column to</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a><span class="sd">                render search filters on frontend. Each field will have:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">                - **column [str]:** Name of the column associated with the</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a><span class="sd">                    field (same as the key).</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">                - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">                - **default [str]:** Defult value for column.</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">                - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a><span class="sd">                    can be used to pass information about foreign key or</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a><span class="sd">                    related fields.</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a><span class="sd">                - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a><span class="sd">                - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a><span class="sd">                    collumn translated using Pumpwood I8s.</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a><span class="sd">                - **indexed [str]:** If this column is indexed.</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a><span class="sd">                - **nullable [str]:** If this column is nullable.</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a><span class="sd">                - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a><span class="sd">                    key of the table. This is use full for tables with</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a><span class="sd">                    composite pk.</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="sd">                - **read_only [str]:** If this column is read-only on</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a><span class="sd">                    end-point. The results for this value may differ from</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="sd">                    fill_validation due to `gui_readonly`.</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a><span class="sd">                - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a><span class="sd">                - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a><span class="sd">                - **in [str]:** If column type is options, this key will</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a><span class="sd">                    indicates the accepted values for this field. This element</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a><span class="sd">                    is a dictonary with keys:</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="sd">                    - **description:** Human readble value for option.</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">                    - **description__verbose:** Human readble value for</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="sd">                        option translated by Pumpwood I8s.</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a><span class="sd">                    - **value:** Value of the option that will be saved on</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">                        database, for save end-points use this value to</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">                        modify the object.</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="n">list_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>        <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>            <span class="s2">&quot;default_list_fields&quot;</span><span class="p">:</span> <span class="n">list_fields</span><span class="p">,</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fields_options</span><span class="p">})</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>    <span class="k">def</span> <span class="nf">retrieve_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a><span class="sd">        Return information to correctly create retrieve view.</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a><span class="sd">        Field set are set using gui_retrieve_fieldset attribute of the</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a><span class="sd">        class. It is used classes to define each fieldset.</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a><span class="sd">        No payload data.</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">        Args:</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a><span class="sd">        Returns:</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a><span class="sd">            Return a dictonary with information to render retrieve</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a><span class="sd">            views on front-ends. Returns a dictonary with keys:</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="sd">            - **fieldset [List[dict]]:** A list of dictionaries with</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a><span class="sd">                information for rendering the retrieve page on frontend.</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="sd">                - **fields [List[str]]:** List of fields to be rendered at</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a><span class="sd">                    fieldset.</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a><span class="sd">                - **name [str]:** Name of the fieldset.</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="sd">                - **name__verbose [str]:** Name of the fieldset translated</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">            - **verbose_field [str]:** String that can be used to create</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">                user readble string at frontend.</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a><span class="sd">            Example:</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a><span class="sd">            ```python</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="sd">            {&#39;fieldset&#39;: [{</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a><span class="sd">                    &#39;status&#39;, &#39;alias&#39;, &#39;description&#39;, &#39;notes&#39;, &#39;dimensions&#39;,</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a><span class="sd">                    &#39;updated_by&#39;, &#39;updated_at&#39;],</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;main&#39;</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a><span class="sd">                &#39;name&#39;: &#39;main&#39;},</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="sd">              {</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a><span class="sd">                    &#39;metabase_id&#39;, &#39;auto_embedding&#39;,</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a><span class="sd">                    &#39;object_model_class&#39;, &#39;object_pk&#39;],</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;embedding&#39;</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a><span class="sd">                &#39;name&#39;: &#39;embedding&#39;},</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a><span class="sd">              {</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a><span class="sd">                    &#39;expire_in_min&#39;, &#39;default_theme&#39;, &#39;default_is_bordered&#39;,</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a><span class="sd">                    &#39;default_is_titled&#39;],</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;config&#39;</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="sd">                &#39;name&#39;: &#39;config&#39;},</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a><span class="sd">              {</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a><span class="sd">                &#39;fields&#39;: [&#39;extra_info&#39;],</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;extra_info&#39;</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="sd">                &#39;name&#39;: &#39;extra_info&#39;</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a><span class="sd">              }],</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="sd">             &#39;verbose_field&#39;: &#39;{pk} | {description}&#39;}</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">            ```</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>        <span class="n">gui_retrieve_fieldset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_retrieve_fieldset</span><span class="p">()</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>        <span class="n">gui_verbose_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_verbose_field</span><span class="p">()</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>        <span class="c1"># If gui_retrieve_fieldset is not set return all columns</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>        <span class="c1"># on the main tab</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>        <span class="k">if</span> <span class="n">gui_retrieve_fieldset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>            <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">fields_options</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_columns</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;pk&#39;</span><span class="p">,</span> <span class="s1">&#39;model_class&#39;</span><span class="p">})</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>            <span class="n">all_columns</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">all_columns</span><span class="p">}}})</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>            <span class="n">return_gui_retrieve_fieldset</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">gui_retrieve_fieldset</span><span class="p">)</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>            <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>            <span class="n">tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fieldset_name__</span><span class="si">{fieldset_name}</span><span class="s2">&quot;</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>            <span class="k">for</span> <span class="n">fieldset</span> <span class="ow">in</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">:</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>                <span class="n">fieldset_name</span> <span class="o">=</span> <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>                <span class="n">tag</span> <span class="o">=</span> <span class="n">tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>                    <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">fieldset_name</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">)</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>                <span class="n">name__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">sentence</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>                <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name__verbose</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">})</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>    <span class="k">def</span> <span class="nf">fill_options_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a><span class="sd">        Return fill options for retrieve/save pages.</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a><span class="sd">        It will validate partial data fill return update fill options and</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a><span class="sd">        raise validation errors if necessary.</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a><span class="sd">        Partially filled data to be validated by the backend.</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a><span class="sd">        - **user_type[str]:**</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a><span class="sd">            Must be in [&#39;api&#39;, &#39;gui&#39;]. It will return the options according</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a><span class="sd">            to interface user is using. When requesting using &#39;gui&#39;,</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a><span class="sd">            self.gui_readonly field will be setted as read-only.</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a><span class="sd">        - **field [str]:**</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a><span class="sd">            Set to validade an specific field. If not set all</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a><span class="sd">            fields will be validated. Validation must be implemented.</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a><span class="sd">        Args:</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">        Return [dict]:</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a><span class="sd">            Return an dictonary with `field_descriptions` generated by</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a><span class="sd">            `cls_fields_options` and `gui_readonly` indicating the fields</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="sd">            that will be set as read-only if user_type=&#39;gui&#39;</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>        <span class="n">user_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_type&#39;</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">)</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>        <span class="n">field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>        <span class="n">partial_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>        <span class="n">gui_readonly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_readonly</span><span class="p">()</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>        <span class="n">fill_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>        <span class="c1"># If it is gui interface then set gui_readonly as read-only</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="c1"># this will limit fields that are not read-only but should not</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="c1"># be edited be the user</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>        <span class="k">if</span> <span class="n">user_type</span> <span class="o">==</span> <span class="s1">&#39;gui&#39;</span><span class="p">:</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">fill_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">gui_readonly</span><span class="p">:</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>                    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;read_only&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fill_options</span><span class="p">,</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>            <span class="s2">&quot;gui_readonly&quot;</span><span class="p">:</span> <span class="n">gui_readonly</span><span class="p">})</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="k">class</span> <span class="nc">PumpWoodDataBaseRestService</span><span class="p">(</span><span class="n">PumpWoodRestService</span><span class="p">):</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">    This view extends PumpWoodRestService, including pivot function.</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">    This view will make data end-points avaiable at frontend for retriving</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">    data without the use of serializers using pivot end-point and bulk</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a><span class="sd">    save of data using bulk-save end-point.</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>    <span class="n">_view_type</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>    <span class="n">model_variables</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Specify which model variables will be returned in pivot. Line index are</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a><span class="sd">       the model_variables - columns (function pivot parameter) itens.&quot;&quot;&quot;</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>    <span class="n">expected_cols_bulk_save</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the collumns needed at bulk_save.&quot;&quot;&quot;</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>    <span class="k">def</span> <span class="nf">pivot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a><span class="sd">        Pivot QuerySet data acording to columns selected, and filters passed.</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a><span class="sd">        `filter_dict`, `exclude_dict` and `order_by` parameters have same</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a><span class="sd">        behaviour as list end-point.</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a><span class="sd">        - **columns [List[str]]:**</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a><span class="sd">            List of variables that will be considered as collumns to pivot</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a><span class="sd">            data.</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">        - **format [{dict, list, series, split, tight, records,</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a><span class="sd">            index}]:** Format paramter to convert pandas DataFrame to</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a><span class="sd">            dictonary. This dictonary will be returned by the function.</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a><span class="sd">        - **variables [List[str]]:** Variables to be returned, this will</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a><span class="sd">            modify default behaviour of returning `model_variables` attribute</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a><span class="sd">            fields.</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a><span class="sd">        - **show_deleted [bool]:** If model has deleted field, results</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a><span class="sd">            flaged as deleted won&#39;t be fetched. Setting show_deleted = True</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a><span class="sd">            will return this filtered results.</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="sd">        - **add_pk_column [bool]:** If True, pk columns will be added to</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">            results. Using pk columns will not permit to pivot information</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a><span class="sd">            (makes no sense). So far only `id` column will be added to results</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a><span class="sd">            treating composite pks is on the roadmap.</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a><span class="sd">        - **limit [int]:** Limit of the query results (number of objects that</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a><span class="sd">            will be returned).</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a><span class="sd">        Returns:</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a><span class="sd">            Return a pandas DataFrame serialized according to format</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a><span class="sd">            parameter.</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a><span class="sd">        Raises:</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a><span class="sd">                &#39;Pivot is not avaiable, set model_variables at view&#39;. Indicates</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a><span class="sd">                that this end-point is not avaiable. To habilitate it, it is</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a><span class="sd">                necessary to set `model_variables` attribute at view.</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a><span class="sd">                &#39;Columns must be a list of elements.&#39;. Indicates that columns</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a><span class="sd">                type is not a list of strings.</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a><span class="sd">                &#39;Column chosen as pivot is not at model variables&#39;. Indicates</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a><span class="sd">                that column is not present on `model_variables` attribute.</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a><span class="sd">                Propagate errors raised when executing the query.</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a><span class="sd">                &#39;value column not at melted data, it is not possible</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a><span class="sd">                 to pivot dataframe.&#39;. Indicates that value column is not</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a><span class="sd">                 avaiable query results, so it not possible to pivot data.</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Pivot is not avaiable, set model_variables at view&quot;</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>        <span class="n">columns</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>        <span class="nb">format</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">)</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>        <span class="n">model_variables</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variables&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>        <span class="n">show_deleted</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show_deleted&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>        <span class="n">add_pk_column</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;add_pk_column&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>        <span class="n">limit</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>                <span class="s1">&#39;Columns must be a list of elements.&#39;</span><span class="p">)</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>                <span class="s1">&#39;Column chosen as pivot is not at model variables&#39;</span><span class="p">)</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>        <span class="n">filter_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filter_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>        <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exclude_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>        <span class="n">order_by</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;order_by&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">show_deleted</span><span class="p">:</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>                <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>        <span class="c1">#############################</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>        <span class="c1"># Add id columns to results #</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>        <span class="c1"># TODO: Add other fields if set as composite primary key.</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>        <span class="k">if</span> <span class="n">add_pk_column</span><span class="p">:</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>                    <span class="s2">&quot;Can not add pk column and pivot information&quot;</span><span class="p">)</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>            <span class="n">model_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">model_variables</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>        <span class="c1"># Limit pivot results if limit parameter is set</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">query_set</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)]</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>        <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>            <span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="n">query_set</span><span class="p">,</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>            <span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span> <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">,</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>            <span class="s1">&#39;order_by&#39;</span><span class="p">:</span> <span class="n">order_by</span><span class="p">}</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>            <span class="n">filtered_objects_as_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>                <span class="n">query_set</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)))</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>        <span class="n">melted_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>            <span class="n">filtered_objects_as_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">melted_data</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>        <span class="k">if</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({})</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>            <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>                    <span class="s2">&quot;&#39;value&#39; column not at melted data, it is not possible&quot;</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>                    <span class="s2">&quot; to pivot dataframe.&quot;</span><span class="p">)</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>            <span class="n">pivoted_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>                <span class="n">melted_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>                <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>                <span class="n">pivoted_table</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>    <span class="k">def</span> <span class="nf">bulk_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="sd">        Bulk save data.</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a><span class="sd">        This end-point is prefereble for large datainputs on Pumpwood, it is</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a><span class="sd">        not possible to update entries, just add new ones.</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a><span class="sd">        It is much more performant than adding one by one using save</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a><span class="sd">        end-point.</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">        List of dictionaries which must have self.expected_cols_bulk_save.</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a><span class="sd">        No query parameters.</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a><span class="sd">        Args:</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a><span class="sd">            request: Django request.</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a><span class="sd">        Returns:</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a><span class="sd">            A dictonary with key `saved_count` indicating the number of</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a><span class="sd">            objects that were add to database.</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a><span class="sd">        Raises:</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a><span class="sd">                &#39;Bulk save not avaiable. Set expected_cols_bulk_save on</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a><span class="sd">                PumpWoodDataBaseRestService View to habilitate funciton.&#39;</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a><span class="sd">                Indicates that bulk_save end-point was not configured</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a><span class="sd">                for this model class. It is necessary to set</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a><span class="sd">                `expected_cols_bulk_save` attribute to make end-point</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a><span class="sd">                avaiable.</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a><span class="sd">                &#39;Post payload is a list of objects.&#39;. Indicates that the</span>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a><span class="sd">                request payload is not a list as expected.</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a><span class="sd">                &#39;Expected columns and data columns do not match:</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a><span class="sd">                \nExpected columns:{expected}</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a><span class="sd">                \nData columns:{data_cols}&#39;. Indicates that the fields passed</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a><span class="sd">                on the objects are diferent from the expected by the end-point</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a><span class="sd">                check the data or the configuration of the end-point.</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>                <span class="s2">&quot;Bulk save not avaiable. Set expected_cols_bulk_save on &quot;</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>                <span class="s2">&quot;PumpWoodDataBaseRestService View to habilitate funciton.&quot;</span><span class="p">)</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>        <span class="n">data_to_save</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>                <span class="s1">&#39;Post payload is a list of objects.&#39;</span><span class="p">)</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>        <span class="n">pd_data_to_save</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>        <span class="n">pd_data_cols</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pd_data_to_save</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">-</span> <span class="n">pd_data_cols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>            <span class="n">objects_to_load</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data_to_save</span><span class="p">:</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>                <span class="n">new_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>                <span class="n">objects_to_load</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_obj</span><span class="p">)</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;saved_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)})</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>                <span class="s1">&#39;Expected columns and data columns do not match:&#39;</span> <span class="o">+</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Expected columns:</span><span class="si">{expected}</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Data columns:</span><span class="si">{data_cols}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>                        <span class="s2">&quot;expected&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">),</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>                        <span class="s2">&quot;data_cols&quot;</span><span class="p">:</span> <span class="n">pd_data_cols</span><span class="p">})</span>
</span></pre></div>


            </section>
                <section id="save_serializer_instance">
                            <input id="save_serializer_instance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_serializer_instance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">serializer_instance</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="save_serializer_instance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#save_serializer_instance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="save_serializer_instance-34"><a href="#save_serializer_instance-34"><span class="linenos">34</span></a><span class="k">def</span> <span class="nf">save_serializer_instance</span><span class="p">(</span><span class="n">serializer_instance</span><span class="p">):</span>
</span><span id="save_serializer_instance-35"><a href="#save_serializer_instance-35"><span class="linenos">35</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="save_serializer_instance-36"><a href="#save_serializer_instance-36"><span class="linenos">36</span></a><span class="sd">    Save instant using serializer and raise if any validation error.</span>
</span><span id="save_serializer_instance-37"><a href="#save_serializer_instance-37"><span class="linenos">37</span></a>
</span><span id="save_serializer_instance-38"><a href="#save_serializer_instance-38"><span class="linenos">38</span></a><span class="sd">    Is is not valid acording to serializer validation, raise error.</span>
</span><span id="save_serializer_instance-39"><a href="#save_serializer_instance-39"><span class="linenos">39</span></a>
</span><span id="save_serializer_instance-40"><a href="#save_serializer_instance-40"><span class="linenos">40</span></a><span class="sd">    Args:</span>
</span><span id="save_serializer_instance-41"><a href="#save_serializer_instance-41"><span class="linenos">41</span></a><span class="sd">        serializer_instance:</span>
</span><span id="save_serializer_instance-42"><a href="#save_serializer_instance-42"><span class="linenos">42</span></a><span class="sd">            Serializer with an object to be saved.</span>
</span><span id="save_serializer_instance-43"><a href="#save_serializer_instance-43"><span class="linenos">43</span></a><span class="sd">    Returns:</span>
</span><span id="save_serializer_instance-44"><a href="#save_serializer_instance-44"><span class="linenos">44</span></a><span class="sd">        New object updated or created.</span>
</span><span id="save_serializer_instance-45"><a href="#save_serializer_instance-45"><span class="linenos">45</span></a><span class="sd">    Raises:</span>
</span><span id="save_serializer_instance-46"><a href="#save_serializer_instance-46"><span class="linenos">46</span></a><span class="sd">        PumpWoodObjectSavingException:</span>
</span><span id="save_serializer_instance-47"><a href="#save_serializer_instance-47"><span class="linenos">47</span></a><span class="sd">            &#39;Error when validating fields when saving object&#39;. Raise error if</span>
</span><span id="save_serializer_instance-48"><a href="#save_serializer_instance-48"><span class="linenos">48</span></a><span class="sd">            validation of serializer is not correct. It will return error</span>
</span><span id="save_serializer_instance-49"><a href="#save_serializer_instance-49"><span class="linenos">49</span></a><span class="sd">            dictonary at error payload.</span>
</span><span id="save_serializer_instance-50"><a href="#save_serializer_instance-50"><span class="linenos">50</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="save_serializer_instance-51"><a href="#save_serializer_instance-51"><span class="linenos">51</span></a>    <span class="n">is_valid</span> <span class="o">=</span> <span class="n">serializer_instance</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
</span><span id="save_serializer_instance-52"><a href="#save_serializer_instance-52"><span class="linenos">52</span></a>    <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
</span><span id="save_serializer_instance-53"><a href="#save_serializer_instance-53"><span class="linenos">53</span></a>        <span class="k">return</span> <span class="n">serializer_instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="save_serializer_instance-54"><a href="#save_serializer_instance-54"><span class="linenos">54</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="save_serializer_instance-55"><a href="#save_serializer_instance-55"><span class="linenos">55</span></a>        <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="save_serializer_instance-56"><a href="#save_serializer_instance-56"><span class="linenos">56</span></a>            <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Error when validating fields when saving object&quot;</span><span class="p">,</span>
</span><span id="save_serializer_instance-57"><a href="#save_serializer_instance-57"><span class="linenos">57</span></a>            <span class="n">payload</span><span class="o">=</span><span class="n">serializer_instance</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save instant using serializer and raise if any validation error.</p>

<p>Is is not valid acording to serializer validation, raise error.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>serializer_instance:</strong>  Serializer with an object to be saved.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>New object updated or created.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectSavingException:</strong>  'Error when validating fields when saving object'. Raise error if
validation of serializer is not correct. It will return error
dictonary at error payload.</li>
</ul>
</div>


                </section>
                <section id="PumpWoodRestService">
                            <input id="PumpWoodRestService-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PumpWoodRestService</span><wbr>(<span class="base">rest_framework.viewsets.ViewSet</span>):

                <label class="view-source-button" for="PumpWoodRestService-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService-60"><a href="#PumpWoodRestService-60"><span class="linenos">  60</span></a><span class="k">class</span> <span class="nc">PumpWoodRestService</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ViewSet</span><span class="p">):</span>
</span><span id="PumpWoodRestService-61"><a href="#PumpWoodRestService-61"><span class="linenos">  61</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-62"><a href="#PumpWoodRestService-62"><span class="linenos">  62</span></a><span class="sd">    Basic View-Set for pumpwood rest end-points.</span>
</span><span id="PumpWoodRestService-63"><a href="#PumpWoodRestService-63"><span class="linenos">  63</span></a>
</span><span id="PumpWoodRestService-64"><a href="#PumpWoodRestService-64"><span class="linenos">  64</span></a><span class="sd">    Example:</span>
</span><span id="PumpWoodRestService-65"><a href="#PumpWoodRestService-65"><span class="linenos">  65</span></a><span class="sd">    ```python</span>
</span><span id="PumpWoodRestService-66"><a href="#PumpWoodRestService-66"><span class="linenos">  66</span></a><span class="sd">    from metabase.models import MetabaseDashboard</span>
</span><span id="PumpWoodRestService-67"><a href="#PumpWoodRestService-67"><span class="linenos">  67</span></a><span class="sd">    from metabase.serializers import MetabaseDashboardSerializer</span>
</span><span id="PumpWoodRestService-68"><a href="#PumpWoodRestService-68"><span class="linenos">  68</span></a><span class="sd">    from config import storage_object, microservice</span>
</span><span id="PumpWoodRestService-69"><a href="#PumpWoodRestService-69"><span class="linenos">  69</span></a>
</span><span id="PumpWoodRestService-70"><a href="#PumpWoodRestService-70"><span class="linenos">  70</span></a>
</span><span id="PumpWoodRestService-71"><a href="#PumpWoodRestService-71"><span class="linenos">  71</span></a><span class="sd">    class RestMetabaseDashboard(PumpWoodRestService):</span>
</span><span id="PumpWoodRestService-72"><a href="#PumpWoodRestService-72"><span class="linenos">  72</span></a><span class="sd">        endpoint_description = &quot;Metabase Dashboard&quot;</span>
</span><span id="PumpWoodRestService-73"><a href="#PumpWoodRestService-73"><span class="linenos">  73</span></a><span class="sd">        notes = &quot;Register and generate url to embed Metabase dashboards&quot;</span>
</span><span id="PumpWoodRestService-74"><a href="#PumpWoodRestService-74"><span class="linenos">  74</span></a>
</span><span id="PumpWoodRestService-75"><a href="#PumpWoodRestService-75"><span class="linenos">  75</span></a><span class="sd">        # Django model that will be mapped to this end-point</span>
</span><span id="PumpWoodRestService-76"><a href="#PumpWoodRestService-76"><span class="linenos">  76</span></a><span class="sd">        service_model = MetabaseDashboard</span>
</span><span id="PumpWoodRestService-77"><a href="#PumpWoodRestService-77"><span class="linenos">  77</span></a>
</span><span id="PumpWoodRestService-78"><a href="#PumpWoodRestService-78"><span class="linenos">  78</span></a><span class="sd">        # Serializer that will be used to dump model data</span>
</span><span id="PumpWoodRestService-79"><a href="#PumpWoodRestService-79"><span class="linenos">  79</span></a><span class="sd">        serializer = MetabaseDashboardSerializer</span>
</span><span id="PumpWoodRestService-80"><a href="#PumpWoodRestService-80"><span class="linenos">  80</span></a>
</span><span id="PumpWoodRestService-81"><a href="#PumpWoodRestService-81"><span class="linenos">  81</span></a><span class="sd">        # PumpwoodStorage object that will be used to save and retrieve</span>
</span><span id="PumpWoodRestService-82"><a href="#PumpWoodRestService-82"><span class="linenos">  82</span></a><span class="sd">        # file data from storage.</span>
</span><span id="PumpWoodRestService-83"><a href="#PumpWoodRestService-83"><span class="linenos">  83</span></a><span class="sd">        storage_object = storage_object</span>
</span><span id="PumpWoodRestService-84"><a href="#PumpWoodRestService-84"><span class="linenos">  84</span></a>
</span><span id="PumpWoodRestService-85"><a href="#PumpWoodRestService-85"><span class="linenos">  85</span></a><span class="sd">        # PumpWoodMicroService object used to communicate with other</span>
</span><span id="PumpWoodRestService-86"><a href="#PumpWoodRestService-86"><span class="linenos">  86</span></a><span class="sd">        # microservice if necessary. Ex: Trigger ETL Jobs on object</span>
</span><span id="PumpWoodRestService-87"><a href="#PumpWoodRestService-87"><span class="linenos">  87</span></a><span class="sd">        # saving and update.</span>
</span><span id="PumpWoodRestService-88"><a href="#PumpWoodRestService-88"><span class="linenos">  88</span></a><span class="sd">        microservice = microservice</span>
</span><span id="PumpWoodRestService-89"><a href="#PumpWoodRestService-89"><span class="linenos">  89</span></a>
</span><span id="PumpWoodRestService-90"><a href="#PumpWoodRestService-90"><span class="linenos">  90</span></a><span class="sd">        # Fields that will be considered as files and extensions that</span>
</span><span id="PumpWoodRestService-91"><a href="#PumpWoodRestService-91"><span class="linenos">  91</span></a><span class="sd">        # will be accepted.</span>
</span><span id="PumpWoodRestService-92"><a href="#PumpWoodRestService-92"><span class="linenos">  92</span></a><span class="sd">        file_fields = {</span>
</span><span id="PumpWoodRestService-93"><a href="#PumpWoodRestService-93"><span class="linenos">  93</span></a><span class="sd">            &#39;file&#39;: [&#39;json&#39;, &#39;xlsx&#39;]</span>
</span><span id="PumpWoodRestService-94"><a href="#PumpWoodRestService-94"><span class="linenos">  94</span></a><span class="sd">        }</span>
</span><span id="PumpWoodRestService-95"><a href="#PumpWoodRestService-95"><span class="linenos">  95</span></a>
</span><span id="PumpWoodRestService-96"><a href="#PumpWoodRestService-96"><span class="linenos">  96</span></a><span class="sd">        ###########################################################</span>
</span><span id="PumpWoodRestService-97"><a href="#PumpWoodRestService-97"><span class="linenos">  97</span></a><span class="sd">        # Gui this information will be returned at retrieve_options</span>
</span><span id="PumpWoodRestService-98"><a href="#PumpWoodRestService-98"><span class="linenos">  98</span></a><span class="sd">        # to help frontend correctly render app frontend.</span>
</span><span id="PumpWoodRestService-99"><a href="#PumpWoodRestService-99"><span class="linenos">  99</span></a><span class="sd">        # Set field sets, grouping the fields and hiding those that</span>
</span><span id="PumpWoodRestService-100"><a href="#PumpWoodRestService-100"><span class="linenos"> 100</span></a><span class="sd">        # ar not listed on fieldsets</span>
</span><span id="PumpWoodRestService-101"><a href="#PumpWoodRestService-101"><span class="linenos"> 101</span></a><span class="sd">        gui_retrieve_fieldset = [{</span>
</span><span id="PumpWoodRestService-102"><a href="#PumpWoodRestService-102"><span class="linenos"> 102</span></a><span class="sd">                &quot;name&quot;: &quot;main&quot;,</span>
</span><span id="PumpWoodRestService-103"><a href="#PumpWoodRestService-103"><span class="linenos"> 103</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-104"><a href="#PumpWoodRestService-104"><span class="linenos"> 104</span></a><span class="sd">                    &quot;status&quot;, &quot;alias&quot;, &quot;description&quot;, &quot;notes&quot;,</span>
</span><span id="PumpWoodRestService-105"><a href="#PumpWoodRestService-105"><span class="linenos"> 105</span></a><span class="sd">                    &quot;dimensions&quot;, &quot;updated_by&quot;, &quot;updated_at&quot;]</span>
</span><span id="PumpWoodRestService-106"><a href="#PumpWoodRestService-106"><span class="linenos"> 106</span></a><span class="sd">            }, {</span>
</span><span id="PumpWoodRestService-107"><a href="#PumpWoodRestService-107"><span class="linenos"> 107</span></a><span class="sd">                &quot;name&quot;: &quot;embedding&quot;,</span>
</span><span id="PumpWoodRestService-108"><a href="#PumpWoodRestService-108"><span class="linenos"> 108</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-109"><a href="#PumpWoodRestService-109"><span class="linenos"> 109</span></a><span class="sd">                    &quot;metabase_id&quot;, &quot;auto_embedding&quot;, &quot;object_model_class&quot;,</span>
</span><span id="PumpWoodRestService-110"><a href="#PumpWoodRestService-110"><span class="linenos"> 110</span></a><span class="sd">                    &quot;object_pk&quot;]</span>
</span><span id="PumpWoodRestService-111"><a href="#PumpWoodRestService-111"><span class="linenos"> 111</span></a><span class="sd">            }, {</span>
</span><span id="PumpWoodRestService-112"><a href="#PumpWoodRestService-112"><span class="linenos"> 112</span></a><span class="sd">                &quot;name&quot;: &quot;config&quot;,</span>
</span><span id="PumpWoodRestService-113"><a href="#PumpWoodRestService-113"><span class="linenos"> 113</span></a><span class="sd">                &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-114"><a href="#PumpWoodRestService-114"><span class="linenos"> 114</span></a><span class="sd">                    &quot;expire_in_min&quot;, &quot;default_theme&quot;,</span>
</span><span id="PumpWoodRestService-115"><a href="#PumpWoodRestService-115"><span class="linenos"> 115</span></a><span class="sd">                    &quot;default_is_bordered&quot;, &quot;default_is_titled&quot;]</span>
</span><span id="PumpWoodRestService-116"><a href="#PumpWoodRestService-116"><span class="linenos"> 116</span></a><span class="sd">            }, {</span>
</span><span id="PumpWoodRestService-117"><a href="#PumpWoodRestService-117"><span class="linenos"> 117</span></a><span class="sd">                &quot;name&quot;: &quot;extra_info&quot;,</span>
</span><span id="PumpWoodRestService-118"><a href="#PumpWoodRestService-118"><span class="linenos"> 118</span></a><span class="sd">                &quot;fields&quot;: [&quot;extra_info&quot;]</span>
</span><span id="PumpWoodRestService-119"><a href="#PumpWoodRestService-119"><span class="linenos"> 119</span></a><span class="sd">            }</span>
</span><span id="PumpWoodRestService-120"><a href="#PumpWoodRestService-120"><span class="linenos"> 120</span></a><span class="sd">        ]</span>
</span><span id="PumpWoodRestService-121"><a href="#PumpWoodRestService-121"><span class="linenos"> 121</span></a>
</span><span id="PumpWoodRestService-122"><a href="#PumpWoodRestService-122"><span class="linenos"> 122</span></a><span class="sd">        # This fields will be set as readonly if fill_options_validation</span>
</span><span id="PumpWoodRestService-123"><a href="#PumpWoodRestService-123"><span class="linenos"> 123</span></a><span class="sd">        # is called with query parameter `?user_type=gui`</span>
</span><span id="PumpWoodRestService-124"><a href="#PumpWoodRestService-124"><span class="linenos"> 124</span></a><span class="sd">        gui_readonly = [&quot;updated_by_id&quot;, &quot;updated_at&quot;, &quot;extra_info&quot;]</span>
</span><span id="PumpWoodRestService-125"><a href="#PumpWoodRestService-125"><span class="linenos"> 125</span></a>
</span><span id="PumpWoodRestService-126"><a href="#PumpWoodRestService-126"><span class="linenos"> 126</span></a><span class="sd">        # Indication how the object could be presented to user</span>
</span><span id="PumpWoodRestService-127"><a href="#PumpWoodRestService-127"><span class="linenos"> 127</span></a><span class="sd">        gui_verbose_field = &#39;{pk} | {description}&#39;</span>
</span><span id="PumpWoodRestService-128"><a href="#PumpWoodRestService-128"><span class="linenos"> 128</span></a><span class="sd">    ```</span>
</span><span id="PumpWoodRestService-129"><a href="#PumpWoodRestService-129"><span class="linenos"> 129</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-130"><a href="#PumpWoodRestService-130"><span class="linenos"> 130</span></a>
</span><span id="PumpWoodRestService-131"><a href="#PumpWoodRestService-131"><span class="linenos"> 131</span></a>    <span class="n">_view_type</span> <span class="o">=</span> <span class="s2">&quot;simple&quot;</span>
</span><span id="PumpWoodRestService-132"><a href="#PumpWoodRestService-132"><span class="linenos"> 132</span></a>    <span class="n">renderer_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">PumpwoodJSONRenderer</span><span class="p">]</span>
</span><span id="PumpWoodRestService-133"><a href="#PumpWoodRestService-133"><span class="linenos"> 133</span></a>
</span><span id="PumpWoodRestService-134"><a href="#PumpWoodRestService-134"><span class="linenos"> 134</span></a>    <span class="c1">#####################</span>
</span><span id="PumpWoodRestService-135"><a href="#PumpWoodRestService-135"><span class="linenos"> 135</span></a>    <span class="c1"># Route information #</span>
</span><span id="PumpWoodRestService-136"><a href="#PumpWoodRestService-136"><span class="linenos"> 136</span></a>    <span class="n">endpoint_description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-137"><a href="#PumpWoodRestService-137"><span class="linenos"> 137</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Description of the end-point, this information will be avaiable at</span>
</span><span id="PumpWoodRestService-138"><a href="#PumpWoodRestService-138"><span class="linenos"> 138</span></a><span class="sd">       `rest/pumpwood/endpoints/` for frontend. This information will be</span>
</span><span id="PumpWoodRestService-139"><a href="#PumpWoodRestService-139"><span class="linenos"> 139</span></a><span class="sd">       saved at KongRoute, it must be unique for all microservices&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-140"><a href="#PumpWoodRestService-140"><span class="linenos"> 140</span></a>    <span class="n">dimensions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-141"><a href="#PumpWoodRestService-141"><span class="linenos"> 141</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Dimensions associated with end-points. This information will be saved</span>
</span><span id="PumpWoodRestService-142"><a href="#PumpWoodRestService-142"><span class="linenos"> 142</span></a><span class="sd">       at KongRoute dimensions.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-143"><a href="#PumpWoodRestService-143"><span class="linenos"> 143</span></a>    <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-144"><a href="#PumpWoodRestService-144"><span class="linenos"> 144</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Icon associated with model class. This information will be saved</span>
</span><span id="PumpWoodRestService-145"><a href="#PumpWoodRestService-145"><span class="linenos"> 145</span></a><span class="sd">       at KongRoute icon field.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-146"><a href="#PumpWoodRestService-146"><span class="linenos"> 146</span></a>    <span class="c1">#####################</span>
</span><span id="PumpWoodRestService-147"><a href="#PumpWoodRestService-147"><span class="linenos"> 147</span></a>
</span><span id="PumpWoodRestService-148"><a href="#PumpWoodRestService-148"><span class="linenos"> 148</span></a>    <span class="n">service_model</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span>
</span><span id="PumpWoodRestService-149"><a href="#PumpWoodRestService-149"><span class="linenos"> 149</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Django model associated end-points will be made avaiable.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-150"><a href="#PumpWoodRestService-150"><span class="linenos"> 150</span></a>    <span class="n">storage_object</span><span class="p">:</span> <span class="n">PumpWoodStorage</span>
</span><span id="PumpWoodRestService-151"><a href="#PumpWoodRestService-151"><span class="linenos"> 151</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;PumpwoodStorage object that will be used to save and retrieve</span>
</span><span id="PumpWoodRestService-152"><a href="#PumpWoodRestService-152"><span class="linenos"> 152</span></a><span class="sd">       file data from storage.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-153"><a href="#PumpWoodRestService-153"><span class="linenos"> 153</span></a>    <span class="n">microservice</span><span class="p">:</span> <span class="n">PumpWoodMicroService</span>
</span><span id="PumpWoodRestService-154"><a href="#PumpWoodRestService-154"><span class="linenos"> 154</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;PumpWoodMicroService object used to communicate with other</span>
</span><span id="PumpWoodRestService-155"><a href="#PumpWoodRestService-155"><span class="linenos"> 155</span></a><span class="sd">       microservice if necessary. Ex: Trigger ETL Jobs on object</span>
</span><span id="PumpWoodRestService-156"><a href="#PumpWoodRestService-156"><span class="linenos"> 156</span></a><span class="sd">       saving and update.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-157"><a href="#PumpWoodRestService-157"><span class="linenos"> 157</span></a>    <span class="n">trigger</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodRestService-158"><a href="#PumpWoodRestService-158"><span class="linenos"> 158</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;If should be called ELTTrigger at ETL microservice at saving, deleting</span>
</span><span id="PumpWoodRestService-159"><a href="#PumpWoodRestService-159"><span class="linenos"> 159</span></a><span class="sd">       and executing actions. Default value is False.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-160"><a href="#PumpWoodRestService-160"><span class="linenos"> 160</span></a>
</span><span id="PumpWoodRestService-161"><a href="#PumpWoodRestService-161"><span class="linenos"> 161</span></a>    <span class="c1"># List fields</span>
</span><span id="PumpWoodRestService-162"><a href="#PumpWoodRestService-162"><span class="linenos"> 162</span></a>    <span class="n">serializer</span><span class="p">:</span> <span class="n">DynamicFieldsModelSerializer</span>
</span><span id="PumpWoodRestService-163"><a href="#PumpWoodRestService-163"><span class="linenos"> 163</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Serializer that will be used to dump data on end-points.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-164"><a href="#PumpWoodRestService-164"><span class="linenos"> 164</span></a>    <span class="n">file_fields</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-165"><a href="#PumpWoodRestService-165"><span class="linenos"> 165</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;File fields associated with model, it is a dictonary with keys as</span>
</span><span id="PumpWoodRestService-166"><a href="#PumpWoodRestService-166"><span class="linenos"> 166</span></a><span class="sd">       field keys and values as a list of accepted extensions.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-167"><a href="#PumpWoodRestService-167"><span class="linenos"> 167</span></a>
</span><span id="PumpWoodRestService-168"><a href="#PumpWoodRestService-168"><span class="linenos"> 168</span></a>    <span class="c1"># Front-end uses 50 as limit to check if all data have been fetched,</span>
</span><span id="PumpWoodRestService-169"><a href="#PumpWoodRestService-169"><span class="linenos"> 169</span></a>    <span class="c1"># if change this parameter, be sure to update front-end list component.</span>
</span><span id="PumpWoodRestService-170"><a href="#PumpWoodRestService-170"><span class="linenos"> 170</span></a>    <span class="n">list_paginate_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span>
</span><span id="PumpWoodRestService-171"><a href="#PumpWoodRestService-171"><span class="linenos"> 171</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;List end-point pagination default limit.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-172"><a href="#PumpWoodRestService-172"><span class="linenos"> 172</span></a>
</span><span id="PumpWoodRestService-173"><a href="#PumpWoodRestService-173"><span class="linenos"> 173</span></a>    <span class="c1">#######</span>
</span><span id="PumpWoodRestService-174"><a href="#PumpWoodRestService-174"><span class="linenos"> 174</span></a>    <span class="c1"># Gui #</span>
</span><span id="PumpWoodRestService-175"><a href="#PumpWoodRestService-175"><span class="linenos"> 175</span></a>    <span class="n">gui_retrieve_fieldset</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-176"><a href="#PumpWoodRestService-176"><span class="linenos"> 176</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve field set to be passed to gui from `retrieve_view_options`.</span>
</span><span id="PumpWoodRestService-177"><a href="#PumpWoodRestService-177"><span class="linenos"> 177</span></a><span class="sd">       It is a list of dictonary with keys name for name of the viewset and</span>
</span><span id="PumpWoodRestService-178"><a href="#PumpWoodRestService-178"><span class="linenos"> 178</span></a><span class="sd">       fields for the fields that are associated.</span>
</span><span id="PumpWoodRestService-179"><a href="#PumpWoodRestService-179"><span class="linenos"> 179</span></a>
</span><span id="PumpWoodRestService-180"><a href="#PumpWoodRestService-180"><span class="linenos"> 180</span></a><span class="sd">       Example:</span>
</span><span id="PumpWoodRestService-181"><a href="#PumpWoodRestService-181"><span class="linenos"> 181</span></a><span class="sd">       ```python</span>
</span><span id="PumpWoodRestService-182"><a href="#PumpWoodRestService-182"><span class="linenos"> 182</span></a><span class="sd">       gui_retrieve_fieldset = [{</span>
</span><span id="PumpWoodRestService-183"><a href="#PumpWoodRestService-183"><span class="linenos"> 183</span></a><span class="sd">               &quot;name&quot;: &quot;main&quot;,</span>
</span><span id="PumpWoodRestService-184"><a href="#PumpWoodRestService-184"><span class="linenos"> 184</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-185"><a href="#PumpWoodRestService-185"><span class="linenos"> 185</span></a><span class="sd">                   &quot;status&quot;, &quot;alias&quot;, &quot;description&quot;, &quot;notes&quot;,</span>
</span><span id="PumpWoodRestService-186"><a href="#PumpWoodRestService-186"><span class="linenos"> 186</span></a><span class="sd">                   &quot;dimensions&quot;, &quot;updated_by&quot;, &quot;updated_at&quot;]</span>
</span><span id="PumpWoodRestService-187"><a href="#PumpWoodRestService-187"><span class="linenos"> 187</span></a><span class="sd">           }, {</span>
</span><span id="PumpWoodRestService-188"><a href="#PumpWoodRestService-188"><span class="linenos"> 188</span></a><span class="sd">               &quot;name&quot;: &quot;embedding&quot;,</span>
</span><span id="PumpWoodRestService-189"><a href="#PumpWoodRestService-189"><span class="linenos"> 189</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-190"><a href="#PumpWoodRestService-190"><span class="linenos"> 190</span></a><span class="sd">                   &quot;metabase_id&quot;, &quot;auto_embedding&quot;, &quot;object_model_class&quot;,</span>
</span><span id="PumpWoodRestService-191"><a href="#PumpWoodRestService-191"><span class="linenos"> 191</span></a><span class="sd">                   &quot;object_pk&quot;]</span>
</span><span id="PumpWoodRestService-192"><a href="#PumpWoodRestService-192"><span class="linenos"> 192</span></a><span class="sd">           }, {</span>
</span><span id="PumpWoodRestService-193"><a href="#PumpWoodRestService-193"><span class="linenos"> 193</span></a><span class="sd">               &quot;name&quot;: &quot;config&quot;,</span>
</span><span id="PumpWoodRestService-194"><a href="#PumpWoodRestService-194"><span class="linenos"> 194</span></a><span class="sd">               &quot;fields&quot;: [</span>
</span><span id="PumpWoodRestService-195"><a href="#PumpWoodRestService-195"><span class="linenos"> 195</span></a><span class="sd">                   &quot;expire_in_min&quot;, &quot;default_theme&quot;,</span>
</span><span id="PumpWoodRestService-196"><a href="#PumpWoodRestService-196"><span class="linenos"> 196</span></a><span class="sd">                   &quot;default_is_bordered&quot;, &quot;default_is_titled&quot;]</span>
</span><span id="PumpWoodRestService-197"><a href="#PumpWoodRestService-197"><span class="linenos"> 197</span></a><span class="sd">           }, {</span>
</span><span id="PumpWoodRestService-198"><a href="#PumpWoodRestService-198"><span class="linenos"> 198</span></a><span class="sd">               &quot;name&quot;: &quot;extra_info&quot;,</span>
</span><span id="PumpWoodRestService-199"><a href="#PumpWoodRestService-199"><span class="linenos"> 199</span></a><span class="sd">               &quot;fields&quot;: [&quot;extra_info&quot;]</span>
</span><span id="PumpWoodRestService-200"><a href="#PumpWoodRestService-200"><span class="linenos"> 200</span></a><span class="sd">           }</span>
</span><span id="PumpWoodRestService-201"><a href="#PumpWoodRestService-201"><span class="linenos"> 201</span></a><span class="sd">       ]</span>
</span><span id="PumpWoodRestService-202"><a href="#PumpWoodRestService-202"><span class="linenos"> 202</span></a><span class="sd">       ```</span>
</span><span id="PumpWoodRestService-203"><a href="#PumpWoodRestService-203"><span class="linenos"> 203</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-204"><a href="#PumpWoodRestService-204"><span class="linenos"> 204</span></a>    <span class="n">gui_verbose_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;pk&#39;</span>
</span><span id="PumpWoodRestService-205"><a href="#PumpWoodRestService-205"><span class="linenos"> 205</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Suggest verbose for object using information from object. It is set</span>
</span><span id="PumpWoodRestService-206"><a href="#PumpWoodRestService-206"><span class="linenos"> 206</span></a><span class="sd">       as python string format, default `pk`. Ex: `{pk} | {description}` will</span>
</span><span id="PumpWoodRestService-207"><a href="#PumpWoodRestService-207"><span class="linenos"> 207</span></a><span class="sd">       use information from `pk` and `description` keys.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-208"><a href="#PumpWoodRestService-208"><span class="linenos"> 208</span></a>    <span class="n">gui_readonly</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService-209"><a href="#PumpWoodRestService-209"><span class="linenos"> 209</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set readonly fields when calling with `user_type=gui` for</span>
</span><span id="PumpWoodRestService-210"><a href="#PumpWoodRestService-210"><span class="linenos"> 210</span></a><span class="sd">       `fill_options_validation` end-point.&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-211"><a href="#PumpWoodRestService-211"><span class="linenos"> 211</span></a>    <span class="c1">#######</span>
</span><span id="PumpWoodRestService-212"><a href="#PumpWoodRestService-212"><span class="linenos"> 212</span></a>
</span><span id="PumpWoodRestService-213"><a href="#PumpWoodRestService-213"><span class="linenos"> 213</span></a>    <span class="c1">###############################</span>
</span><span id="PumpWoodRestService-214"><a href="#PumpWoodRestService-214"><span class="linenos"> 214</span></a>    <span class="c1"># Gui attribute get functions #</span>
</span><span id="PumpWoodRestService-215"><a href="#PumpWoodRestService-215"><span class="linenos"> 215</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService-216"><a href="#PumpWoodRestService-216"><span class="linenos"> 216</span></a>    <span class="k">def</span> <span class="nf">get_gui_retrieve_fieldset</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService-217"><a href="#PumpWoodRestService-217"><span class="linenos"> 217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-218"><a href="#PumpWoodRestService-218"><span class="linenos"> 218</span></a><span class="sd">        Return gui_retrieve_fieldset attribute.</span>
</span><span id="PumpWoodRestService-219"><a href="#PumpWoodRestService-219"><span class="linenos"> 219</span></a>
</span><span id="PumpWoodRestService-220"><a href="#PumpWoodRestService-220"><span class="linenos"> 220</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService-221"><a href="#PumpWoodRestService-221"><span class="linenos"> 221</span></a><span class="sd">        to get `gui_retrieve_fieldset` attribute.</span>
</span><span id="PumpWoodRestService-222"><a href="#PumpWoodRestService-222"><span class="linenos"> 222</span></a>
</span><span id="PumpWoodRestService-223"><a href="#PumpWoodRestService-223"><span class="linenos"> 223</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-224"><a href="#PumpWoodRestService-224"><span class="linenos"> 224</span></a><span class="sd">            Return `gui_retrieve_fieldset` attribute.</span>
</span><span id="PumpWoodRestService-225"><a href="#PumpWoodRestService-225"><span class="linenos"> 225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-226"><a href="#PumpWoodRestService-226"><span class="linenos"> 226</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_retrieve_fieldset</span>
</span><span id="PumpWoodRestService-227"><a href="#PumpWoodRestService-227"><span class="linenos"> 227</span></a>
</span><span id="PumpWoodRestService-228"><a href="#PumpWoodRestService-228"><span class="linenos"> 228</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService-229"><a href="#PumpWoodRestService-229"><span class="linenos"> 229</span></a>    <span class="k">def</span> <span class="nf">get_gui_verbose_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="PumpWoodRestService-230"><a href="#PumpWoodRestService-230"><span class="linenos"> 230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-231"><a href="#PumpWoodRestService-231"><span class="linenos"> 231</span></a><span class="sd">        Return gui_verbose_field attribute.</span>
</span><span id="PumpWoodRestService-232"><a href="#PumpWoodRestService-232"><span class="linenos"> 232</span></a>
</span><span id="PumpWoodRestService-233"><a href="#PumpWoodRestService-233"><span class="linenos"> 233</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService-234"><a href="#PumpWoodRestService-234"><span class="linenos"> 234</span></a><span class="sd">        to get `gui_verbose_field` attribute.</span>
</span><span id="PumpWoodRestService-235"><a href="#PumpWoodRestService-235"><span class="linenos"> 235</span></a>
</span><span id="PumpWoodRestService-236"><a href="#PumpWoodRestService-236"><span class="linenos"> 236</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-237"><a href="#PumpWoodRestService-237"><span class="linenos"> 237</span></a><span class="sd">            Return `gui_verbose_field` attribute.</span>
</span><span id="PumpWoodRestService-238"><a href="#PumpWoodRestService-238"><span class="linenos"> 238</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-239"><a href="#PumpWoodRestService-239"><span class="linenos"> 239</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_verbose_field</span>
</span><span id="PumpWoodRestService-240"><a href="#PumpWoodRestService-240"><span class="linenos"> 240</span></a>
</span><span id="PumpWoodRestService-241"><a href="#PumpWoodRestService-241"><span class="linenos"> 241</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService-242"><a href="#PumpWoodRestService-242"><span class="linenos"> 242</span></a>    <span class="k">def</span> <span class="nf">get_gui_readonly</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="PumpWoodRestService-243"><a href="#PumpWoodRestService-243"><span class="linenos"> 243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-244"><a href="#PumpWoodRestService-244"><span class="linenos"> 244</span></a><span class="sd">        Return gui_readonly attribute.</span>
</span><span id="PumpWoodRestService-245"><a href="#PumpWoodRestService-245"><span class="linenos"> 245</span></a>
</span><span id="PumpWoodRestService-246"><a href="#PumpWoodRestService-246"><span class="linenos"> 246</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService-247"><a href="#PumpWoodRestService-247"><span class="linenos"> 247</span></a><span class="sd">        to get `gui_readonly` attribute.</span>
</span><span id="PumpWoodRestService-248"><a href="#PumpWoodRestService-248"><span class="linenos"> 248</span></a>
</span><span id="PumpWoodRestService-249"><a href="#PumpWoodRestService-249"><span class="linenos"> 249</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-250"><a href="#PumpWoodRestService-250"><span class="linenos"> 250</span></a><span class="sd">            Return `gui_readonly` attribute.</span>
</span><span id="PumpWoodRestService-251"><a href="#PumpWoodRestService-251"><span class="linenos"> 251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-252"><a href="#PumpWoodRestService-252"><span class="linenos"> 252</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_readonly</span>
</span><span id="PumpWoodRestService-253"><a href="#PumpWoodRestService-253"><span class="linenos"> 253</span></a>
</span><span id="PumpWoodRestService-254"><a href="#PumpWoodRestService-254"><span class="linenos"> 254</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService-255"><a href="#PumpWoodRestService-255"><span class="linenos"> 255</span></a>    <span class="k">def</span> <span class="nf">get_list_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="PumpWoodRestService-256"><a href="#PumpWoodRestService-256"><span class="linenos"> 256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-257"><a href="#PumpWoodRestService-257"><span class="linenos"> 257</span></a><span class="sd">        Return list_fields from associated serializer.</span>
</span><span id="PumpWoodRestService-258"><a href="#PumpWoodRestService-258"><span class="linenos"> 258</span></a>
</span><span id="PumpWoodRestService-259"><a href="#PumpWoodRestService-259"><span class="linenos"> 259</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService-260"><a href="#PumpWoodRestService-260"><span class="linenos"> 260</span></a><span class="sd">        to get `cls.serializer().get_list_fields()` data.</span>
</span><span id="PumpWoodRestService-261"><a href="#PumpWoodRestService-261"><span class="linenos"> 261</span></a>
</span><span id="PumpWoodRestService-262"><a href="#PumpWoodRestService-262"><span class="linenos"> 262</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-263"><a href="#PumpWoodRestService-263"><span class="linenos"> 263</span></a><span class="sd">            Return list_fields for model.</span>
</span><span id="PumpWoodRestService-264"><a href="#PumpWoodRestService-264"><span class="linenos"> 264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-265"><a href="#PumpWoodRestService-265"><span class="linenos"> 265</span></a>        <span class="n">serializer_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">()</span>
</span><span id="PumpWoodRestService-266"><a href="#PumpWoodRestService-266"><span class="linenos"> 266</span></a>        <span class="k">return</span> <span class="n">serializer_obj</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span><span id="PumpWoodRestService-267"><a href="#PumpWoodRestService-267"><span class="linenos"> 267</span></a>    <span class="c1">########################</span>
</span><span id="PumpWoodRestService-268"><a href="#PumpWoodRestService-268"><span class="linenos"> 268</span></a>
</span><span id="PumpWoodRestService-269"><a href="#PumpWoodRestService-269"><span class="linenos"> 269</span></a>    <span class="nd">@staticmethod</span>
</span><span id="PumpWoodRestService-270"><a href="#PumpWoodRestService-270"><span class="linenos"> 270</span></a>    <span class="k">def</span> <span class="nf">_allowed_extension</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">allowed_extensions</span><span class="p">):</span>
</span><span id="PumpWoodRestService-271"><a href="#PumpWoodRestService-271"><span class="linenos"> 271</span></a>        <span class="n">extension</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
</span><span id="PumpWoodRestService-272"><a href="#PumpWoodRestService-272"><span class="linenos"> 272</span></a>        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="PumpWoodRestService-273"><a href="#PumpWoodRestService-273"><span class="linenos"> 273</span></a>            <span class="n">extension</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="PumpWoodRestService-274"><a href="#PumpWoodRestService-274"><span class="linenos"> 274</span></a>
</span><span id="PumpWoodRestService-275"><a href="#PumpWoodRestService-275"><span class="linenos"> 275</span></a>        <span class="k">if</span> <span class="s2">&quot;*&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_extensions</span><span class="p">:</span>
</span><span id="PumpWoodRestService-276"><a href="#PumpWoodRestService-276"><span class="linenos"> 276</span></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_extensions</span><span class="p">:</span>
</span><span id="PumpWoodRestService-277"><a href="#PumpWoodRestService-277"><span class="linenos"> 277</span></a>                <span class="k">return</span> <span class="p">[(</span>
</span><span id="PumpWoodRestService-278"><a href="#PumpWoodRestService-278"><span class="linenos"> 278</span></a>                    <span class="s2">&quot;File </span><span class="si">{filename}</span><span class="s2"> with extension </span><span class="si">{extension}</span><span class="s2"> not &quot;</span> <span class="o">+</span>
</span><span id="PumpWoodRestService-279"><a href="#PumpWoodRestService-279"><span class="linenos"> 279</span></a>                    <span class="s2">&quot;allowed.</span><span class="se">\n</span><span class="s2"> Allowed extensions: </span><span class="si">{allowed_extensions}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService-280"><a href="#PumpWoodRestService-280"><span class="linenos"> 280</span></a>                <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="n">extension</span><span class="p">,</span>
</span><span id="PumpWoodRestService-281"><a href="#PumpWoodRestService-281"><span class="linenos"> 281</span></a>                         <span class="n">allowed_extensions</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">allowed_extensions</span><span class="p">))]</span>
</span><span id="PumpWoodRestService-282"><a href="#PumpWoodRestService-282"><span class="linenos"> 282</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService-283"><a href="#PumpWoodRestService-283"><span class="linenos"> 283</span></a>
</span><span id="PumpWoodRestService-284"><a href="#PumpWoodRestService-284"><span class="linenos"> 284</span></a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService-285"><a href="#PumpWoodRestService-285"><span class="linenos"> 285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-286"><a href="#PumpWoodRestService-286"><span class="linenos"> 286</span></a><span class="sd">        View function to list objects with pagination.</span>
</span><span id="PumpWoodRestService-287"><a href="#PumpWoodRestService-287"><span class="linenos"> 287</span></a>
</span><span id="PumpWoodRestService-288"><a href="#PumpWoodRestService-288"><span class="linenos"> 288</span></a><span class="sd">        Number of objects are limited by. To get next page, use</span>
</span><span id="PumpWoodRestService-289"><a href="#PumpWoodRestService-289"><span class="linenos"> 289</span></a><span class="sd">        exclude_dict[&#39;pk__in&#39;: [list of the received pks]] to get more</span>
</span><span id="PumpWoodRestService-290"><a href="#PumpWoodRestService-290"><span class="linenos"> 290</span></a><span class="sd">        objects.</span>
</span><span id="PumpWoodRestService-291"><a href="#PumpWoodRestService-291"><span class="linenos"> 291</span></a>
</span><span id="PumpWoodRestService-292"><a href="#PumpWoodRestService-292"><span class="linenos"> 292</span></a><span class="sd">        ..: notes:</span>
</span><span id="PumpWoodRestService-293"><a href="#PumpWoodRestService-293"><span class="linenos"> 293</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="PumpWoodRestService-294"><a href="#PumpWoodRestService-294"><span class="linenos"> 294</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="PumpWoodRestService-295"><a href="#PumpWoodRestService-295"><span class="linenos"> 295</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="PumpWoodRestService-296"><a href="#PumpWoodRestService-296"><span class="linenos"> 296</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="PumpWoodRestService-297"><a href="#PumpWoodRestService-297"><span class="linenos"> 297</span></a>
</span><span id="PumpWoodRestService-298"><a href="#PumpWoodRestService-298"><span class="linenos"> 298</span></a><span class="sd">        Use to limit the query .query.filter_by_dict function. Request</span>
</span><span id="PumpWoodRestService-299"><a href="#PumpWoodRestService-299"><span class="linenos"> 299</span></a><span class="sd">        expected parameters and query parameters are listed bellow:</span>
</span><span id="PumpWoodRestService-300"><a href="#PumpWoodRestService-300"><span class="linenos"> 300</span></a>
</span><span id="PumpWoodRestService-301"><a href="#PumpWoodRestService-301"><span class="linenos"> 301</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-302"><a href="#PumpWoodRestService-302"><span class="linenos"> 302</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-303"><a href="#PumpWoodRestService-303"><span class="linenos"> 303</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-304"><a href="#PumpWoodRestService-304"><span class="linenos"> 304</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-305"><a href="#PumpWoodRestService-305"><span class="linenos"> 305</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService-306"><a href="#PumpWoodRestService-306"><span class="linenos"> 306</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-307"><a href="#PumpWoodRestService-307"><span class="linenos"> 307</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="PumpWoodRestService-308"><a href="#PumpWoodRestService-308"><span class="linenos"> 308</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-309"><a href="#PumpWoodRestService-309"><span class="linenos"> 309</span></a><span class="sd">        - **limit [int] = None:**</span>
</span><span id="PumpWoodRestService-310"><a href="#PumpWoodRestService-310"><span class="linenos"> 310</span></a><span class="sd">            Limit of the query result, if not set attribute</span>
</span><span id="PumpWoodRestService-311"><a href="#PumpWoodRestService-311"><span class="linenos"> 311</span></a><span class="sd">            `list_paginate_limit` will be used insted.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-312"><a href="#PumpWoodRestService-312"><span class="linenos"> 312</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="PumpWoodRestService-313"><a href="#PumpWoodRestService-313"><span class="linenos"> 313</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-314"><a href="#PumpWoodRestService-314"><span class="linenos"> 314</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService-315"><a href="#PumpWoodRestService-315"><span class="linenos"> 315</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="PumpWoodRestService-316"><a href="#PumpWoodRestService-316"><span class="linenos"> 316</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-317"><a href="#PumpWoodRestService-317"><span class="linenos"> 317</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService-318"><a href="#PumpWoodRestService-318"><span class="linenos"> 318</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-319"><a href="#PumpWoodRestService-319"><span class="linenos"> 319</span></a>
</span><span id="PumpWoodRestService-320"><a href="#PumpWoodRestService-320"><span class="linenos"> 320</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-321"><a href="#PumpWoodRestService-321"><span class="linenos"> 321</span></a><span class="sd">        No query data.</span>
</span><span id="PumpWoodRestService-322"><a href="#PumpWoodRestService-322"><span class="linenos"> 322</span></a>
</span><span id="PumpWoodRestService-323"><a href="#PumpWoodRestService-323"><span class="linenos"> 323</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-324"><a href="#PumpWoodRestService-324"><span class="linenos"> 324</span></a><span class="sd">            request: Django request object.</span>
</span><span id="PumpWoodRestService-325"><a href="#PumpWoodRestService-325"><span class="linenos"> 325</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-326"><a href="#PumpWoodRestService-326"><span class="linenos"> 326</span></a><span class="sd">            Return the result of the query limited to</span>
</span><span id="PumpWoodRestService-327"><a href="#PumpWoodRestService-327"><span class="linenos"> 327</span></a><span class="sd">            `list_paginate_limit` attribute. Objects are serialized</span>
</span><span id="PumpWoodRestService-328"><a href="#PumpWoodRestService-328"><span class="linenos"> 328</span></a><span class="sd">            using `serializer` attribute.</span>
</span><span id="PumpWoodRestService-329"><a href="#PumpWoodRestService-329"><span class="linenos"> 329</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-330"><a href="#PumpWoodRestService-330"><span class="linenos"> 330</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodRestService-331"><a href="#PumpWoodRestService-331"><span class="linenos"> 331</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="PumpWoodRestService-332"><a href="#PumpWoodRestService-332"><span class="linenos"> 332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-333"><a href="#PumpWoodRestService-333"><span class="linenos"> 333</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService-334"><a href="#PumpWoodRestService-334"><span class="linenos"> 334</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-335"><a href="#PumpWoodRestService-335"><span class="linenos"> 335</span></a>            <span class="n">limit</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-336"><a href="#PumpWoodRestService-336"><span class="linenos"> 336</span></a>            <span class="n">list_paginate_limit</span> <span class="o">=</span> <span class="n">limit</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_paginate_limit</span>
</span><span id="PumpWoodRestService-337"><a href="#PumpWoodRestService-337"><span class="linenos"> 337</span></a>
</span><span id="PumpWoodRestService-338"><a href="#PumpWoodRestService-338"><span class="linenos"> 338</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="PumpWoodRestService-339"><a href="#PumpWoodRestService-339"><span class="linenos"> 339</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-340"><a href="#PumpWoodRestService-340"><span class="linenos"> 340</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-341"><a href="#PumpWoodRestService-341"><span class="linenos"> 341</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-342"><a href="#PumpWoodRestService-342"><span class="linenos"> 342</span></a>
</span><span id="PumpWoodRestService-343"><a href="#PumpWoodRestService-343"><span class="linenos"> 343</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-344"><a href="#PumpWoodRestService-344"><span class="linenos"> 344</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="PumpWoodRestService-345"><a href="#PumpWoodRestService-345"><span class="linenos"> 345</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodRestService-346"><a href="#PumpWoodRestService-346"><span class="linenos"> 346</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodRestService-347"><a href="#PumpWoodRestService-347"><span class="linenos"> 347</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="PumpWoodRestService-348"><a href="#PumpWoodRestService-348"><span class="linenos"> 348</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodRestService-349"><a href="#PumpWoodRestService-349"><span class="linenos"> 349</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="PumpWoodRestService-350"><a href="#PumpWoodRestService-350"><span class="linenos"> 350</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="PumpWoodRestService-351"><a href="#PumpWoodRestService-351"><span class="linenos"> 351</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="PumpWoodRestService-352"><a href="#PumpWoodRestService-352"><span class="linenos"> 352</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-353"><a href="#PumpWoodRestService-353"><span class="linenos"> 353</span></a>                        <span class="k">break</span>
</span><span id="PumpWoodRestService-354"><a href="#PumpWoodRestService-354"><span class="linenos"> 354</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService-355"><a href="#PumpWoodRestService-355"><span class="linenos"> 355</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-356"><a href="#PumpWoodRestService-356"><span class="linenos"> 356</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-357"><a href="#PumpWoodRestService-357"><span class="linenos"> 357</span></a>
</span><span id="PumpWoodRestService-358"><a href="#PumpWoodRestService-358"><span class="linenos"> 358</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService-359"><a href="#PumpWoodRestService-359"><span class="linenos"> 359</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-360"><a href="#PumpWoodRestService-360"><span class="linenos"> 360</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)[:</span><span class="n">list_paginate_limit</span><span class="p">]</span>
</span><span id="PumpWoodRestService-361"><a href="#PumpWoodRestService-361"><span class="linenos"> 361</span></a>
</span><span id="PumpWoodRestService-362"><a href="#PumpWoodRestService-362"><span class="linenos"> 362</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-363"><a href="#PumpWoodRestService-363"><span class="linenos"> 363</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-364"><a href="#PumpWoodRestService-364"><span class="linenos"> 364</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-365"><a href="#PumpWoodRestService-365"><span class="linenos"> 365</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-366"><a href="#PumpWoodRestService-366"><span class="linenos"> 366</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService-367"><a href="#PumpWoodRestService-367"><span class="linenos"> 367</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodRestService-368"><a href="#PumpWoodRestService-368"><span class="linenos"> 368</span></a>
</span><span id="PumpWoodRestService-369"><a href="#PumpWoodRestService-369"><span class="linenos"> 369</span></a>    <span class="k">def</span> <span class="nf">list_without_pag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService-370"><a href="#PumpWoodRestService-370"><span class="linenos"> 370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-371"><a href="#PumpWoodRestService-371"><span class="linenos"> 371</span></a><span class="sd">        View function to list objects **without** pagination.</span>
</span><span id="PumpWoodRestService-372"><a href="#PumpWoodRestService-372"><span class="linenos"> 372</span></a>
</span><span id="PumpWoodRestService-373"><a href="#PumpWoodRestService-373"><span class="linenos"> 373</span></a><span class="sd">        ..: notes:</span>
</span><span id="PumpWoodRestService-374"><a href="#PumpWoodRestService-374"><span class="linenos"> 374</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="PumpWoodRestService-375"><a href="#PumpWoodRestService-375"><span class="linenos"> 375</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="PumpWoodRestService-376"><a href="#PumpWoodRestService-376"><span class="linenos"> 376</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="PumpWoodRestService-377"><a href="#PumpWoodRestService-377"><span class="linenos"> 377</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="PumpWoodRestService-378"><a href="#PumpWoodRestService-378"><span class="linenos"> 378</span></a>
</span><span id="PumpWoodRestService-379"><a href="#PumpWoodRestService-379"><span class="linenos"> 379</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService-380"><a href="#PumpWoodRestService-380"><span class="linenos"> 380</span></a><span class="sd">            Be careful with the number of the objects that will be fetched!</span>
</span><span id="PumpWoodRestService-381"><a href="#PumpWoodRestService-381"><span class="linenos"> 381</span></a><span class="sd">            This end-point does not paginate data returning all information</span>
</span><span id="PumpWoodRestService-382"><a href="#PumpWoodRestService-382"><span class="linenos"> 382</span></a><span class="sd">            of query result.</span>
</span><span id="PumpWoodRestService-383"><a href="#PumpWoodRestService-383"><span class="linenos"> 383</span></a>
</span><span id="PumpWoodRestService-384"><a href="#PumpWoodRestService-384"><span class="linenos"> 384</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-385"><a href="#PumpWoodRestService-385"><span class="linenos"> 385</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-386"><a href="#PumpWoodRestService-386"><span class="linenos"> 386</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-387"><a href="#PumpWoodRestService-387"><span class="linenos"> 387</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-388"><a href="#PumpWoodRestService-388"><span class="linenos"> 388</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService-389"><a href="#PumpWoodRestService-389"><span class="linenos"> 389</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-390"><a href="#PumpWoodRestService-390"><span class="linenos"> 390</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="PumpWoodRestService-391"><a href="#PumpWoodRestService-391"><span class="linenos"> 391</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-392"><a href="#PumpWoodRestService-392"><span class="linenos"> 392</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="PumpWoodRestService-393"><a href="#PumpWoodRestService-393"><span class="linenos"> 393</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-394"><a href="#PumpWoodRestService-394"><span class="linenos"> 394</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService-395"><a href="#PumpWoodRestService-395"><span class="linenos"> 395</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="PumpWoodRestService-396"><a href="#PumpWoodRestService-396"><span class="linenos"> 396</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-397"><a href="#PumpWoodRestService-397"><span class="linenos"> 397</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService-398"><a href="#PumpWoodRestService-398"><span class="linenos"> 398</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-399"><a href="#PumpWoodRestService-399"><span class="linenos"> 399</span></a>
</span><span id="PumpWoodRestService-400"><a href="#PumpWoodRestService-400"><span class="linenos"> 400</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-401"><a href="#PumpWoodRestService-401"><span class="linenos"> 401</span></a><span class="sd">        No query data.</span>
</span><span id="PumpWoodRestService-402"><a href="#PumpWoodRestService-402"><span class="linenos"> 402</span></a>
</span><span id="PumpWoodRestService-403"><a href="#PumpWoodRestService-403"><span class="linenos"> 403</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-404"><a href="#PumpWoodRestService-404"><span class="linenos"> 404</span></a><span class="sd">            request: Django request object.</span>
</span><span id="PumpWoodRestService-405"><a href="#PumpWoodRestService-405"><span class="linenos"> 405</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-406"><a href="#PumpWoodRestService-406"><span class="linenos"> 406</span></a><span class="sd">            Return the result of the query **without** pagination . Objects</span>
</span><span id="PumpWoodRestService-407"><a href="#PumpWoodRestService-407"><span class="linenos"> 407</span></a><span class="sd">            are serialized using `serializer` attribute.</span>
</span><span id="PumpWoodRestService-408"><a href="#PumpWoodRestService-408"><span class="linenos"> 408</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-409"><a href="#PumpWoodRestService-409"><span class="linenos"> 409</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodRestService-410"><a href="#PumpWoodRestService-410"><span class="linenos"> 410</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="PumpWoodRestService-411"><a href="#PumpWoodRestService-411"><span class="linenos"> 411</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-412"><a href="#PumpWoodRestService-412"><span class="linenos"> 412</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService-413"><a href="#PumpWoodRestService-413"><span class="linenos"> 413</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-414"><a href="#PumpWoodRestService-414"><span class="linenos"> 414</span></a>
</span><span id="PumpWoodRestService-415"><a href="#PumpWoodRestService-415"><span class="linenos"> 415</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="PumpWoodRestService-416"><a href="#PumpWoodRestService-416"><span class="linenos"> 416</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-417"><a href="#PumpWoodRestService-417"><span class="linenos"> 417</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-418"><a href="#PumpWoodRestService-418"><span class="linenos"> 418</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-419"><a href="#PumpWoodRestService-419"><span class="linenos"> 419</span></a>
</span><span id="PumpWoodRestService-420"><a href="#PumpWoodRestService-420"><span class="linenos"> 420</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-421"><a href="#PumpWoodRestService-421"><span class="linenos"> 421</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="PumpWoodRestService-422"><a href="#PumpWoodRestService-422"><span class="linenos"> 422</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodRestService-423"><a href="#PumpWoodRestService-423"><span class="linenos"> 423</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodRestService-424"><a href="#PumpWoodRestService-424"><span class="linenos"> 424</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="PumpWoodRestService-425"><a href="#PumpWoodRestService-425"><span class="linenos"> 425</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodRestService-426"><a href="#PumpWoodRestService-426"><span class="linenos"> 426</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="PumpWoodRestService-427"><a href="#PumpWoodRestService-427"><span class="linenos"> 427</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="PumpWoodRestService-428"><a href="#PumpWoodRestService-428"><span class="linenos"> 428</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="PumpWoodRestService-429"><a href="#PumpWoodRestService-429"><span class="linenos"> 429</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-430"><a href="#PumpWoodRestService-430"><span class="linenos"> 430</span></a>                        <span class="k">break</span>
</span><span id="PumpWoodRestService-431"><a href="#PumpWoodRestService-431"><span class="linenos"> 431</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService-432"><a href="#PumpWoodRestService-432"><span class="linenos"> 432</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-433"><a href="#PumpWoodRestService-433"><span class="linenos"> 433</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-434"><a href="#PumpWoodRestService-434"><span class="linenos"> 434</span></a>
</span><span id="PumpWoodRestService-435"><a href="#PumpWoodRestService-435"><span class="linenos"> 435</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService-436"><a href="#PumpWoodRestService-436"><span class="linenos"> 436</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-437"><a href="#PumpWoodRestService-437"><span class="linenos"> 437</span></a>
</span><span id="PumpWoodRestService-438"><a href="#PumpWoodRestService-438"><span class="linenos"> 438</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService-439"><a href="#PumpWoodRestService-439"><span class="linenos"> 439</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-440"><a href="#PumpWoodRestService-440"><span class="linenos"> 440</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-441"><a href="#PumpWoodRestService-441"><span class="linenos"> 441</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-442"><a href="#PumpWoodRestService-442"><span class="linenos"> 442</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-443"><a href="#PumpWoodRestService-443"><span class="linenos"> 443</span></a>
</span><span id="PumpWoodRestService-444"><a href="#PumpWoodRestService-444"><span class="linenos"> 444</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService-445"><a href="#PumpWoodRestService-445"><span class="linenos"> 445</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-446"><a href="#PumpWoodRestService-446"><span class="linenos"> 446</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodRestService-447"><a href="#PumpWoodRestService-447"><span class="linenos"> 447</span></a>
</span><span id="PumpWoodRestService-448"><a href="#PumpWoodRestService-448"><span class="linenos"> 448</span></a>    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-449"><a href="#PumpWoodRestService-449"><span class="linenos"> 449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-450"><a href="#PumpWoodRestService-450"><span class="linenos"> 450</span></a><span class="sd">        Retrieve view, uses the retrieve_serializer to return object with pk.</span>
</span><span id="PumpWoodRestService-451"><a href="#PumpWoodRestService-451"><span class="linenos"> 451</span></a>
</span><span id="PumpWoodRestService-452"><a href="#PumpWoodRestService-452"><span class="linenos"> 452</span></a><span class="sd">        Query parameters are loaded as json data, ex:</span>
</span><span id="PumpWoodRestService-453"><a href="#PumpWoodRestService-453"><span class="linenos"> 453</span></a><span class="sd">        `json.loads(request.query_params.get(&#39;fields&#39;, &#39;null&#39;))`</span>
</span><span id="PumpWoodRestService-454"><a href="#PumpWoodRestService-454"><span class="linenos"> 454</span></a>
</span><span id="PumpWoodRestService-455"><a href="#PumpWoodRestService-455"><span class="linenos"> 455</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-456"><a href="#PumpWoodRestService-456"><span class="linenos"> 456</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService-457"><a href="#PumpWoodRestService-457"><span class="linenos"> 457</span></a>
</span><span id="PumpWoodRestService-458"><a href="#PumpWoodRestService-458"><span class="linenos"> 458</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-459"><a href="#PumpWoodRestService-459"><span class="linenos"> 459</span></a><span class="sd">        - **fields [List[str]] = None:** List of the fields that should be</span>
</span><span id="PumpWoodRestService-460"><a href="#PumpWoodRestService-460"><span class="linenos"> 460</span></a><span class="sd">            returned.</span>
</span><span id="PumpWoodRestService-461"><a href="#PumpWoodRestService-461"><span class="linenos"> 461</span></a><span class="sd">        - **foreign_key_fields [bool] = False:** If foreign key should be</span>
</span><span id="PumpWoodRestService-462"><a href="#PumpWoodRestService-462"><span class="linenos"> 462</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService-463"><a href="#PumpWoodRestService-463"><span class="linenos"> 463</span></a><span class="sd">        - **related_fields [bool] = False:** If related fields should be</span>
</span><span id="PumpWoodRestService-464"><a href="#PumpWoodRestService-464"><span class="linenos"> 464</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService-465"><a href="#PumpWoodRestService-465"><span class="linenos"> 465</span></a><span class="sd">        - **default_fields [bool] = False:** If only serializer list_fields</span>
</span><span id="PumpWoodRestService-466"><a href="#PumpWoodRestService-466"><span class="linenos"> 466</span></a><span class="sd">            should be returned.</span>
</span><span id="PumpWoodRestService-467"><a href="#PumpWoodRestService-467"><span class="linenos"> 467</span></a>
</span><span id="PumpWoodRestService-468"><a href="#PumpWoodRestService-468"><span class="linenos"> 468</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-469"><a href="#PumpWoodRestService-469"><span class="linenos"> 469</span></a><span class="sd">            request [pk]:</span>
</span><span id="PumpWoodRestService-470"><a href="#PumpWoodRestService-470"><span class="linenos"> 470</span></a><span class="sd">                Django request.</span>
</span><span id="PumpWoodRestService-471"><a href="#PumpWoodRestService-471"><span class="linenos"> 471</span></a><span class="sd">            int [pk]:</span>
</span><span id="PumpWoodRestService-472"><a href="#PumpWoodRestService-472"><span class="linenos"> 472</span></a><span class="sd">                Object pk to be retrieve</span>
</span><span id="PumpWoodRestService-473"><a href="#PumpWoodRestService-473"><span class="linenos"> 473</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-474"><a href="#PumpWoodRestService-474"><span class="linenos"> 474</span></a><span class="sd">            The representation of the object with pk dumped by</span>
</span><span id="PumpWoodRestService-475"><a href="#PumpWoodRestService-475"><span class="linenos"> 475</span></a><span class="sd">            self.serializer using arguments passed on query parameters.</span>
</span><span id="PumpWoodRestService-476"><a href="#PumpWoodRestService-476"><span class="linenos"> 476</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-477"><a href="#PumpWoodRestService-477"><span class="linenos"> 477</span></a>        <span class="c1">##########################</span>
</span><span id="PumpWoodRestService-478"><a href="#PumpWoodRestService-478"><span class="linenos"> 478</span></a>        <span class="c1"># Get serializer options #</span>
</span><span id="PumpWoodRestService-479"><a href="#PumpWoodRestService-479"><span class="linenos"> 479</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService-480"><a href="#PumpWoodRestService-480"><span class="linenos"> 480</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-481"><a href="#PumpWoodRestService-481"><span class="linenos"> 481</span></a>        <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService-482"><a href="#PumpWoodRestService-482"><span class="linenos"> 482</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foreign_key_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-483"><a href="#PumpWoodRestService-483"><span class="linenos"> 483</span></a>        <span class="n">related_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService-484"><a href="#PumpWoodRestService-484"><span class="linenos"> 484</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;related_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-485"><a href="#PumpWoodRestService-485"><span class="linenos"> 485</span></a>        <span class="n">default_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService-486"><a href="#PumpWoodRestService-486"><span class="linenos"> 486</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-487"><a href="#PumpWoodRestService-487"><span class="linenos"> 487</span></a>        <span class="c1">##########################</span>
</span><span id="PumpWoodRestService-488"><a href="#PumpWoodRestService-488"><span class="linenos"> 488</span></a>
</span><span id="PumpWoodRestService-489"><a href="#PumpWoodRestService-489"><span class="linenos"> 489</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-490"><a href="#PumpWoodRestService-490"><span class="linenos"> 490</span></a>        <span class="n">response_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-491"><a href="#PumpWoodRestService-491"><span class="linenos"> 491</span></a>            <span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-492"><a href="#PumpWoodRestService-492"><span class="linenos"> 492</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-493"><a href="#PumpWoodRestService-493"><span class="linenos"> 493</span></a>            <span class="n">related_fields</span><span class="o">=</span><span class="n">related_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-494"><a href="#PumpWoodRestService-494"><span class="linenos"> 494</span></a>            <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-495"><a href="#PumpWoodRestService-495"><span class="linenos"> 495</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-496"><a href="#PumpWoodRestService-496"><span class="linenos"> 496</span></a>
</span><span id="PumpWoodRestService-497"><a href="#PumpWoodRestService-497"><span class="linenos"> 497</span></a>    <span class="k">def</span> <span class="nf">retrieve_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="PumpWoodRestService-498"><a href="#PumpWoodRestService-498"><span class="linenos"> 498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-499"><a href="#PumpWoodRestService-499"><span class="linenos"> 499</span></a><span class="sd">        Read file without stream.</span>
</span><span id="PumpWoodRestService-500"><a href="#PumpWoodRestService-500"><span class="linenos"> 500</span></a>
</span><span id="PumpWoodRestService-501"><a href="#PumpWoodRestService-501"><span class="linenos"> 501</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService-502"><a href="#PumpWoodRestService-502"><span class="linenos"> 502</span></a><span class="sd">            This end-point will read de file from storage and them return the</span>
</span><span id="PumpWoodRestService-503"><a href="#PumpWoodRestService-503"><span class="linenos"> 503</span></a><span class="sd">            request. Be carefull when retriving large files (greater than</span>
</span><span id="PumpWoodRestService-504"><a href="#PumpWoodRestService-504"><span class="linenos"> 504</span></a><span class="sd">            10Mb).</span>
</span><span id="PumpWoodRestService-505"><a href="#PumpWoodRestService-505"><span class="linenos"> 505</span></a>
</span><span id="PumpWoodRestService-506"><a href="#PumpWoodRestService-506"><span class="linenos"> 506</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-507"><a href="#PumpWoodRestService-507"><span class="linenos"> 507</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService-508"><a href="#PumpWoodRestService-508"><span class="linenos"> 508</span></a>
</span><span id="PumpWoodRestService-509"><a href="#PumpWoodRestService-509"><span class="linenos"> 509</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-510"><a href="#PumpWoodRestService-510"><span class="linenos"> 510</span></a><span class="sd">        - **file_field [str]:** File field to receive stream file.</span>
</span><span id="PumpWoodRestService-511"><a href="#PumpWoodRestService-511"><span class="linenos"> 511</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService-512"><a href="#PumpWoodRestService-512"><span class="linenos"> 512</span></a>
</span><span id="PumpWoodRestService-513"><a href="#PumpWoodRestService-513"><span class="linenos"> 513</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-514"><a href="#PumpWoodRestService-514"><span class="linenos"> 514</span></a><span class="sd">            pk [int]:</span>
</span><span id="PumpWoodRestService-515"><a href="#PumpWoodRestService-515"><span class="linenos"> 515</span></a><span class="sd">                Pk of the object to save file field.</span>
</span><span id="PumpWoodRestService-516"><a href="#PumpWoodRestService-516"><span class="linenos"> 516</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-517"><a href="#PumpWoodRestService-517"><span class="linenos"> 517</span></a><span class="sd">            Return a file associated with object pk, file field `file_field`</span>
</span><span id="PumpWoodRestService-518"><a href="#PumpWoodRestService-518"><span class="linenos"> 518</span></a><span class="sd">            read from storage.</span>
</span><span id="PumpWoodRestService-519"><a href="#PumpWoodRestService-519"><span class="linenos"> 519</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-520"><a href="#PumpWoodRestService-520"><span class="linenos"> 520</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService-521"><a href="#PumpWoodRestService-521"><span class="linenos"> 521</span></a><span class="sd">                &#39;{field} must be set on file_fields dictionary.&#39;. Indicates</span>
</span><span id="PumpWoodRestService-522"><a href="#PumpWoodRestService-522"><span class="linenos"> 522</span></a><span class="sd">                that the requested file field was not found on view</span>
</span><span id="PumpWoodRestService-523"><a href="#PumpWoodRestService-523"><span class="linenos"> 523</span></a><span class="sd">                `file_fields` attribute.</span>
</span><span id="PumpWoodRestService-524"><a href="#PumpWoodRestService-524"><span class="linenos"> 524</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService-525"><a href="#PumpWoodRestService-525"><span class="linenos"> 525</span></a><span class="sd">                &#39;storage_object not set&#39;. Indicates that the `storage_object`</span>
</span><span id="PumpWoodRestService-526"><a href="#PumpWoodRestService-526"><span class="linenos"> 526</span></a><span class="sd">                attribute is not set at view. This view can not perform</span>
</span><span id="PumpWoodRestService-527"><a href="#PumpWoodRestService-527"><span class="linenos"> 527</span></a><span class="sd">                file operations.</span>
</span><span id="PumpWoodRestService-528"><a href="#PumpWoodRestService-528"><span class="linenos"> 528</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService-529"><a href="#PumpWoodRestService-529"><span class="linenos"> 529</span></a><span class="sd">                &#39;field [{}] is not set at object&#39;. Indicates that requested</span>
</span><span id="PumpWoodRestService-530"><a href="#PumpWoodRestService-530"><span class="linenos"> 530</span></a><span class="sd">                file field is not set on object.</span>
</span><span id="PumpWoodRestService-531"><a href="#PumpWoodRestService-531"><span class="linenos"> 531</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-532"><a href="#PumpWoodRestService-532"><span class="linenos"> 532</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-533"><a href="#PumpWoodRestService-533"><span class="linenos"> 533</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService-534"><a href="#PumpWoodRestService-534"><span class="linenos"> 534</span></a>                <span class="s2">&quot;storage_object not set&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-535"><a href="#PumpWoodRestService-535"><span class="linenos"> 535</span></a>
</span><span id="PumpWoodRestService-536"><a href="#PumpWoodRestService-536"><span class="linenos"> 536</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-537"><a href="#PumpWoodRestService-537"><span class="linenos"> 537</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService-538"><a href="#PumpWoodRestService-538"><span class="linenos"> 538</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-539"><a href="#PumpWoodRestService-539"><span class="linenos"> 539</span></a>                <span class="s2">&quot;&#39;</span><span class="si">{field}</span><span class="s2">&#39; must be set on file_fields dictionary.&quot;</span>
</span><span id="PumpWoodRestService-540"><a href="#PumpWoodRestService-540"><span class="linenos"> 540</span></a>            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService-541"><a href="#PumpWoodRestService-541"><span class="linenos"> 541</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService-542"><a href="#PumpWoodRestService-542"><span class="linenos"> 542</span></a>                <span class="n">msg</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService-543"><a href="#PumpWoodRestService-543"><span class="linenos"> 543</span></a>                    <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService-544"><a href="#PumpWoodRestService-544"><span class="linenos"> 544</span></a>                    <span class="n">file_field</span><span class="p">:</span> <span class="s1">&#39;not_found&#39;</span><span class="p">})</span>
</span><span id="PumpWoodRestService-545"><a href="#PumpWoodRestService-545"><span class="linenos"> 545</span></a>
</span><span id="PumpWoodRestService-546"><a href="#PumpWoodRestService-546"><span class="linenos"> 546</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-547"><a href="#PumpWoodRestService-547"><span class="linenos"> 547</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService-548"><a href="#PumpWoodRestService-548"><span class="linenos"> 548</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">FieldFile</span><span class="p">):</span>
</span><span id="PumpWoodRestService-549"><a href="#PumpWoodRestService-549"><span class="linenos"> 549</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
</span><span id="PumpWoodRestService-550"><a href="#PumpWoodRestService-550"><span class="linenos"> 550</span></a>
</span><span id="PumpWoodRestService-551"><a href="#PumpWoodRestService-551"><span class="linenos"> 551</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
</span><span id="PumpWoodRestService-552"><a href="#PumpWoodRestService-552"><span class="linenos"> 552</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService-553"><a href="#PumpWoodRestService-553"><span class="linenos"> 553</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] is not set at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="PumpWoodRestService-554"><a href="#PumpWoodRestService-554"><span class="linenos"> 554</span></a>        <span class="n">file_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService-555"><a href="#PumpWoodRestService-555"><span class="linenos"> 555</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService-556"><a href="#PumpWoodRestService-556"><span class="linenos"> 556</span></a>
</span><span id="PumpWoodRestService-557"><a href="#PumpWoodRestService-557"><span class="linenos"> 557</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]))</span>
</span><span id="PumpWoodRestService-558"><a href="#PumpWoodRestService-558"><span class="linenos"> 558</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;content_type&quot;</span><span class="p">]</span>
</span><span id="PumpWoodRestService-559"><a href="#PumpWoodRestService-559"><span class="linenos"> 559</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="PumpWoodRestService-560"><a href="#PumpWoodRestService-560"><span class="linenos"> 560</span></a>            <span class="s1">&#39;attachment; filename=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">file_name</span>
</span><span id="PumpWoodRestService-561"><a href="#PumpWoodRestService-561"><span class="linenos"> 561</span></a>        <span class="k">return</span> <span class="n">response</span>
</span><span id="PumpWoodRestService-562"><a href="#PumpWoodRestService-562"><span class="linenos"> 562</span></a>
</span><span id="PumpWoodRestService-563"><a href="#PumpWoodRestService-563"><span class="linenos"> 563</span></a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-564"><a href="#PumpWoodRestService-564"><span class="linenos"> 564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-565"><a href="#PumpWoodRestService-565"><span class="linenos"> 565</span></a><span class="sd">        Delete view.</span>
</span><span id="PumpWoodRestService-566"><a href="#PumpWoodRestService-566"><span class="linenos"> 566</span></a>
</span><span id="PumpWoodRestService-567"><a href="#PumpWoodRestService-567"><span class="linenos"> 567</span></a><span class="sd">        .. notes::</span>
</span><span id="PumpWoodRestService-568"><a href="#PumpWoodRestService-568"><span class="linenos"> 568</span></a><span class="sd">            If model has deleted field, the default behaviour will set this</span>
</span><span id="PumpWoodRestService-569"><a href="#PumpWoodRestService-569"><span class="linenos"> 569</span></a><span class="sd">            field to True not deleting the object. To force deletion it is</span>
</span><span id="PumpWoodRestService-570"><a href="#PumpWoodRestService-570"><span class="linenos"> 570</span></a><span class="sd">            necessary to use query paramenter `force_delete=True`</span>
</span><span id="PumpWoodRestService-571"><a href="#PumpWoodRestService-571"><span class="linenos"> 571</span></a>
</span><span id="PumpWoodRestService-572"><a href="#PumpWoodRestService-572"><span class="linenos"> 572</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-573"><a href="#PumpWoodRestService-573"><span class="linenos"> 573</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService-574"><a href="#PumpWoodRestService-574"><span class="linenos"> 574</span></a>
</span><span id="PumpWoodRestService-575"><a href="#PumpWoodRestService-575"><span class="linenos"> 575</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-576"><a href="#PumpWoodRestService-576"><span class="linenos"> 576</span></a><span class="sd">        - **force_delete [bool] = False:** Force deletion of models that</span>
</span><span id="PumpWoodRestService-577"><a href="#PumpWoodRestService-577"><span class="linenos"> 577</span></a><span class="sd">            have `deleted` field. If False, object with deleted</span>
</span><span id="PumpWoodRestService-578"><a href="#PumpWoodRestService-578"><span class="linenos"> 578</span></a><span class="sd">            will not be deleted, but deleted will be set as True.</span>
</span><span id="PumpWoodRestService-579"><a href="#PumpWoodRestService-579"><span class="linenos"> 579</span></a>
</span><span id="PumpWoodRestService-580"><a href="#PumpWoodRestService-580"><span class="linenos"> 580</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-581"><a href="#PumpWoodRestService-581"><span class="linenos"> 581</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-582"><a href="#PumpWoodRestService-582"><span class="linenos"> 582</span></a><span class="sd">            pk [int]: Object pk to be retrieve.</span>
</span><span id="PumpWoodRestService-583"><a href="#PumpWoodRestService-583"><span class="linenos"> 583</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-584"><a href="#PumpWoodRestService-584"><span class="linenos"> 584</span></a><span class="sd">            Return the object that was removed.</span>
</span><span id="PumpWoodRestService-585"><a href="#PumpWoodRestService-585"><span class="linenos"> 585</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-586"><a href="#PumpWoodRestService-586"><span class="linenos"> 586</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-587"><a href="#PumpWoodRestService-587"><span class="linenos"> 587</span></a>        <span class="n">force_delete</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="PumpWoodRestService-588"><a href="#PumpWoodRestService-588"><span class="linenos"> 588</span></a>            <span class="s1">&#39;force_delete&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-589"><a href="#PumpWoodRestService-589"><span class="linenos"> 589</span></a>        <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-590"><a href="#PumpWoodRestService-590"><span class="linenos"> 590</span></a>
</span><span id="PumpWoodRestService-591"><a href="#PumpWoodRestService-591"><span class="linenos"> 591</span></a>        <span class="c1"># If object has deleted field, set it to True if force_delete</span>
</span><span id="PumpWoodRestService-592"><a href="#PumpWoodRestService-592"><span class="linenos"> 592</span></a>        <span class="c1"># parameter is not set, this will function for objects that</span>
</span><span id="PumpWoodRestService-593"><a href="#PumpWoodRestService-593"><span class="linenos"> 593</span></a>        <span class="c1"># deletion is not a good pratice for keep data audit.</span>
</span><span id="PumpWoodRestService-594"><a href="#PumpWoodRestService-594"><span class="linenos"> 594</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService-595"><a href="#PumpWoodRestService-595"><span class="linenos"> 595</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">deleted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-596"><a href="#PumpWoodRestService-596"><span class="linenos"> 596</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService-597"><a href="#PumpWoodRestService-597"><span class="linenos"> 597</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-598"><a href="#PumpWoodRestService-598"><span class="linenos"> 598</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="PumpWoodRestService-599"><a href="#PumpWoodRestService-599"><span class="linenos"> 599</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">return_data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span id="PumpWoodRestService-600"><a href="#PumpWoodRestService-600"><span class="linenos"> 600</span></a>
</span><span id="PumpWoodRestService-601"><a href="#PumpWoodRestService-601"><span class="linenos"> 601</span></a>    <span class="k">def</span> <span class="nf">delete_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PumpWoodRestService-602"><a href="#PumpWoodRestService-602"><span class="linenos"> 602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-603"><a href="#PumpWoodRestService-603"><span class="linenos"> 603</span></a><span class="sd">        Delete many data using filter.</span>
</span><span id="PumpWoodRestService-604"><a href="#PumpWoodRestService-604"><span class="linenos"> 604</span></a>
</span><span id="PumpWoodRestService-605"><a href="#PumpWoodRestService-605"><span class="linenos"> 605</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService-606"><a href="#PumpWoodRestService-606"><span class="linenos"> 606</span></a><span class="sd">            This action will delete all objects that satisfies the query</span>
</span><span id="PumpWoodRestService-607"><a href="#PumpWoodRestService-607"><span class="linenos"> 607</span></a><span class="sd">            filter_dict and exclude_dict. It will also delete objects with</span>
</span><span id="PumpWoodRestService-608"><a href="#PumpWoodRestService-608"><span class="linenos"> 608</span></a><span class="sd">            deleted fields. **THIS REQUEST CAN NOT BE UNDONE**.</span>
</span><span id="PumpWoodRestService-609"><a href="#PumpWoodRestService-609"><span class="linenos"> 609</span></a>
</span><span id="PumpWoodRestService-610"><a href="#PumpWoodRestService-610"><span class="linenos"> 610</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-611"><a href="#PumpWoodRestService-611"><span class="linenos"> 611</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService-612"><a href="#PumpWoodRestService-612"><span class="linenos"> 612</span></a>
</span><span id="PumpWoodRestService-613"><a href="#PumpWoodRestService-613"><span class="linenos"> 613</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-614"><a href="#PumpWoodRestService-614"><span class="linenos"> 614</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-615"><a href="#PumpWoodRestService-615"><span class="linenos"> 615</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-616"><a href="#PumpWoodRestService-616"><span class="linenos"> 616</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService-617"><a href="#PumpWoodRestService-617"><span class="linenos"> 617</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService-618"><a href="#PumpWoodRestService-618"><span class="linenos"> 618</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-619"><a href="#PumpWoodRestService-619"><span class="linenos"> 619</span></a>
</span><span id="PumpWoodRestService-620"><a href="#PumpWoodRestService-620"><span class="linenos"> 620</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-621"><a href="#PumpWoodRestService-621"><span class="linenos"> 621</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-622"><a href="#PumpWoodRestService-622"><span class="linenos"> 622</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-623"><a href="#PumpWoodRestService-623"><span class="linenos"> 623</span></a><span class="sd">            True if operation has completed.</span>
</span><span id="PumpWoodRestService-624"><a href="#PumpWoodRestService-624"><span class="linenos"> 624</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-625"><a href="#PumpWoodRestService-625"><span class="linenos"> 625</span></a><span class="sd">            PumpWoodObjectDeleteException:</span>
</span><span id="PumpWoodRestService-626"><a href="#PumpWoodRestService-626"><span class="linenos"> 626</span></a><span class="sd">                If any error raised when performing request.</span>
</span><span id="PumpWoodRestService-627"><a href="#PumpWoodRestService-627"><span class="linenos"> 627</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-628"><a href="#PumpWoodRestService-628"><span class="linenos"> 628</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService-629"><a href="#PumpWoodRestService-629"><span class="linenos"> 629</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService-630"><a href="#PumpWoodRestService-630"><span class="linenos"> 630</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-631"><a href="#PumpWoodRestService-631"><span class="linenos"> 631</span></a>
</span><span id="PumpWoodRestService-632"><a href="#PumpWoodRestService-632"><span class="linenos"> 632</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService-633"><a href="#PumpWoodRestService-633"><span class="linenos"> 633</span></a>            <span class="n">query_set</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="PumpWoodRestService-634"><a href="#PumpWoodRestService-634"><span class="linenos"> 634</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span id="PumpWoodRestService-635"><a href="#PumpWoodRestService-635"><span class="linenos"> 635</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService-636"><a href="#PumpWoodRestService-636"><span class="linenos"> 636</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDeleteException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-637"><a href="#PumpWoodRestService-637"><span class="linenos"> 637</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodRestService-638"><a href="#PumpWoodRestService-638"><span class="linenos"> 638</span></a>
</span><span id="PumpWoodRestService-639"><a href="#PumpWoodRestService-639"><span class="linenos"> 639</span></a>    <span class="k">def</span> <span class="nf">remove_file_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PumpWoodRestService-640"><a href="#PumpWoodRestService-640"><span class="linenos"> 640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-641"><a href="#PumpWoodRestService-641"><span class="linenos"> 641</span></a><span class="sd">        Remove file field.</span>
</span><span id="PumpWoodRestService-642"><a href="#PumpWoodRestService-642"><span class="linenos"> 642</span></a>
</span><span id="PumpWoodRestService-643"><a href="#PumpWoodRestService-643"><span class="linenos"> 643</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-644"><a href="#PumpWoodRestService-644"><span class="linenos"> 644</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService-645"><a href="#PumpWoodRestService-645"><span class="linenos"> 645</span></a>
</span><span id="PumpWoodRestService-646"><a href="#PumpWoodRestService-646"><span class="linenos"> 646</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-647"><a href="#PumpWoodRestService-647"><span class="linenos"> 647</span></a><span class="sd">        - **file_field [str]:**</span>
</span><span id="PumpWoodRestService-648"><a href="#PumpWoodRestService-648"><span class="linenos"> 648</span></a><span class="sd">            File field associated with a file that will be removed.&lt;br&gt;</span>
</span><span id="PumpWoodRestService-649"><a href="#PumpWoodRestService-649"><span class="linenos"> 649</span></a>
</span><span id="PumpWoodRestService-650"><a href="#PumpWoodRestService-650"><span class="linenos"> 650</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-651"><a href="#PumpWoodRestService-651"><span class="linenos"> 651</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-652"><a href="#PumpWoodRestService-652"><span class="linenos"> 652</span></a><span class="sd">            pk [int]: pk of the object.</span>
</span><span id="PumpWoodRestService-653"><a href="#PumpWoodRestService-653"><span class="linenos"> 653</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-654"><a href="#PumpWoodRestService-654"><span class="linenos"> 654</span></a><span class="sd">            True if the object was removed.</span>
</span><span id="PumpWoodRestService-655"><a href="#PumpWoodRestService-655"><span class="linenos"> 655</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-656"><a href="#PumpWoodRestService-656"><span class="linenos"> 656</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService-657"><a href="#PumpWoodRestService-657"><span class="linenos"> 657</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="PumpWoodRestService-658"><a href="#PumpWoodRestService-658"><span class="linenos"> 658</span></a><span class="sd">                Indicates that `file_file` is not in file_fields keys of</span>
</span><span id="PumpWoodRestService-659"><a href="#PumpWoodRestService-659"><span class="linenos"> 659</span></a><span class="sd">                the view.</span>
</span><span id="PumpWoodRestService-660"><a href="#PumpWoodRestService-660"><span class="linenos"> 660</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService-661"><a href="#PumpWoodRestService-661"><span class="linenos"> 661</span></a><span class="sd">                &#39;field [{}] not found at object&#39;. Indicates that file was not</span>
</span><span id="PumpWoodRestService-662"><a href="#PumpWoodRestService-662"><span class="linenos"> 662</span></a><span class="sd">                found on storage.</span>
</span><span id="PumpWoodRestService-663"><a href="#PumpWoodRestService-663"><span class="linenos"> 663</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-664"><a href="#PumpWoodRestService-664"><span class="linenos"> 664</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-665"><a href="#PumpWoodRestService-665"><span class="linenos"> 665</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService-666"><a href="#PumpWoodRestService-666"><span class="linenos"> 666</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService-667"><a href="#PumpWoodRestService-667"><span class="linenos"> 667</span></a>                <span class="s2">&quot;file_field must be set on self.file_fields dictionary.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-668"><a href="#PumpWoodRestService-668"><span class="linenos"> 668</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-669"><a href="#PumpWoodRestService-669"><span class="linenos"> 669</span></a>
</span><span id="PumpWoodRestService-670"><a href="#PumpWoodRestService-670"><span class="linenos"> 670</span></a>        <span class="n">file</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService-671"><a href="#PumpWoodRestService-671"><span class="linenos"> 671</span></a>        <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-672"><a href="#PumpWoodRestService-672"><span class="linenos"> 672</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService-673"><a href="#PumpWoodRestService-673"><span class="linenos"> 673</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] not found at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="PumpWoodRestService-674"><a href="#PumpWoodRestService-674"><span class="linenos"> 674</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-675"><a href="#PumpWoodRestService-675"><span class="linenos"> 675</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span>
</span><span id="PumpWoodRestService-676"><a href="#PumpWoodRestService-676"><span class="linenos"> 676</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-677"><a href="#PumpWoodRestService-677"><span class="linenos"> 677</span></a>        <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService-678"><a href="#PumpWoodRestService-678"><span class="linenos"> 678</span></a>
</span><span id="PumpWoodRestService-679"><a href="#PumpWoodRestService-679"><span class="linenos"> 679</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService-680"><a href="#PumpWoodRestService-680"><span class="linenos"> 680</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService-681"><a href="#PumpWoodRestService-681"><span class="linenos"> 681</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="PumpWoodRestService-682"><a href="#PumpWoodRestService-682"><span class="linenos"> 682</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService-683"><a href="#PumpWoodRestService-683"><span class="linenos"> 683</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodRestService-684"><a href="#PumpWoodRestService-684"><span class="linenos"> 684</span></a>
</span><span id="PumpWoodRestService-685"><a href="#PumpWoodRestService-685"><span class="linenos"> 685</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-686"><a href="#PumpWoodRestService-686"><span class="linenos"> 686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-687"><a href="#PumpWoodRestService-687"><span class="linenos"> 687</span></a><span class="sd">        Save and update object acording to request.data.</span>
</span><span id="PumpWoodRestService-688"><a href="#PumpWoodRestService-688"><span class="linenos"> 688</span></a>
</span><span id="PumpWoodRestService-689"><a href="#PumpWoodRestService-689"><span class="linenos"> 689</span></a><span class="sd">        Object will be updated if request.data[&#39;pk&#39;] is not None.</span>
</span><span id="PumpWoodRestService-690"><a href="#PumpWoodRestService-690"><span class="linenos"> 690</span></a>
</span><span id="PumpWoodRestService-691"><a href="#PumpWoodRestService-691"><span class="linenos"> 691</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-692"><a href="#PumpWoodRestService-692"><span class="linenos"> 692</span></a><span class="sd">        Object to be saved. If a pk is set them the object will be updated,</span>
</span><span id="PumpWoodRestService-693"><a href="#PumpWoodRestService-693"><span class="linenos"> 693</span></a><span class="sd">        if pk is None or not set a new object will be created.</span>
</span><span id="PumpWoodRestService-694"><a href="#PumpWoodRestService-694"><span class="linenos"> 694</span></a>
</span><span id="PumpWoodRestService-695"><a href="#PumpWoodRestService-695"><span class="linenos"> 695</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-696"><a href="#PumpWoodRestService-696"><span class="linenos"> 696</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService-697"><a href="#PumpWoodRestService-697"><span class="linenos"> 697</span></a>
</span><span id="PumpWoodRestService-698"><a href="#PumpWoodRestService-698"><span class="linenos"> 698</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-699"><a href="#PumpWoodRestService-699"><span class="linenos"> 699</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-700"><a href="#PumpWoodRestService-700"><span class="linenos"> 700</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-701"><a href="#PumpWoodRestService-701"><span class="linenos"> 701</span></a><span class="sd">            Serialized new/updated object.</span>
</span><span id="PumpWoodRestService-702"><a href="#PumpWoodRestService-702"><span class="linenos"> 702</span></a>
</span><span id="PumpWoodRestService-703"><a href="#PumpWoodRestService-703"><span class="linenos"> 703</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-704"><a href="#PumpWoodRestService-704"><span class="linenos"> 704</span></a><span class="sd">            PumpWoodException:</span>
</span><span id="PumpWoodRestService-705"><a href="#PumpWoodRestService-705"><span class="linenos"> 705</span></a><span class="sd">                &#39;Object model class diferent from {service_model} :</span>
</span><span id="PumpWoodRestService-706"><a href="#PumpWoodRestService-706"><span class="linenos"> 706</span></a><span class="sd">                {service_model}&#39;. Indicates that the end-point and the</span>
</span><span id="PumpWoodRestService-707"><a href="#PumpWoodRestService-707"><span class="linenos"> 707</span></a><span class="sd">                model_class of the object are impatible.</span>
</span><span id="PumpWoodRestService-708"><a href="#PumpWoodRestService-708"><span class="linenos"> 708</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodRestService-709"><a href="#PumpWoodRestService-709"><span class="linenos"> 709</span></a><span class="sd">                &#39;Error when validating fields when saving object&#39;. Indicates</span>
</span><span id="PumpWoodRestService-710"><a href="#PumpWoodRestService-710"><span class="linenos"> 710</span></a><span class="sd">                that there were error when validating object</span>
</span><span id="PumpWoodRestService-711"><a href="#PumpWoodRestService-711"><span class="linenos"> 711</span></a><span class="sd">                at the serializer. Error payload will have the fields with</span>
</span><span id="PumpWoodRestService-712"><a href="#PumpWoodRestService-712"><span class="linenos"> 712</span></a><span class="sd">                error as keys of the dictonary.</span>
</span><span id="PumpWoodRestService-713"><a href="#PumpWoodRestService-713"><span class="linenos"> 713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-714"><a href="#PumpWoodRestService-714"><span class="linenos"> 714</span></a>        <span class="n">request_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-715"><a href="#PumpWoodRestService-715"><span class="linenos"> 715</span></a>        <span class="k">if</span> <span class="s2">&quot;application/json&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">content_type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="PumpWoodRestService-716"><a href="#PumpWoodRestService-716"><span class="linenos"> 716</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-717"><a href="#PumpWoodRestService-717"><span class="linenos"> 717</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-718"><a href="#PumpWoodRestService-718"><span class="linenos"> 718</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</span><span id="PumpWoodRestService-719"><a href="#PumpWoodRestService-719"><span class="linenos"> 719</span></a>            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__json__&quot;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-720"><a href="#PumpWoodRestService-720"><span class="linenos"> 720</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService-721"><a href="#PumpWoodRestService-721"><span class="linenos"> 721</span></a>
</span><span id="PumpWoodRestService-722"><a href="#PumpWoodRestService-722"><span class="linenos"> 722</span></a>        <span class="n">data_pk</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-723"><a href="#PumpWoodRestService-723"><span class="linenos"> 723</span></a>        <span class="n">saved_obj</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-724"><a href="#PumpWoodRestService-724"><span class="linenos"> 724</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService-725"><a href="#PumpWoodRestService-725"><span class="linenos"> 725</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-726"><a href="#PumpWoodRestService-726"><span class="linenos"> 726</span></a>
</span><span id="PumpWoodRestService-727"><a href="#PumpWoodRestService-727"><span class="linenos"> 727</span></a>        <span class="c1"># update</span>
</span><span id="PumpWoodRestService-728"><a href="#PumpWoodRestService-728"><span class="linenos"> 728</span></a>        <span class="k">if</span> <span class="n">data_pk</span><span class="p">:</span>
</span><span id="PumpWoodRestService-729"><a href="#PumpWoodRestService-729"><span class="linenos"> 729</span></a>            <span class="n">data_to_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">data_pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-730"><a href="#PumpWoodRestService-730"><span class="linenos"> 730</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-731"><a href="#PumpWoodRestService-731"><span class="linenos"> 731</span></a>                <span class="n">data_to_update</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span>
</span><span id="PumpWoodRestService-732"><a href="#PumpWoodRestService-732"><span class="linenos"> 732</span></a>                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="PumpWoodRestService-733"><a href="#PumpWoodRestService-733"><span class="linenos"> 733</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="PumpWoodRestService-734"><a href="#PumpWoodRestService-734"><span class="linenos"> 734</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span>
</span><span id="PumpWoodRestService-735"><a href="#PumpWoodRestService-735"><span class="linenos"> 735</span></a>        <span class="c1"># save</span>
</span><span id="PumpWoodRestService-736"><a href="#PumpWoodRestService-736"><span class="linenos"> 736</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-737"><a href="#PumpWoodRestService-737"><span class="linenos"> 737</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-738"><a href="#PumpWoodRestService-738"><span class="linenos"> 738</span></a>                <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="PumpWoodRestService-739"><a href="#PumpWoodRestService-739"><span class="linenos"> 739</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="PumpWoodRestService-740"><a href="#PumpWoodRestService-740"><span class="linenos"> 740</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span>
</span><span id="PumpWoodRestService-741"><a href="#PumpWoodRestService-741"><span class="linenos"> 741</span></a>
</span><span id="PumpWoodRestService-742"><a href="#PumpWoodRestService-742"><span class="linenos"> 742</span></a>        <span class="c1"># Uploading files</span>
</span><span id="PumpWoodRestService-743"><a href="#PumpWoodRestService-743"><span class="linenos"> 743</span></a>        <span class="n">object_errors</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-744"><a href="#PumpWoodRestService-744"><span class="linenos"> 744</span></a>        <span class="n">file_save_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
</span><span id="PumpWoodRestService-745"><a href="#PumpWoodRestService-745"><span class="linenos"> 745</span></a>            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%Hh%Mm%Ss&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-746"><a href="#PumpWoodRestService-746"><span class="linenos"> 746</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService-747"><a href="#PumpWoodRestService-747"><span class="linenos"> 747</span></a>            <span class="n">field_errors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService-748"><a href="#PumpWoodRestService-748"><span class="linenos"> 748</span></a>            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">:</span>
</span><span id="PumpWoodRestService-749"><a href="#PumpWoodRestService-749"><span class="linenos"> 749</span></a>                <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
</span><span id="PumpWoodRestService-750"><a href="#PumpWoodRestService-750"><span class="linenos"> 750</span></a>
</span><span id="PumpWoodRestService-751"><a href="#PumpWoodRestService-751"><span class="linenos"> 751</span></a>                <span class="n">file_name</span> <span class="o">=</span> <span class="n">secure_filename</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-752"><a href="#PumpWoodRestService-752"><span class="linenos"> 752</span></a>                <span class="n">field_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_extension</span><span class="p">(</span>
</span><span id="PumpWoodRestService-753"><a href="#PumpWoodRestService-753"><span class="linenos"> 753</span></a>                    <span class="n">filename</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService-754"><a href="#PumpWoodRestService-754"><span class="linenos"> 754</span></a>                    <span class="n">allowed_extensions</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="p">[</span><span class="n">field</span><span class="p">]))</span>
</span><span id="PumpWoodRestService-755"><a href="#PumpWoodRestService-755"><span class="linenos"> 755</span></a>
</span><span id="PumpWoodRestService-756"><a href="#PumpWoodRestService-756"><span class="linenos"> 756</span></a>                <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-757"><a href="#PumpWoodRestService-757"><span class="linenos"> 757</span></a>                    <span class="nb">str</span><span class="p">(</span><span class="n">saved_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
</span><span id="PumpWoodRestService-758"><a href="#PumpWoodRestService-758"><span class="linenos"> 758</span></a>                    <span class="n">file_save_time</span><span class="p">,</span>
</span><span id="PumpWoodRestService-759"><a href="#PumpWoodRestService-759"><span class="linenos"> 759</span></a>                    <span class="n">file_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-760"><a href="#PumpWoodRestService-760"><span class="linenos"> 760</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_errors</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodRestService-761"><a href="#PumpWoodRestService-761"><span class="linenos"> 761</span></a>                    <span class="n">object_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_errors</span>
</span><span id="PumpWoodRestService-762"><a href="#PumpWoodRestService-762"><span class="linenos"> 762</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-763"><a href="#PumpWoodRestService-763"><span class="linenos"> 763</span></a>                    <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="PumpWoodRestService-764"><a href="#PumpWoodRestService-764"><span class="linenos"> 764</span></a>                    <span class="n">file_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{model_class}</span><span class="s1">__</span><span class="si">{field}</span><span class="s1">/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-765"><a href="#PumpWoodRestService-765"><span class="linenos"> 765</span></a>                        <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">)</span>
</span><span id="PumpWoodRestService-766"><a href="#PumpWoodRestService-766"><span class="linenos"> 766</span></a>                    <span class="n">storage_filepath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">write_file</span><span class="p">(</span>
</span><span id="PumpWoodRestService-767"><a href="#PumpWoodRestService-767"><span class="linenos"> 767</span></a>                        <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
</span><span id="PumpWoodRestService-768"><a href="#PumpWoodRestService-768"><span class="linenos"> 768</span></a>                        <span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
</span><span id="PumpWoodRestService-769"><a href="#PumpWoodRestService-769"><span class="linenos"> 769</span></a>                        <span class="n">content_type</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">content_type</span><span class="p">,</span>
</span><span id="PumpWoodRestService-770"><a href="#PumpWoodRestService-770"><span class="linenos"> 770</span></a>                        <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;overide&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-771"><a href="#PumpWoodRestService-771"><span class="linenos"> 771</span></a>                    <span class="nb">setattr</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">storage_filepath</span><span class="p">)</span>
</span><span id="PumpWoodRestService-772"><a href="#PumpWoodRestService-772"><span class="linenos"> 772</span></a>
</span><span id="PumpWoodRestService-773"><a href="#PumpWoodRestService-773"><span class="linenos"> 773</span></a>        <span class="k">if</span> <span class="n">object_errors</span> <span class="o">!=</span> <span class="p">{}:</span>
</span><span id="PumpWoodRestService-774"><a href="#PumpWoodRestService-774"><span class="linenos"> 774</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;error when saving object: &quot;</span> \
</span><span id="PumpWoodRestService-775"><a href="#PumpWoodRestService-775"><span class="linenos"> 775</span></a>                <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;error when updating object: &quot;</span>
</span><span id="PumpWoodRestService-776"><a href="#PumpWoodRestService-776"><span class="linenos"> 776</span></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">object_errors</span>
</span><span id="PumpWoodRestService-777"><a href="#PumpWoodRestService-777"><span class="linenos"> 777</span></a>            <span class="n">message_to_append</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService-778"><a href="#PumpWoodRestService-778"><span class="linenos"> 778</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">object_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-779"><a href="#PumpWoodRestService-779"><span class="linenos"> 779</span></a>                <span class="n">message_to_append</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="PumpWoodRestService-780"><a href="#PumpWoodRestService-780"><span class="linenos"> 780</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message_to_append</span><span class="p">)</span>
</span><span id="PumpWoodRestService-781"><a href="#PumpWoodRestService-781"><span class="linenos"> 781</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-782"><a href="#PumpWoodRestService-782"><span class="linenos"> 782</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</span><span id="PumpWoodRestService-783"><a href="#PumpWoodRestService-783"><span class="linenos"> 783</span></a>        <span class="n">saved_obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService-784"><a href="#PumpWoodRestService-784"><span class="linenos"> 784</span></a>
</span><span id="PumpWoodRestService-785"><a href="#PumpWoodRestService-785"><span class="linenos"> 785</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="PumpWoodRestService-786"><a href="#PumpWoodRestService-786"><span class="linenos"> 786</span></a>            <span class="c1"># Process ETLTrigger for the model class</span>
</span><span id="PumpWoodRestService-787"><a href="#PumpWoodRestService-787"><span class="linenos"> 787</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="PumpWoodRestService-788"><a href="#PumpWoodRestService-788"><span class="linenos"> 788</span></a>            <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-789"><a href="#PumpWoodRestService-789"><span class="linenos"> 789</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService-790"><a href="#PumpWoodRestService-790"><span class="linenos"> 790</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService-791"><a href="#PumpWoodRestService-791"><span class="linenos"> 791</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService-792"><a href="#PumpWoodRestService-792"><span class="linenos"> 792</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService-793"><a href="#PumpWoodRestService-793"><span class="linenos"> 793</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="PumpWoodRestService-794"><a href="#PumpWoodRestService-794"><span class="linenos"> 794</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="PumpWoodRestService-795"><a href="#PumpWoodRestService-795"><span class="linenos"> 795</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-796"><a href="#PumpWoodRestService-796"><span class="linenos"> 796</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService-797"><a href="#PumpWoodRestService-797"><span class="linenos"> 797</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService-798"><a href="#PumpWoodRestService-798"><span class="linenos"> 798</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService-799"><a href="#PumpWoodRestService-799"><span class="linenos"> 799</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService-800"><a href="#PumpWoodRestService-800"><span class="linenos"> 800</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">saved_obj</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
</span><span id="PumpWoodRestService-801"><a href="#PumpWoodRestService-801"><span class="linenos"> 801</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="PumpWoodRestService-802"><a href="#PumpWoodRestService-802"><span class="linenos"> 802</span></a>
</span><span id="PumpWoodRestService-803"><a href="#PumpWoodRestService-803"><span class="linenos"> 803</span></a>        <span class="c1"># Overhead, serializando e deserializando o objecto</span>
</span><span id="PumpWoodRestService-804"><a href="#PumpWoodRestService-804"><span class="linenos"> 804</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="PumpWoodRestService-805"><a href="#PumpWoodRestService-805"><span class="linenos"> 805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">response_status</span><span class="p">)</span>
</span><span id="PumpWoodRestService-806"><a href="#PumpWoodRestService-806"><span class="linenos"> 806</span></a>
</span><span id="PumpWoodRestService-807"><a href="#PumpWoodRestService-807"><span class="linenos"> 807</span></a>    <span class="k">def</span> <span class="nf">_get_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="PumpWoodRestService-808"><a href="#PumpWoodRestService-808"><span class="linenos"> 808</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-809"><a href="#PumpWoodRestService-809"><span class="linenos"> 809</span></a><span class="sd">        Get all actions with action decorator.</span>
</span><span id="PumpWoodRestService-810"><a href="#PumpWoodRestService-810"><span class="linenos"> 810</span></a>
</span><span id="PumpWoodRestService-811"><a href="#PumpWoodRestService-811"><span class="linenos"> 811</span></a><span class="sd">        @private</span>
</span><span id="PumpWoodRestService-812"><a href="#PumpWoodRestService-812"><span class="linenos"> 812</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-813"><a href="#PumpWoodRestService-813"><span class="linenos"> 813</span></a>        <span class="c1"># this import works here only</span>
</span><span id="PumpWoodRestService-814"><a href="#PumpWoodRestService-814"><span class="linenos"> 814</span></a>        <span class="kn">import</span> <span class="nn">inspect</span>
</span><span id="PumpWoodRestService-815"><a href="#PumpWoodRestService-815"><span class="linenos"> 815</span></a>        <span class="n">function_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span>
</span><span id="PumpWoodRestService-816"><a href="#PumpWoodRestService-816"><span class="linenos"> 816</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">isfunction</span><span class="p">))</span>
</span><span id="PumpWoodRestService-817"><a href="#PumpWoodRestService-817"><span class="linenos"> 817</span></a>        <span class="n">method_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span>
</span><span id="PumpWoodRestService-818"><a href="#PumpWoodRestService-818"><span class="linenos"> 818</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">))</span>
</span><span id="PumpWoodRestService-819"><a href="#PumpWoodRestService-819"><span class="linenos"> 819</span></a>        <span class="n">method_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">function_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService-820"><a href="#PumpWoodRestService-820"><span class="linenos"> 820</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-821"><a href="#PumpWoodRestService-821"><span class="linenos"> 821</span></a>            <span class="n">name</span><span class="p">:</span> <span class="n">func</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">method_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="PumpWoodRestService-822"><a href="#PumpWoodRestService-822"><span class="linenos"> 822</span></a>            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;is_action&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)}</span>
</span><span id="PumpWoodRestService-823"><a href="#PumpWoodRestService-823"><span class="linenos"> 823</span></a>        <span class="k">return</span> <span class="n">actions</span>
</span><span id="PumpWoodRestService-824"><a href="#PumpWoodRestService-824"><span class="linenos"> 824</span></a>
</span><span id="PumpWoodRestService-825"><a href="#PumpWoodRestService-825"><span class="linenos"> 825</span></a>    <span class="k">def</span> <span class="nf">list_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService-826"><a href="#PumpWoodRestService-826"><span class="linenos"> 826</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-827"><a href="#PumpWoodRestService-827"><span class="linenos"> 827</span></a><span class="sd">        List model exposed actions.</span>
</span><span id="PumpWoodRestService-828"><a href="#PumpWoodRestService-828"><span class="linenos"> 828</span></a>
</span><span id="PumpWoodRestService-829"><a href="#PumpWoodRestService-829"><span class="linenos"> 829</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-830"><a href="#PumpWoodRestService-830"><span class="linenos"> 830</span></a><span class="sd">        No payload.</span>
</span><span id="PumpWoodRestService-831"><a href="#PumpWoodRestService-831"><span class="linenos"> 831</span></a>
</span><span id="PumpWoodRestService-832"><a href="#PumpWoodRestService-832"><span class="linenos"> 832</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-833"><a href="#PumpWoodRestService-833"><span class="linenos"> 833</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService-834"><a href="#PumpWoodRestService-834"><span class="linenos"> 834</span></a>
</span><span id="PumpWoodRestService-835"><a href="#PumpWoodRestService-835"><span class="linenos"> 835</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-836"><a href="#PumpWoodRestService-836"><span class="linenos"> 836</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-837"><a href="#PumpWoodRestService-837"><span class="linenos"> 837</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-838"><a href="#PumpWoodRestService-838"><span class="linenos"> 838</span></a><span class="sd">            Return a list of dictonary with information of the avaiable</span>
</span><span id="PumpWoodRestService-839"><a href="#PumpWoodRestService-839"><span class="linenos"> 839</span></a><span class="sd">            actions for model class. Actions info object keys:</span>
</span><span id="PumpWoodRestService-840"><a href="#PumpWoodRestService-840"><span class="linenos"> 840</span></a><span class="sd">            - **action_name [str]:** Name of the function associated with</span>
</span><span id="PumpWoodRestService-841"><a href="#PumpWoodRestService-841"><span class="linenos"> 841</span></a><span class="sd">                action on model_class.</span>
</span><span id="PumpWoodRestService-842"><a href="#PumpWoodRestService-842"><span class="linenos"> 842</span></a><span class="sd">            - **action_name__verbose [str]:** Name of the function associated</span>
</span><span id="PumpWoodRestService-843"><a href="#PumpWoodRestService-843"><span class="linenos"> 843</span></a><span class="sd">                with action on model_class translates by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-844"><a href="#PumpWoodRestService-844"><span class="linenos"> 844</span></a><span class="sd">            - **doc_string [str]:** Doc string associated with function.</span>
</span><span id="PumpWoodRestService-845"><a href="#PumpWoodRestService-845"><span class="linenos"> 845</span></a><span class="sd">            - **info [str]:** Info for que action passed as argument at action</span>
</span><span id="PumpWoodRestService-846"><a href="#PumpWoodRestService-846"><span class="linenos"> 846</span></a><span class="sd">                function decorator.</span>
</span><span id="PumpWoodRestService-847"><a href="#PumpWoodRestService-847"><span class="linenos"> 847</span></a><span class="sd">            - **info__verbose [str]:** Info for que action passed as argument</span>
</span><span id="PumpWoodRestService-848"><a href="#PumpWoodRestService-848"><span class="linenos"> 848</span></a><span class="sd">                at action function decorator model_class translates by</span>
</span><span id="PumpWoodRestService-849"><a href="#PumpWoodRestService-849"><span class="linenos"> 849</span></a><span class="sd">                Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-850"><a href="#PumpWoodRestService-850"><span class="linenos"> 850</span></a><span class="sd">            - **is_static_function [bool]:** Boolean value setting if function</span>
</span><span id="PumpWoodRestService-851"><a href="#PumpWoodRestService-851"><span class="linenos"> 851</span></a><span class="sd">                is classmethod or staticmethod (True), in this cases it is not</span>
</span><span id="PumpWoodRestService-852"><a href="#PumpWoodRestService-852"><span class="linenos"> 852</span></a><span class="sd">                associated with an object and aa pk should no be passed as</span>
</span><span id="PumpWoodRestService-853"><a href="#PumpWoodRestService-853"><span class="linenos"> 853</span></a><span class="sd">                argument.</span>
</span><span id="PumpWoodRestService-854"><a href="#PumpWoodRestService-854"><span class="linenos"> 854</span></a><span class="sd">            - **parameters [dict]:** Dictionary with paramenter as key and with</span>
</span><span id="PumpWoodRestService-855"><a href="#PumpWoodRestService-855"><span class="linenos"> 855</span></a><span class="sd">                keys:</span>
</span><span id="PumpWoodRestService-856"><a href="#PumpWoodRestService-856"><span class="linenos"> 856</span></a><span class="sd">                - **default_value [any]:** Default value for paramenter.</span>
</span><span id="PumpWoodRestService-857"><a href="#PumpWoodRestService-857"><span class="linenos"> 857</span></a><span class="sd">                - **many [bool]:** If the function parameter is many (list).</span>
</span><span id="PumpWoodRestService-858"><a href="#PumpWoodRestService-858"><span class="linenos"> 858</span></a><span class="sd">                - **required [bool]:** If the parameter is necessary to run the</span>
</span><span id="PumpWoodRestService-859"><a href="#PumpWoodRestService-859"><span class="linenos"> 859</span></a><span class="sd">                    function or optinal.</span>
</span><span id="PumpWoodRestService-860"><a href="#PumpWoodRestService-860"><span class="linenos"> 860</span></a><span class="sd">                - **type [str]:** Type of the paramenter that shoul be passed</span>
</span><span id="PumpWoodRestService-861"><a href="#PumpWoodRestService-861"><span class="linenos"> 861</span></a><span class="sd">                    to function.</span>
</span><span id="PumpWoodRestService-862"><a href="#PumpWoodRestService-862"><span class="linenos"> 862</span></a><span class="sd">                - **verbose_name [str]:** Parameter name translated using</span>
</span><span id="PumpWoodRestService-863"><a href="#PumpWoodRestService-863"><span class="linenos"> 863</span></a><span class="sd">                    Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-864"><a href="#PumpWoodRestService-864"><span class="linenos"> 864</span></a><span class="sd">            - **return [dict]:** A dictionary with the type associated with</span>
</span><span id="PumpWoodRestService-865"><a href="#PumpWoodRestService-865"><span class="linenos"> 865</span></a><span class="sd">                function return. Keys:</span>
</span><span id="PumpWoodRestService-866"><a href="#PumpWoodRestService-866"><span class="linenos"> 866</span></a><span class="sd">                - **many [bool]:** If the return result is a list.</span>
</span><span id="PumpWoodRestService-867"><a href="#PumpWoodRestService-867"><span class="linenos"> 867</span></a><span class="sd">                - **type [str]:** Type of the return.</span>
</span><span id="PumpWoodRestService-868"><a href="#PumpWoodRestService-868"><span class="linenos"> 868</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-869"><a href="#PumpWoodRestService-869"><span class="linenos"> 869</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="PumpWoodRestService-870"><a href="#PumpWoodRestService-870"><span class="linenos"> 870</span></a>        <span class="n">action_descriptions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService-871"><a href="#PumpWoodRestService-871"><span class="linenos"> 871</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__action__</span><span class="si">{action}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService-872"><a href="#PumpWoodRestService-872"><span class="linenos"> 872</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService-873"><a href="#PumpWoodRestService-873"><span class="linenos"> 873</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-874"><a href="#PumpWoodRestService-874"><span class="linenos"> 874</span></a>            <span class="n">action_dict</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="PumpWoodRestService-875"><a href="#PumpWoodRestService-875"><span class="linenos"> 875</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-876"><a href="#PumpWoodRestService-876"><span class="linenos"> 876</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span>
</span><span id="PumpWoodRestService-877"><a href="#PumpWoodRestService-877"><span class="linenos"> 877</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">])</span>
</span><span id="PumpWoodRestService-878"><a href="#PumpWoodRestService-878"><span class="linenos"> 878</span></a>
</span><span id="PumpWoodRestService-879"><a href="#PumpWoodRestService-879"><span class="linenos"> 879</span></a>            <span class="c1">#########################################################</span>
</span><span id="PumpWoodRestService-880"><a href="#PumpWoodRestService-880"><span class="linenos"> 880</span></a>            <span class="c1"># Translate action_name and info to end-user at verbose #</span>
</span><span id="PumpWoodRestService-881"><a href="#PumpWoodRestService-881"><span class="linenos"> 881</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-882"><a href="#PumpWoodRestService-882"><span class="linenos"> 882</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__action_name&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-883"><a href="#PumpWoodRestService-883"><span class="linenos"> 883</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-884"><a href="#PumpWoodRestService-884"><span class="linenos"> 884</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__info&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-885"><a href="#PumpWoodRestService-885"><span class="linenos"> 885</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-886"><a href="#PumpWoodRestService-886"><span class="linenos"> 886</span></a>                <span class="n">item</span><span class="p">[</span><span class="s2">&quot;verbose_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-887"><a href="#PumpWoodRestService-887"><span class="linenos"> 887</span></a>                    <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__parameters&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-888"><a href="#PumpWoodRestService-888"><span class="linenos"> 888</span></a>            <span class="c1">#########################################################</span>
</span><span id="PumpWoodRestService-889"><a href="#PumpWoodRestService-889"><span class="linenos"> 889</span></a>            <span class="n">action_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService-890"><a href="#PumpWoodRestService-890"><span class="linenos"> 890</span></a>
</span><span id="PumpWoodRestService-891"><a href="#PumpWoodRestService-891"><span class="linenos"> 891</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">action_descriptions</span><span class="p">)</span>
</span><span id="PumpWoodRestService-892"><a href="#PumpWoodRestService-892"><span class="linenos"> 892</span></a>
</span><span id="PumpWoodRestService-893"><a href="#PumpWoodRestService-893"><span class="linenos"> 893</span></a>    <span class="k">def</span> <span class="nf">execute_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">action_name</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-894"><a href="#PumpWoodRestService-894"><span class="linenos"> 894</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-895"><a href="#PumpWoodRestService-895"><span class="linenos"> 895</span></a><span class="sd">        Execute action over object or class using parameters.</span>
</span><span id="PumpWoodRestService-896"><a href="#PumpWoodRestService-896"><span class="linenos"> 896</span></a>
</span><span id="PumpWoodRestService-897"><a href="#PumpWoodRestService-897"><span class="linenos"> 897</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-898"><a href="#PumpWoodRestService-898"><span class="linenos"> 898</span></a><span class="sd">        Payload dictionary correspont to function parameters as key-&gt;value</span>
</span><span id="PumpWoodRestService-899"><a href="#PumpWoodRestService-899"><span class="linenos"> 899</span></a><span class="sd">        elements.</span>
</span><span id="PumpWoodRestService-900"><a href="#PumpWoodRestService-900"><span class="linenos"> 900</span></a>
</span><span id="PumpWoodRestService-901"><a href="#PumpWoodRestService-901"><span class="linenos"> 901</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-902"><a href="#PumpWoodRestService-902"><span class="linenos"> 902</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService-903"><a href="#PumpWoodRestService-903"><span class="linenos"> 903</span></a>
</span><span id="PumpWoodRestService-904"><a href="#PumpWoodRestService-904"><span class="linenos"> 904</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-905"><a href="#PumpWoodRestService-905"><span class="linenos"> 905</span></a><span class="sd">            request:</span>
</span><span id="PumpWoodRestService-906"><a href="#PumpWoodRestService-906"><span class="linenos"> 906</span></a><span class="sd">                Django request.</span>
</span><span id="PumpWoodRestService-907"><a href="#PumpWoodRestService-907"><span class="linenos"> 907</span></a><span class="sd">            action_name [str]:</span>
</span><span id="PumpWoodRestService-908"><a href="#PumpWoodRestService-908"><span class="linenos"> 908</span></a><span class="sd">                Action name.</span>
</span><span id="PumpWoodRestService-909"><a href="#PumpWoodRestService-909"><span class="linenos"> 909</span></a><span class="sd">            pk [pk]:</span>
</span><span id="PumpWoodRestService-910"><a href="#PumpWoodRestService-910"><span class="linenos"> 910</span></a><span class="sd">                Of the object that will be used to run the action. For</span>
</span><span id="PumpWoodRestService-911"><a href="#PumpWoodRestService-911"><span class="linenos"> 911</span></a><span class="sd">                staticmethods and classmethods the object should not be</span>
</span><span id="PumpWoodRestService-912"><a href="#PumpWoodRestService-912"><span class="linenos"> 912</span></a><span class="sd">                passed as argument.</span>
</span><span id="PumpWoodRestService-913"><a href="#PumpWoodRestService-913"><span class="linenos"> 913</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-914"><a href="#PumpWoodRestService-914"><span class="linenos"> 914</span></a><span class="sd">            Return a dictonary with keys:</span>
</span><span id="PumpWoodRestService-915"><a href="#PumpWoodRestService-915"><span class="linenos"> 915</span></a><span class="sd">            -</span>
</span><span id="PumpWoodRestService-916"><a href="#PumpWoodRestService-916"><span class="linenos"> 916</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService-917"><a href="#PumpWoodRestService-917"><span class="linenos"> 917</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService-918"><a href="#PumpWoodRestService-918"><span class="linenos"> 918</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is not</span>
</span><span id="PumpWoodRestService-919"><a href="#PumpWoodRestService-919"><span class="linenos"> 919</span></a><span class="sd">                a classmethod and not pk provided.&#39;. Indicates that the action</span>
</span><span id="PumpWoodRestService-920"><a href="#PumpWoodRestService-920"><span class="linenos"> 920</span></a><span class="sd">                is not a classmethod and the pk was not passed as function</span>
</span><span id="PumpWoodRestService-921"><a href="#PumpWoodRestService-921"><span class="linenos"> 921</span></a><span class="sd">                argument.</span>
</span><span id="PumpWoodRestService-922"><a href="#PumpWoodRestService-922"><span class="linenos"> 922</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService-923"><a href="#PumpWoodRestService-923"><span class="linenos"> 923</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is a</span>
</span><span id="PumpWoodRestService-924"><a href="#PumpWoodRestService-924"><span class="linenos"> 924</span></a><span class="sd">                classmethod and pk provided.&#39;. Indicates that the action is</span>
</span><span id="PumpWoodRestService-925"><a href="#PumpWoodRestService-925"><span class="linenos"> 925</span></a><span class="sd">                a classmethod, but a pk was passed as argument.</span>
</span><span id="PumpWoodRestService-926"><a href="#PumpWoodRestService-926"><span class="linenos"> 926</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService-927"><a href="#PumpWoodRestService-927"><span class="linenos"> 927</span></a><span class="sd">                &#39;Requested object {service_model}[{pk}] not found.&#39;.</span>
</span><span id="PumpWoodRestService-928"><a href="#PumpWoodRestService-928"><span class="linenos"> 928</span></a><span class="sd">                Indicates that the object with [pk] was not found on</span>
</span><span id="PumpWoodRestService-929"><a href="#PumpWoodRestService-929"><span class="linenos"> 929</span></a><span class="sd">                database.</span>
</span><span id="PumpWoodRestService-930"><a href="#PumpWoodRestService-930"><span class="linenos"> 930</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService-931"><a href="#PumpWoodRestService-931"><span class="linenos"> 931</span></a><span class="sd">                &#39;error when unserializing function arguments: [...]&#39;.</span>
</span><span id="PumpWoodRestService-932"><a href="#PumpWoodRestService-932"><span class="linenos"> 932</span></a><span class="sd">                Indicates that it was not possible to unserialize objects</span>
</span><span id="PumpWoodRestService-933"><a href="#PumpWoodRestService-933"><span class="linenos"> 933</span></a><span class="sd">                passed as function arguments. Pumpwood used function tips</span>
</span><span id="PumpWoodRestService-934"><a href="#PumpWoodRestService-934"><span class="linenos"> 934</span></a><span class="sd">                types to convert the arguments on correct types before</span>
</span><span id="PumpWoodRestService-935"><a href="#PumpWoodRestService-935"><span class="linenos"> 935</span></a><span class="sd">                passing them to function.</span>
</span><span id="PumpWoodRestService-936"><a href="#PumpWoodRestService-936"><span class="linenos"> 936</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-937"><a href="#PumpWoodRestService-937"><span class="linenos"> 937</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-938"><a href="#PumpWoodRestService-938"><span class="linenos"> 938</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="PumpWoodRestService-939"><a href="#PumpWoodRestService-939"><span class="linenos"> 939</span></a>        <span class="n">rest_action_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="PumpWoodRestService-940"><a href="#PumpWoodRestService-940"><span class="linenos"> 940</span></a>
</span><span id="PumpWoodRestService-941"><a href="#PumpWoodRestService-941"><span class="linenos"> 941</span></a>        <span class="k">if</span> <span class="n">action_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rest_action_names</span><span class="p">:</span>
</span><span id="PumpWoodRestService-942"><a href="#PumpWoodRestService-942"><span class="linenos"> 942</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-943"><a href="#PumpWoodRestService-943"><span class="linenos"> 943</span></a>                <span class="s2">&quot;There is no method </span><span class="si">{action}</span><span class="s2"> in rest actions &quot;</span>
</span><span id="PumpWoodRestService-944"><a href="#PumpWoodRestService-944"><span class="linenos"> 944</span></a>                <span class="s2">&quot;for </span><span class="si">{class_name}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-945"><a href="#PumpWoodRestService-945"><span class="linenos"> 945</span></a>                    <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService-946"><a href="#PumpWoodRestService-946"><span class="linenos"> 946</span></a>                    <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService-947"><a href="#PumpWoodRestService-947"><span class="linenos"> 947</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService-948"><a href="#PumpWoodRestService-948"><span class="linenos"> 948</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService-949"><a href="#PumpWoodRestService-949"><span class="linenos"> 949</span></a>
</span><span id="PumpWoodRestService-950"><a href="#PumpWoodRestService-950"><span class="linenos"> 950</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-951"><a href="#PumpWoodRestService-951"><span class="linenos"> 951</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="PumpWoodRestService-952"><a href="#PumpWoodRestService-952"><span class="linenos"> 952</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-953"><a href="#PumpWoodRestService-953"><span class="linenos"> 953</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is not &quot;</span>
</span><span id="PumpWoodRestService-954"><a href="#PumpWoodRestService-954"><span class="linenos"> 954</span></a>                <span class="s2">&quot;a classmethod and not pk provided.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-955"><a href="#PumpWoodRestService-955"><span class="linenos"> 955</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-956"><a href="#PumpWoodRestService-956"><span class="linenos"> 956</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService-957"><a href="#PumpWoodRestService-957"><span class="linenos"> 957</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService-958"><a href="#PumpWoodRestService-958"><span class="linenos"> 958</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-959"><a href="#PumpWoodRestService-959"><span class="linenos"> 959</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService-960"><a href="#PumpWoodRestService-960"><span class="linenos"> 960</span></a>
</span><span id="PumpWoodRestService-961"><a href="#PumpWoodRestService-961"><span class="linenos"> 961</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="PumpWoodRestService-962"><a href="#PumpWoodRestService-962"><span class="linenos"> 962</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-963"><a href="#PumpWoodRestService-963"><span class="linenos"> 963</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is a&quot;</span>
</span><span id="PumpWoodRestService-964"><a href="#PumpWoodRestService-964"><span class="linenos"> 964</span></a>                <span class="s2">&quot;classmethod and pk provided.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-965"><a href="#PumpWoodRestService-965"><span class="linenos"> 965</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-966"><a href="#PumpWoodRestService-966"><span class="linenos"> 966</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService-967"><a href="#PumpWoodRestService-967"><span class="linenos"> 967</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService-968"><a href="#PumpWoodRestService-968"><span class="linenos"> 968</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-969"><a href="#PumpWoodRestService-969"><span class="linenos"> 969</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService-970"><a href="#PumpWoodRestService-970"><span class="linenos"> 970</span></a>
</span><span id="PumpWoodRestService-971"><a href="#PumpWoodRestService-971"><span class="linenos"> 971</span></a>        <span class="n">object_dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-972"><a href="#PumpWoodRestService-972"><span class="linenos"> 972</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-973"><a href="#PumpWoodRestService-973"><span class="linenos"> 973</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-974"><a href="#PumpWoodRestService-974"><span class="linenos"> 974</span></a>            <span class="n">model_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="PumpWoodRestService-975"><a href="#PumpWoodRestService-975"><span class="linenos"> 975</span></a>            <span class="k">if</span> <span class="n">model_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-976"><a href="#PumpWoodRestService-976"><span class="linenos"> 976</span></a>                <span class="n">message_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-977"><a href="#PumpWoodRestService-977"><span class="linenos"> 977</span></a>                    <span class="s2">&quot;Requested object </span><span class="si">{service_model}</span><span class="s2">[</span><span class="si">{pk}</span><span class="s2">] not found.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-978"><a href="#PumpWoodRestService-978"><span class="linenos"> 978</span></a>                <span class="n">temp_service_model</span> <span class="o">=</span> \
</span><span id="PumpWoodRestService-979"><a href="#PumpWoodRestService-979"><span class="linenos"> 979</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService-980"><a href="#PumpWoodRestService-980"><span class="linenos"> 980</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="n">message_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-981"><a href="#PumpWoodRestService-981"><span class="linenos"> 981</span></a>                    <span class="n">service_model</span><span class="o">=</span><span class="n">temp_service_model</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService-982"><a href="#PumpWoodRestService-982"><span class="linenos"> 982</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService-983"><a href="#PumpWoodRestService-983"><span class="linenos"> 983</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService-984"><a href="#PumpWoodRestService-984"><span class="linenos"> 984</span></a>                        <span class="s2">&quot;service_model&quot;</span><span class="p">:</span> <span class="n">temp_service_model</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">})</span>
</span><span id="PumpWoodRestService-985"><a href="#PumpWoodRestService-985"><span class="linenos"> 985</span></a>
</span><span id="PumpWoodRestService-986"><a href="#PumpWoodRestService-986"><span class="linenos"> 986</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-987"><a href="#PumpWoodRestService-987"><span class="linenos"> 987</span></a>            <span class="n">object_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-988"><a href="#PumpWoodRestService-988"><span class="linenos"> 988</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-989"><a href="#PumpWoodRestService-989"><span class="linenos"> 989</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-990"><a href="#PumpWoodRestService-990"><span class="linenos"> 990</span></a>
</span><span id="PumpWoodRestService-991"><a href="#PumpWoodRestService-991"><span class="linenos"> 991</span></a>        <span class="n">loaded_parameters</span> <span class="o">=</span> <span class="n">load_action_parameters</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
</span><span id="PumpWoodRestService-992"><a href="#PumpWoodRestService-992"><span class="linenos"> 992</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">action</span><span class="p">(</span><span class="o">**</span><span class="n">loaded_parameters</span><span class="p">)</span>
</span><span id="PumpWoodRestService-993"><a href="#PumpWoodRestService-993"><span class="linenos"> 993</span></a>
</span><span id="PumpWoodRestService-994"><a href="#PumpWoodRestService-994"><span class="linenos"> 994</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="PumpWoodRestService-995"><a href="#PumpWoodRestService-995"><span class="linenos"> 995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="PumpWoodRestService-996"><a href="#PumpWoodRestService-996"><span class="linenos"> 996</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService-997"><a href="#PumpWoodRestService-997"><span class="linenos"> 997</span></a>                <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService-998"><a href="#PumpWoodRestService-998"><span class="linenos"> 998</span></a>                    <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService-999"><a href="#PumpWoodRestService-999"><span class="linenos"> 999</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1000"><a href="#PumpWoodRestService-1000"><span class="linenos">1000</span></a>
</span><span id="PumpWoodRestService-1001"><a href="#PumpWoodRestService-1001"><span class="linenos">1001</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService-1002"><a href="#PumpWoodRestService-1002"><span class="linenos">1002</span></a>            <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1003"><a href="#PumpWoodRestService-1003"><span class="linenos">1003</span></a>            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">object_dict</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1004"><a href="#PumpWoodRestService-1004"><span class="linenos">1004</span></a>
</span><span id="PumpWoodRestService-1005"><a href="#PumpWoodRestService-1005"><span class="linenos">1005</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService-1006"><a href="#PumpWoodRestService-1006"><span class="linenos">1006</span></a>    <span class="k">def</span> <span class="nf">cls_fields_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1007"><a href="#PumpWoodRestService-1007"><span class="linenos">1007</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1008"><a href="#PumpWoodRestService-1008"><span class="linenos">1008</span></a><span class="sd">        Return field options using serializer.</span>
</span><span id="PumpWoodRestService-1009"><a href="#PumpWoodRestService-1009"><span class="linenos">1009</span></a>
</span><span id="PumpWoodRestService-1010"><a href="#PumpWoodRestService-1010"><span class="linenos">1010</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-1011"><a href="#PumpWoodRestService-1011"><span class="linenos">1011</span></a><span class="sd">            No args.</span>
</span><span id="PumpWoodRestService-1012"><a href="#PumpWoodRestService-1012"><span class="linenos">1012</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-1013"><a href="#PumpWoodRestService-1013"><span class="linenos">1013</span></a><span class="sd">            Return information for each column to render search filters on</span>
</span><span id="PumpWoodRestService-1014"><a href="#PumpWoodRestService-1014"><span class="linenos">1014</span></a><span class="sd">            frontend. Each field will have:</span>
</span><span id="PumpWoodRestService-1015"><a href="#PumpWoodRestService-1015"><span class="linenos">1015</span></a><span class="sd">            - **column [str]:** Name of the column associated with the</span>
</span><span id="PumpWoodRestService-1016"><a href="#PumpWoodRestService-1016"><span class="linenos">1016</span></a><span class="sd">                field (same as the key).</span>
</span><span id="PumpWoodRestService-1017"><a href="#PumpWoodRestService-1017"><span class="linenos">1017</span></a><span class="sd">            - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="PumpWoodRestService-1018"><a href="#PumpWoodRestService-1018"><span class="linenos">1018</span></a><span class="sd">                using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1019"><a href="#PumpWoodRestService-1019"><span class="linenos">1019</span></a><span class="sd">            - **default [str]:** Defult value for column.</span>
</span><span id="PumpWoodRestService-1020"><a href="#PumpWoodRestService-1020"><span class="linenos">1020</span></a><span class="sd">            - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="PumpWoodRestService-1021"><a href="#PumpWoodRestService-1021"><span class="linenos">1021</span></a><span class="sd">                can be used to pass information about foreign key or</span>
</span><span id="PumpWoodRestService-1022"><a href="#PumpWoodRestService-1022"><span class="linenos">1022</span></a><span class="sd">                related fields.</span>
</span><span id="PumpWoodRestService-1023"><a href="#PumpWoodRestService-1023"><span class="linenos">1023</span></a><span class="sd">            - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="PumpWoodRestService-1024"><a href="#PumpWoodRestService-1024"><span class="linenos">1024</span></a><span class="sd">            - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="PumpWoodRestService-1025"><a href="#PumpWoodRestService-1025"><span class="linenos">1025</span></a><span class="sd">                collumn translated using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1026"><a href="#PumpWoodRestService-1026"><span class="linenos">1026</span></a><span class="sd">            - **indexed [str]:** If this column is indexed.</span>
</span><span id="PumpWoodRestService-1027"><a href="#PumpWoodRestService-1027"><span class="linenos">1027</span></a><span class="sd">            - **nullable [str]:** If this column is nullable.</span>
</span><span id="PumpWoodRestService-1028"><a href="#PumpWoodRestService-1028"><span class="linenos">1028</span></a><span class="sd">            - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="PumpWoodRestService-1029"><a href="#PumpWoodRestService-1029"><span class="linenos">1029</span></a><span class="sd">                key of the table. This is use full for tables with</span>
</span><span id="PumpWoodRestService-1030"><a href="#PumpWoodRestService-1030"><span class="linenos">1030</span></a><span class="sd">                composite pk.</span>
</span><span id="PumpWoodRestService-1031"><a href="#PumpWoodRestService-1031"><span class="linenos">1031</span></a><span class="sd">            - **read_only [str]:** If this column is read-only on</span>
</span><span id="PumpWoodRestService-1032"><a href="#PumpWoodRestService-1032"><span class="linenos">1032</span></a><span class="sd">                end-point. The results for this value may differ from</span>
</span><span id="PumpWoodRestService-1033"><a href="#PumpWoodRestService-1033"><span class="linenos">1033</span></a><span class="sd">                fill_validation due to `gui_readonly`.</span>
</span><span id="PumpWoodRestService-1034"><a href="#PumpWoodRestService-1034"><span class="linenos">1034</span></a><span class="sd">            - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="PumpWoodRestService-1035"><a href="#PumpWoodRestService-1035"><span class="linenos">1035</span></a><span class="sd">            - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="PumpWoodRestService-1036"><a href="#PumpWoodRestService-1036"><span class="linenos">1036</span></a><span class="sd">            - **in [str]:** If column type is options, this key will</span>
</span><span id="PumpWoodRestService-1037"><a href="#PumpWoodRestService-1037"><span class="linenos">1037</span></a><span class="sd">                indicates the accepted values for this field. This element</span>
</span><span id="PumpWoodRestService-1038"><a href="#PumpWoodRestService-1038"><span class="linenos">1038</span></a><span class="sd">                is a dictonary with keys:</span>
</span><span id="PumpWoodRestService-1039"><a href="#PumpWoodRestService-1039"><span class="linenos">1039</span></a><span class="sd">                - **description:** Human readble value for option.</span>
</span><span id="PumpWoodRestService-1040"><a href="#PumpWoodRestService-1040"><span class="linenos">1040</span></a><span class="sd">                - **description__verbose:** Human readble value for</span>
</span><span id="PumpWoodRestService-1041"><a href="#PumpWoodRestService-1041"><span class="linenos">1041</span></a><span class="sd">                    option translated by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1042"><a href="#PumpWoodRestService-1042"><span class="linenos">1042</span></a><span class="sd">                - **value:** Value of the option that will be saved on</span>
</span><span id="PumpWoodRestService-1043"><a href="#PumpWoodRestService-1043"><span class="linenos">1043</span></a><span class="sd">                    database, for save end-points use this value to</span>
</span><span id="PumpWoodRestService-1044"><a href="#PumpWoodRestService-1044"><span class="linenos">1044</span></a><span class="sd">                    modify the object.</span>
</span><span id="PumpWoodRestService-1045"><a href="#PumpWoodRestService-1045"><span class="linenos">1045</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1046"><a href="#PumpWoodRestService-1046"><span class="linenos">1046</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1047"><a href="#PumpWoodRestService-1047"><span class="linenos">1047</span></a>        <span class="n">dict_fields</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1048"><a href="#PumpWoodRestService-1048"><span class="linenos">1048</span></a>        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1049"><a href="#PumpWoodRestService-1049"><span class="linenos">1049</span></a>            <span class="n">is_relation</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;is_relation&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1050"><a href="#PumpWoodRestService-1050"><span class="linenos">1050</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1051"><a href="#PumpWoodRestService-1051"><span class="linenos">1051</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_relation</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1052"><a href="#PumpWoodRestService-1052"><span class="linenos">1052</span></a>                <span class="n">dict_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
</span><span id="PumpWoodRestService-1053"><a href="#PumpWoodRestService-1053"><span class="linenos">1053</span></a>
</span><span id="PumpWoodRestService-1054"><a href="#PumpWoodRestService-1054"><span class="linenos">1054</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService-1055"><a href="#PumpWoodRestService-1055"><span class="linenos">1055</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fields__</span><span class="si">{field}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService-1056"><a href="#PumpWoodRestService-1056"><span class="linenos">1056</span></a>
</span><span id="PumpWoodRestService-1057"><a href="#PumpWoodRestService-1057"><span class="linenos">1057</span></a>        <span class="c1"># Get read-only fields from serializer</span>
</span><span id="PumpWoodRestService-1058"><a href="#PumpWoodRestService-1058"><span class="linenos">1058</span></a>        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;read_only_fields&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="PumpWoodRestService-1059"><a href="#PumpWoodRestService-1059"><span class="linenos">1059</span></a>
</span><span id="PumpWoodRestService-1060"><a href="#PumpWoodRestService-1060"><span class="linenos">1060</span></a>        <span class="c1"># Get field serializers</span>
</span><span id="PumpWoodRestService-1061"><a href="#PumpWoodRestService-1061"><span class="linenos">1061</span></a>        <span class="n">serializer_fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1062"><a href="#PumpWoodRestService-1062"><span class="linenos">1062</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fields</span>
</span><span id="PumpWoodRestService-1063"><a href="#PumpWoodRestService-1063"><span class="linenos">1063</span></a>
</span><span id="PumpWoodRestService-1064"><a href="#PumpWoodRestService-1064"><span class="linenos">1064</span></a>        <span class="c1"># Get serializers associated with FKs and related models</span>
</span><span id="PumpWoodRestService-1065"><a href="#PumpWoodRestService-1065"><span class="linenos">1065</span></a>        <span class="n">microservice_fk_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1066"><a href="#PumpWoodRestService-1066"><span class="linenos">1066</span></a>        <span class="n">microservice_related_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1067"><a href="#PumpWoodRestService-1067"><span class="linenos">1067</span></a>
</span><span id="PumpWoodRestService-1068"><a href="#PumpWoodRestService-1068"><span class="linenos">1068</span></a>        <span class="n">all_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1069"><a href="#PumpWoodRestService-1069"><span class="linenos">1069</span></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_serializer</span> <span class="ow">in</span> <span class="n">serializer_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-1070"><a href="#PumpWoodRestService-1070"><span class="linenos">1070</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-1071"><a href="#PumpWoodRestService-1071"><span class="linenos">1071</span></a>            <span class="c1"># Do not create relations between models in search description #</span>
</span><span id="PumpWoodRestService-1072"><a href="#PumpWoodRestService-1072"><span class="linenos">1072</span></a>            <span class="n">is_microservice_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1073"><a href="#PumpWoodRestService-1073"><span class="linenos">1073</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceForeignKeyField</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1074"><a href="#PumpWoodRestService-1074"><span class="linenos">1074</span></a>            <span class="n">is_local_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1075"><a href="#PumpWoodRestService-1075"><span class="linenos">1075</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalForeignKeyField</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1076"><a href="#PumpWoodRestService-1076"><span class="linenos">1076</span></a>            <span class="k">if</span> <span class="n">is_microservice_fk</span> <span class="ow">or</span> <span class="n">is_local_fk</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1077"><a href="#PumpWoodRestService-1077"><span class="linenos">1077</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1078"><a href="#PumpWoodRestService-1078"><span class="linenos">1078</span></a>                <span class="n">microservice_fk_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="PumpWoodRestService-1079"><a href="#PumpWoodRestService-1079"><span class="linenos">1079</span></a>
</span><span id="PumpWoodRestService-1080"><a href="#PumpWoodRestService-1080"><span class="linenos">1080</span></a>            <span class="n">is_microservice_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1081"><a href="#PumpWoodRestService-1081"><span class="linenos">1081</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceRelatedField</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1082"><a href="#PumpWoodRestService-1082"><span class="linenos">1082</span></a>            <span class="n">is_local_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1083"><a href="#PumpWoodRestService-1083"><span class="linenos">1083</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalRelatedField</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1084"><a href="#PumpWoodRestService-1084"><span class="linenos">1084</span></a>            <span class="k">if</span> <span class="n">is_microservice_related</span> <span class="ow">or</span> <span class="n">is_local_related</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1085"><a href="#PumpWoodRestService-1085"><span class="linenos">1085</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1086"><a href="#PumpWoodRestService-1086"><span class="linenos">1086</span></a>                <span class="n">microservice_related_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="PumpWoodRestService-1087"><a href="#PumpWoodRestService-1087"><span class="linenos">1087</span></a>
</span><span id="PumpWoodRestService-1088"><a href="#PumpWoodRestService-1088"><span class="linenos">1088</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="n">dict_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_serializer</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1089"><a href="#PumpWoodRestService-1089"><span class="linenos">1089</span></a>            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1090"><a href="#PumpWoodRestService-1090"><span class="linenos">1090</span></a>                <span class="k">continue</span>
</span><span id="PumpWoodRestService-1091"><a href="#PumpWoodRestService-1091"><span class="linenos">1091</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService-1092"><a href="#PumpWoodRestService-1092"><span class="linenos">1092</span></a>
</span><span id="PumpWoodRestService-1093"><a href="#PumpWoodRestService-1093"><span class="linenos">1093</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1094"><a href="#PumpWoodRestService-1094"><span class="linenos">1094</span></a>
</span><span id="PumpWoodRestService-1095"><a href="#PumpWoodRestService-1095"><span class="linenos">1095</span></a>            <span class="c1"># Getting correspondent simple type</span>
</span><span id="PumpWoodRestService-1096"><a href="#PumpWoodRestService-1096"><span class="linenos">1096</span></a>            <span class="n">column_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1097"><a href="#PumpWoodRestService-1097"><span class="linenos">1097</span></a>            <span class="n">python_type</span> <span class="o">=</span> <span class="n">django_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column_type</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1098"><a href="#PumpWoodRestService-1098"><span class="linenos">1098</span></a>            <span class="k">if</span> <span class="n">python_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1099"><a href="#PumpWoodRestService-1099"><span class="linenos">1099</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-1100"><a href="#PumpWoodRestService-1100"><span class="linenos">1100</span></a>                    <span class="s2">&quot;Type [</span><span class="si">{column_type}</span><span class="s2">] not implemented in map dictionary &quot;</span>
</span><span id="PumpWoodRestService-1101"><a href="#PumpWoodRestService-1101"><span class="linenos">1101</span></a>                    <span class="s2">&quot;django type -&gt; python type&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1102"><a href="#PumpWoodRestService-1102"><span class="linenos">1102</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1103"><a href="#PumpWoodRestService-1103"><span class="linenos">1103</span></a>                    <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column_type</span><span class="o">=</span><span class="n">column_type</span><span class="p">))</span>
</span><span id="PumpWoodRestService-1104"><a href="#PumpWoodRestService-1104"><span class="linenos">1104</span></a>
</span><span id="PumpWoodRestService-1105"><a href="#PumpWoodRestService-1105"><span class="linenos">1105</span></a>            <span class="c1"># Getting default value</span>
</span><span id="PumpWoodRestService-1106"><a href="#PumpWoodRestService-1106"><span class="linenos">1106</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-1107"><a href="#PumpWoodRestService-1107"><span class="linenos">1107</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1108"><a href="#PumpWoodRestService-1108"><span class="linenos">1108</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1109"><a href="#PumpWoodRestService-1109"><span class="linenos">1109</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="PumpWoodRestService-1110"><a href="#PumpWoodRestService-1110"><span class="linenos">1110</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1111"><a href="#PumpWoodRestService-1111"><span class="linenos">1111</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1112"><a href="#PumpWoodRestService-1112"><span class="linenos">1112</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="PumpWoodRestService-1113"><a href="#PumpWoodRestService-1113"><span class="linenos">1113</span></a>
</span><span id="PumpWoodRestService-1114"><a href="#PumpWoodRestService-1114"><span class="linenos">1114</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1115"><a href="#PumpWoodRestService-1115"><span class="linenos">1115</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-1116"><a href="#PumpWoodRestService-1116"><span class="linenos">1116</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1117"><a href="#PumpWoodRestService-1117"><span class="linenos">1117</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1118"><a href="#PumpWoodRestService-1118"><span class="linenos">1118</span></a>
</span><span id="PumpWoodRestService-1119"><a href="#PumpWoodRestService-1119"><span class="linenos">1119</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-1120"><a href="#PumpWoodRestService-1120"><span class="linenos">1120</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1121"><a href="#PumpWoodRestService-1121"><span class="linenos">1121</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="PumpWoodRestService-1122"><a href="#PumpWoodRestService-1122"><span class="linenos">1122</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1123"><a href="#PumpWoodRestService-1123"><span class="linenos">1123</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">column</span>
</span><span id="PumpWoodRestService-1124"><a href="#PumpWoodRestService-1124"><span class="linenos">1124</span></a>
</span><span id="PumpWoodRestService-1125"><a href="#PumpWoodRestService-1125"><span class="linenos">1125</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1126"><a href="#PumpWoodRestService-1126"><span class="linenos">1126</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1127"><a href="#PumpWoodRestService-1127"><span class="linenos">1127</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1128"><a href="#PumpWoodRestService-1128"><span class="linenos">1128</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1129"><a href="#PumpWoodRestService-1129"><span class="linenos">1129</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1130"><a href="#PumpWoodRestService-1130"><span class="linenos">1130</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1131"><a href="#PumpWoodRestService-1131"><span class="linenos">1131</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-1132"><a href="#PumpWoodRestService-1132"><span class="linenos">1132</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1133"><a href="#PumpWoodRestService-1133"><span class="linenos">1133</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">column</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1134"><a href="#PumpWoodRestService-1134"><span class="linenos">1134</span></a>                <span class="s2">&quot;column__verbose&quot;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1135"><a href="#PumpWoodRestService-1135"><span class="linenos">1135</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1136"><a href="#PumpWoodRestService-1136"><span class="linenos">1136</span></a>                <span class="s2">&quot;help_text__verbose&quot;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1137"><a href="#PumpWoodRestService-1137"><span class="linenos">1137</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">python_type</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1138"><a href="#PumpWoodRestService-1138"><span class="linenos">1138</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1139"><a href="#PumpWoodRestService-1139"><span class="linenos">1139</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1140"><a href="#PumpWoodRestService-1140"><span class="linenos">1140</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1141"><a href="#PumpWoodRestService-1141"><span class="linenos">1141</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1142"><a href="#PumpWoodRestService-1142"><span class="linenos">1142</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-1143"><a href="#PumpWoodRestService-1143"><span class="linenos">1143</span></a>                    <span class="p">(</span><span class="n">column</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="PumpWoodRestService-1144"><a href="#PumpWoodRestService-1144"><span class="linenos">1144</span></a>                    <span class="p">(</span><span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1145"><a href="#PumpWoodRestService-1145"><span class="linenos">1145</span></a>                <span class="p">),</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="p">{}}</span>
</span><span id="PumpWoodRestService-1146"><a href="#PumpWoodRestService-1146"><span class="linenos">1146</span></a>
</span><span id="PumpWoodRestService-1147"><a href="#PumpWoodRestService-1147"><span class="linenos">1147</span></a>            <span class="c1"># Get choice options if avaiable</span>
</span><span id="PumpWoodRestService-1148"><a href="#PumpWoodRestService-1148"><span class="linenos">1148</span></a>            <span class="n">choices</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1149"><a href="#PumpWoodRestService-1149"><span class="linenos">1149</span></a>            <span class="k">if</span> <span class="n">choices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1150"><a href="#PumpWoodRestService-1150"><span class="linenos">1150</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;options&quot;</span>
</span><span id="PumpWoodRestService-1151"><a href="#PumpWoodRestService-1151"><span class="linenos">1151</span></a>                <span class="n">in_list</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService-1152"><a href="#PumpWoodRestService-1152"><span class="linenos">1152</span></a>                <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1153"><a href="#PumpWoodRestService-1153"><span class="linenos">1153</span></a>                    <span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1154"><a href="#PumpWoodRestService-1154"><span class="linenos">1154</span></a>                        <span class="n">sentence</span><span class="o">=</span><span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__choices&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1155"><a href="#PumpWoodRestService-1155"><span class="linenos">1155</span></a>                    <span class="n">in_list</span><span class="p">[</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-1156"><a href="#PumpWoodRestService-1156"><span class="linenos">1156</span></a>                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="PumpWoodRestService-1157"><a href="#PumpWoodRestService-1157"><span class="linenos">1157</span></a>                        <span class="s2">&quot;description__verbose&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1158"><a href="#PumpWoodRestService-1158"><span class="linenos">1158</span></a>                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
</span><span id="PumpWoodRestService-1159"><a href="#PumpWoodRestService-1159"><span class="linenos">1159</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_list</span>
</span><span id="PumpWoodRestService-1160"><a href="#PumpWoodRestService-1160"><span class="linenos">1160</span></a>
</span><span id="PumpWoodRestService-1161"><a href="#PumpWoodRestService-1161"><span class="linenos">1161</span></a>            <span class="c1"># Set autoincrement for primary keys</span>
</span><span id="PumpWoodRestService-1162"><a href="#PumpWoodRestService-1162"><span class="linenos">1162</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1163"><a href="#PumpWoodRestService-1163"><span class="linenos">1163</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="PumpWoodRestService-1164"><a href="#PumpWoodRestService-1164"><span class="linenos">1164</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#autoincrement#&quot;</span>
</span><span id="PumpWoodRestService-1165"><a href="#PumpWoodRestService-1165"><span class="linenos">1165</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;doc_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;object primary key&quot;</span>
</span><span id="PumpWoodRestService-1166"><a href="#PumpWoodRestService-1166"><span class="linenos">1166</span></a>
</span><span id="PumpWoodRestService-1167"><a href="#PumpWoodRestService-1167"><span class="linenos">1167</span></a>            <span class="c1"># Ajust type if file</span>
</span><span id="PumpWoodRestService-1168"><a href="#PumpWoodRestService-1168"><span class="linenos">1168</span></a>            <span class="n">file_field</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1169"><a href="#PumpWoodRestService-1169"><span class="linenos">1169</span></a>            <span class="k">if</span> <span class="n">file_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1170"><a href="#PumpWoodRestService-1170"><span class="linenos">1170</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
</span><span id="PumpWoodRestService-1171"><a href="#PumpWoodRestService-1171"><span class="linenos">1171</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;extra_info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-1172"><a href="#PumpWoodRestService-1172"><span class="linenos">1172</span></a>                    <span class="s2">&quot;permited_file_types&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">}</span>
</span><span id="PumpWoodRestService-1173"><a href="#PumpWoodRestService-1173"><span class="linenos">1173</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService-1174"><a href="#PumpWoodRestService-1174"><span class="linenos">1174</span></a>
</span><span id="PumpWoodRestService-1175"><a href="#PumpWoodRestService-1175"><span class="linenos">1175</span></a>        <span class="c1">#############################################</span>
</span><span id="PumpWoodRestService-1176"><a href="#PumpWoodRestService-1176"><span class="linenos">1176</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="PumpWoodRestService-1177"><a href="#PumpWoodRestService-1177"><span class="linenos">1177</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_fk_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-1178"><a href="#PumpWoodRestService-1178"><span class="linenos">1178</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1179"><a href="#PumpWoodRestService-1179"><span class="linenos">1179</span></a>            <span class="k">if</span> <span class="n">column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1180"><a href="#PumpWoodRestService-1180"><span class="linenos">1180</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService-1181"><a href="#PumpWoodRestService-1181"><span class="linenos">1181</span></a>                    <span class="s2">&quot;Foreign Key [</span><span class="si">{key}</span><span class="s2">] was not found as model_class &quot;</span>
</span><span id="PumpWoodRestService-1182"><a href="#PumpWoodRestService-1182"><span class="linenos">1182</span></a>                    <span class="s2">&quot;[</span><span class="si">{model_class}</span><span class="s2">] fields&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1183"><a href="#PumpWoodRestService-1183"><span class="linenos">1183</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodOtherException</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1184"><a href="#PumpWoodRestService-1184"><span class="linenos">1184</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1185"><a href="#PumpWoodRestService-1185"><span class="linenos">1185</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1186"><a href="#PumpWoodRestService-1186"><span class="linenos">1186</span></a>
</span><span id="PumpWoodRestService-1187"><a href="#PumpWoodRestService-1187"><span class="linenos">1187</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1188"><a href="#PumpWoodRestService-1188"><span class="linenos">1188</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1189"><a href="#PumpWoodRestService-1189"><span class="linenos">1189</span></a>
</span><span id="PumpWoodRestService-1190"><a href="#PumpWoodRestService-1190"><span class="linenos">1190</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1191"><a href="#PumpWoodRestService-1191"><span class="linenos">1191</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PumpWoodRestService-1192"><a href="#PumpWoodRestService-1192"><span class="linenos">1192</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1193"><a href="#PumpWoodRestService-1193"><span class="linenos">1193</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1194"><a href="#PumpWoodRestService-1194"><span class="linenos">1194</span></a>            <span class="n">null</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1195"><a href="#PumpWoodRestService-1195"><span class="linenos">1195</span></a>
</span><span id="PumpWoodRestService-1196"><a href="#PumpWoodRestService-1196"><span class="linenos">1196</span></a>            <span class="c1"># Getting default value</span>
</span><span id="PumpWoodRestService-1197"><a href="#PumpWoodRestService-1197"><span class="linenos">1197</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService-1198"><a href="#PumpWoodRestService-1198"><span class="linenos">1198</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1199"><a href="#PumpWoodRestService-1199"><span class="linenos">1199</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1200"><a href="#PumpWoodRestService-1200"><span class="linenos">1200</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="PumpWoodRestService-1201"><a href="#PumpWoodRestService-1201"><span class="linenos">1201</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1202"><a href="#PumpWoodRestService-1202"><span class="linenos">1202</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1203"><a href="#PumpWoodRestService-1203"><span class="linenos">1203</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="PumpWoodRestService-1204"><a href="#PumpWoodRestService-1204"><span class="linenos">1204</span></a>
</span><span id="PumpWoodRestService-1205"><a href="#PumpWoodRestService-1205"><span class="linenos">1205</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1206"><a href="#PumpWoodRestService-1206"><span class="linenos">1206</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1207"><a href="#PumpWoodRestService-1207"><span class="linenos">1207</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1208"><a href="#PumpWoodRestService-1208"><span class="linenos">1208</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1209"><a href="#PumpWoodRestService-1209"><span class="linenos">1209</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-1210"><a href="#PumpWoodRestService-1210"><span class="linenos">1210</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1211"><a href="#PumpWoodRestService-1211"><span class="linenos">1211</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1212"><a href="#PumpWoodRestService-1212"><span class="linenos">1212</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1213"><a href="#PumpWoodRestService-1213"><span class="linenos">1213</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1214"><a href="#PumpWoodRestService-1214"><span class="linenos">1214</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1215"><a href="#PumpWoodRestService-1215"><span class="linenos">1215</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;foreign_key&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1216"><a href="#PumpWoodRestService-1216"><span class="linenos">1216</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1217"><a href="#PumpWoodRestService-1217"><span class="linenos">1217</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1218"><a href="#PumpWoodRestService-1218"><span class="linenos">1218</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1219"><a href="#PumpWoodRestService-1219"><span class="linenos">1219</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1220"><a href="#PumpWoodRestService-1220"><span class="linenos">1220</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1221"><a href="#PumpWoodRestService-1221"><span class="linenos">1221</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="PumpWoodRestService-1222"><a href="#PumpWoodRestService-1222"><span class="linenos">1222</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService-1223"><a href="#PumpWoodRestService-1223"><span class="linenos">1223</span></a>
</span><span id="PumpWoodRestService-1224"><a href="#PumpWoodRestService-1224"><span class="linenos">1224</span></a>        <span class="c1">#############################################</span>
</span><span id="PumpWoodRestService-1225"><a href="#PumpWoodRestService-1225"><span class="linenos">1225</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="PumpWoodRestService-1226"><a href="#PumpWoodRestService-1226"><span class="linenos">1226</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_related_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-1227"><a href="#PumpWoodRestService-1227"><span class="linenos">1227</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1228"><a href="#PumpWoodRestService-1228"><span class="linenos">1228</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1229"><a href="#PumpWoodRestService-1229"><span class="linenos">1229</span></a>
</span><span id="PumpWoodRestService-1230"><a href="#PumpWoodRestService-1230"><span class="linenos">1230</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1231"><a href="#PumpWoodRestService-1231"><span class="linenos">1231</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1232"><a href="#PumpWoodRestService-1232"><span class="linenos">1232</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1233"><a href="#PumpWoodRestService-1233"><span class="linenos">1233</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1234"><a href="#PumpWoodRestService-1234"><span class="linenos">1234</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService-1235"><a href="#PumpWoodRestService-1235"><span class="linenos">1235</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1236"><a href="#PumpWoodRestService-1236"><span class="linenos">1236</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1237"><a href="#PumpWoodRestService-1237"><span class="linenos">1237</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1238"><a href="#PumpWoodRestService-1238"><span class="linenos">1238</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1239"><a href="#PumpWoodRestService-1239"><span class="linenos">1239</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1240"><a href="#PumpWoodRestService-1240"><span class="linenos">1240</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;related_model&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1241"><a href="#PumpWoodRestService-1241"><span class="linenos">1241</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1242"><a href="#PumpWoodRestService-1242"><span class="linenos">1242</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1243"><a href="#PumpWoodRestService-1243"><span class="linenos">1243</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1244"><a href="#PumpWoodRestService-1244"><span class="linenos">1244</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1245"><a href="#PumpWoodRestService-1245"><span class="linenos">1245</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1246"><a href="#PumpWoodRestService-1246"><span class="linenos">1246</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="PumpWoodRestService-1247"><a href="#PumpWoodRestService-1247"><span class="linenos">1247</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService-1248"><a href="#PumpWoodRestService-1248"><span class="linenos">1248</span></a>        <span class="k">return</span> <span class="n">all_info</span>
</span><span id="PumpWoodRestService-1249"><a href="#PumpWoodRestService-1249"><span class="linenos">1249</span></a>
</span><span id="PumpWoodRestService-1250"><a href="#PumpWoodRestService-1250"><span class="linenos">1250</span></a>    <span class="k">def</span> <span class="nf">search_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService-1251"><a href="#PumpWoodRestService-1251"><span class="linenos">1251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1252"><a href="#PumpWoodRestService-1252"><span class="linenos">1252</span></a><span class="sd">        Return options to be used in list funciton.</span>
</span><span id="PumpWoodRestService-1253"><a href="#PumpWoodRestService-1253"><span class="linenos">1253</span></a>
</span><span id="PumpWoodRestService-1254"><a href="#PumpWoodRestService-1254"><span class="linenos">1254</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="PumpWoodRestService-1255"><a href="#PumpWoodRestService-1255"><span class="linenos">1255</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1256"><a href="#PumpWoodRestService-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span><span id="PumpWoodRestService-1257"><a href="#PumpWoodRestService-1257"><span class="linenos">1257</span></a>
</span><span id="PumpWoodRestService-1258"><a href="#PumpWoodRestService-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">fill_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService-1259"><a href="#PumpWoodRestService-1259"><span class="linenos">1259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1260"><a href="#PumpWoodRestService-1260"><span class="linenos">1260</span></a><span class="sd">        Return options for object update acording its partial data.</span>
</span><span id="PumpWoodRestService-1261"><a href="#PumpWoodRestService-1261"><span class="linenos">1261</span></a>
</span><span id="PumpWoodRestService-1262"><a href="#PumpWoodRestService-1262"><span class="linenos">1262</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="PumpWoodRestService-1263"><a href="#PumpWoodRestService-1263"><span class="linenos">1263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1264"><a href="#PumpWoodRestService-1264"><span class="linenos">1264</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span><span id="PumpWoodRestService-1265"><a href="#PumpWoodRestService-1265"><span class="linenos">1265</span></a>
</span><span id="PumpWoodRestService-1266"><a href="#PumpWoodRestService-1266"><span class="linenos">1266</span></a>    <span class="k">def</span> <span class="nf">list_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1267"><a href="#PumpWoodRestService-1267"><span class="linenos">1267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1268"><a href="#PumpWoodRestService-1268"><span class="linenos">1268</span></a><span class="sd">        Return information to render list views on frontend.</span>
</span><span id="PumpWoodRestService-1269"><a href="#PumpWoodRestService-1269"><span class="linenos">1269</span></a>
</span><span id="PumpWoodRestService-1270"><a href="#PumpWoodRestService-1270"><span class="linenos">1270</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-1271"><a href="#PumpWoodRestService-1271"><span class="linenos">1271</span></a><span class="sd">        No payload data.</span>
</span><span id="PumpWoodRestService-1272"><a href="#PumpWoodRestService-1272"><span class="linenos">1272</span></a>
</span><span id="PumpWoodRestService-1273"><a href="#PumpWoodRestService-1273"><span class="linenos">1273</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-1274"><a href="#PumpWoodRestService-1274"><span class="linenos">1274</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService-1275"><a href="#PumpWoodRestService-1275"><span class="linenos">1275</span></a>
</span><span id="PumpWoodRestService-1276"><a href="#PumpWoodRestService-1276"><span class="linenos">1276</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-1277"><a href="#PumpWoodRestService-1277"><span class="linenos">1277</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-1278"><a href="#PumpWoodRestService-1278"><span class="linenos">1278</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-1279"><a href="#PumpWoodRestService-1279"><span class="linenos">1279</span></a><span class="sd">            Return a dictionary with keys:</span>
</span><span id="PumpWoodRestService-1280"><a href="#PumpWoodRestService-1280"><span class="linenos">1280</span></a><span class="sd">            - **list_fields[List[str]]:** Return a list of default list fields</span>
</span><span id="PumpWoodRestService-1281"><a href="#PumpWoodRestService-1281"><span class="linenos">1281</span></a><span class="sd">                that should be redendered on list view.</span>
</span><span id="PumpWoodRestService-1282"><a href="#PumpWoodRestService-1282"><span class="linenos">1282</span></a><span class="sd">            - **field_type [dict]:** Return information for each column to</span>
</span><span id="PumpWoodRestService-1283"><a href="#PumpWoodRestService-1283"><span class="linenos">1283</span></a><span class="sd">                render search filters on frontend. Each field will have:</span>
</span><span id="PumpWoodRestService-1284"><a href="#PumpWoodRestService-1284"><span class="linenos">1284</span></a><span class="sd">                - **column [str]:** Name of the column associated with the</span>
</span><span id="PumpWoodRestService-1285"><a href="#PumpWoodRestService-1285"><span class="linenos">1285</span></a><span class="sd">                    field (same as the key).</span>
</span><span id="PumpWoodRestService-1286"><a href="#PumpWoodRestService-1286"><span class="linenos">1286</span></a><span class="sd">                - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="PumpWoodRestService-1287"><a href="#PumpWoodRestService-1287"><span class="linenos">1287</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1288"><a href="#PumpWoodRestService-1288"><span class="linenos">1288</span></a><span class="sd">                - **default [str]:** Defult value for column.</span>
</span><span id="PumpWoodRestService-1289"><a href="#PumpWoodRestService-1289"><span class="linenos">1289</span></a><span class="sd">                - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="PumpWoodRestService-1290"><a href="#PumpWoodRestService-1290"><span class="linenos">1290</span></a><span class="sd">                    can be used to pass information about foreign key or</span>
</span><span id="PumpWoodRestService-1291"><a href="#PumpWoodRestService-1291"><span class="linenos">1291</span></a><span class="sd">                    related fields.</span>
</span><span id="PumpWoodRestService-1292"><a href="#PumpWoodRestService-1292"><span class="linenos">1292</span></a><span class="sd">                - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="PumpWoodRestService-1293"><a href="#PumpWoodRestService-1293"><span class="linenos">1293</span></a><span class="sd">                - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="PumpWoodRestService-1294"><a href="#PumpWoodRestService-1294"><span class="linenos">1294</span></a><span class="sd">                    collumn translated using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1295"><a href="#PumpWoodRestService-1295"><span class="linenos">1295</span></a><span class="sd">                - **indexed [str]:** If this column is indexed.</span>
</span><span id="PumpWoodRestService-1296"><a href="#PumpWoodRestService-1296"><span class="linenos">1296</span></a><span class="sd">                - **nullable [str]:** If this column is nullable.</span>
</span><span id="PumpWoodRestService-1297"><a href="#PumpWoodRestService-1297"><span class="linenos">1297</span></a><span class="sd">                - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="PumpWoodRestService-1298"><a href="#PumpWoodRestService-1298"><span class="linenos">1298</span></a><span class="sd">                    key of the table. This is use full for tables with</span>
</span><span id="PumpWoodRestService-1299"><a href="#PumpWoodRestService-1299"><span class="linenos">1299</span></a><span class="sd">                    composite pk.</span>
</span><span id="PumpWoodRestService-1300"><a href="#PumpWoodRestService-1300"><span class="linenos">1300</span></a><span class="sd">                - **read_only [str]:** If this column is read-only on</span>
</span><span id="PumpWoodRestService-1301"><a href="#PumpWoodRestService-1301"><span class="linenos">1301</span></a><span class="sd">                    end-point. The results for this value may differ from</span>
</span><span id="PumpWoodRestService-1302"><a href="#PumpWoodRestService-1302"><span class="linenos">1302</span></a><span class="sd">                    fill_validation due to `gui_readonly`.</span>
</span><span id="PumpWoodRestService-1303"><a href="#PumpWoodRestService-1303"><span class="linenos">1303</span></a><span class="sd">                - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="PumpWoodRestService-1304"><a href="#PumpWoodRestService-1304"><span class="linenos">1304</span></a><span class="sd">                - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="PumpWoodRestService-1305"><a href="#PumpWoodRestService-1305"><span class="linenos">1305</span></a><span class="sd">                - **in [str]:** If column type is options, this key will</span>
</span><span id="PumpWoodRestService-1306"><a href="#PumpWoodRestService-1306"><span class="linenos">1306</span></a><span class="sd">                    indicates the accepted values for this field. This element</span>
</span><span id="PumpWoodRestService-1307"><a href="#PumpWoodRestService-1307"><span class="linenos">1307</span></a><span class="sd">                    is a dictonary with keys:</span>
</span><span id="PumpWoodRestService-1308"><a href="#PumpWoodRestService-1308"><span class="linenos">1308</span></a><span class="sd">                    - **description:** Human readble value for option.</span>
</span><span id="PumpWoodRestService-1309"><a href="#PumpWoodRestService-1309"><span class="linenos">1309</span></a><span class="sd">                    - **description__verbose:** Human readble value for</span>
</span><span id="PumpWoodRestService-1310"><a href="#PumpWoodRestService-1310"><span class="linenos">1310</span></a><span class="sd">                        option translated by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1311"><a href="#PumpWoodRestService-1311"><span class="linenos">1311</span></a><span class="sd">                    - **value:** Value of the option that will be saved on</span>
</span><span id="PumpWoodRestService-1312"><a href="#PumpWoodRestService-1312"><span class="linenos">1312</span></a><span class="sd">                        database, for save end-points use this value to</span>
</span><span id="PumpWoodRestService-1313"><a href="#PumpWoodRestService-1313"><span class="linenos">1313</span></a><span class="sd">                        modify the object.</span>
</span><span id="PumpWoodRestService-1314"><a href="#PumpWoodRestService-1314"><span class="linenos">1314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1315"><a href="#PumpWoodRestService-1315"><span class="linenos">1315</span></a>        <span class="n">list_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1316"><a href="#PumpWoodRestService-1316"><span class="linenos">1316</span></a>        <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1317"><a href="#PumpWoodRestService-1317"><span class="linenos">1317</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService-1318"><a href="#PumpWoodRestService-1318"><span class="linenos">1318</span></a>            <span class="s2">&quot;default_list_fields&quot;</span><span class="p">:</span> <span class="n">list_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1319"><a href="#PumpWoodRestService-1319"><span class="linenos">1319</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fields_options</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1320"><a href="#PumpWoodRestService-1320"><span class="linenos">1320</span></a>
</span><span id="PumpWoodRestService-1321"><a href="#PumpWoodRestService-1321"><span class="linenos">1321</span></a>    <span class="k">def</span> <span class="nf">retrieve_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1322"><a href="#PumpWoodRestService-1322"><span class="linenos">1322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1323"><a href="#PumpWoodRestService-1323"><span class="linenos">1323</span></a><span class="sd">        Return information to correctly create retrieve view.</span>
</span><span id="PumpWoodRestService-1324"><a href="#PumpWoodRestService-1324"><span class="linenos">1324</span></a>
</span><span id="PumpWoodRestService-1325"><a href="#PumpWoodRestService-1325"><span class="linenos">1325</span></a><span class="sd">        Field set are set using gui_retrieve_fieldset attribute of the</span>
</span><span id="PumpWoodRestService-1326"><a href="#PumpWoodRestService-1326"><span class="linenos">1326</span></a><span class="sd">        class. It is used classes to define each fieldset.</span>
</span><span id="PumpWoodRestService-1327"><a href="#PumpWoodRestService-1327"><span class="linenos">1327</span></a>
</span><span id="PumpWoodRestService-1328"><a href="#PumpWoodRestService-1328"><span class="linenos">1328</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-1329"><a href="#PumpWoodRestService-1329"><span class="linenos">1329</span></a><span class="sd">        No payload data.</span>
</span><span id="PumpWoodRestService-1330"><a href="#PumpWoodRestService-1330"><span class="linenos">1330</span></a>
</span><span id="PumpWoodRestService-1331"><a href="#PumpWoodRestService-1331"><span class="linenos">1331</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-1332"><a href="#PumpWoodRestService-1332"><span class="linenos">1332</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService-1333"><a href="#PumpWoodRestService-1333"><span class="linenos">1333</span></a>
</span><span id="PumpWoodRestService-1334"><a href="#PumpWoodRestService-1334"><span class="linenos">1334</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-1335"><a href="#PumpWoodRestService-1335"><span class="linenos">1335</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-1336"><a href="#PumpWoodRestService-1336"><span class="linenos">1336</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService-1337"><a href="#PumpWoodRestService-1337"><span class="linenos">1337</span></a><span class="sd">            Return a dictonary with information to render retrieve</span>
</span><span id="PumpWoodRestService-1338"><a href="#PumpWoodRestService-1338"><span class="linenos">1338</span></a><span class="sd">            views on front-ends. Returns a dictonary with keys:</span>
</span><span id="PumpWoodRestService-1339"><a href="#PumpWoodRestService-1339"><span class="linenos">1339</span></a><span class="sd">            - **fieldset [List[dict]]:** A list of dictionaries with</span>
</span><span id="PumpWoodRestService-1340"><a href="#PumpWoodRestService-1340"><span class="linenos">1340</span></a><span class="sd">                information for rendering the retrieve page on frontend.</span>
</span><span id="PumpWoodRestService-1341"><a href="#PumpWoodRestService-1341"><span class="linenos">1341</span></a><span class="sd">                - **fields [List[str]]:** List of fields to be rendered at</span>
</span><span id="PumpWoodRestService-1342"><a href="#PumpWoodRestService-1342"><span class="linenos">1342</span></a><span class="sd">                    fieldset.</span>
</span><span id="PumpWoodRestService-1343"><a href="#PumpWoodRestService-1343"><span class="linenos">1343</span></a><span class="sd">                - **name [str]:** Name of the fieldset.</span>
</span><span id="PumpWoodRestService-1344"><a href="#PumpWoodRestService-1344"><span class="linenos">1344</span></a><span class="sd">                - **name__verbose [str]:** Name of the fieldset translated</span>
</span><span id="PumpWoodRestService-1345"><a href="#PumpWoodRestService-1345"><span class="linenos">1345</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService-1346"><a href="#PumpWoodRestService-1346"><span class="linenos">1346</span></a><span class="sd">            - **verbose_field [str]:** String that can be used to create</span>
</span><span id="PumpWoodRestService-1347"><a href="#PumpWoodRestService-1347"><span class="linenos">1347</span></a><span class="sd">                user readble string at frontend.</span>
</span><span id="PumpWoodRestService-1348"><a href="#PumpWoodRestService-1348"><span class="linenos">1348</span></a>
</span><span id="PumpWoodRestService-1349"><a href="#PumpWoodRestService-1349"><span class="linenos">1349</span></a><span class="sd">            Example:</span>
</span><span id="PumpWoodRestService-1350"><a href="#PumpWoodRestService-1350"><span class="linenos">1350</span></a><span class="sd">            ```python</span>
</span><span id="PumpWoodRestService-1351"><a href="#PumpWoodRestService-1351"><span class="linenos">1351</span></a><span class="sd">            {&#39;fieldset&#39;: [{</span>
</span><span id="PumpWoodRestService-1352"><a href="#PumpWoodRestService-1352"><span class="linenos">1352</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService-1353"><a href="#PumpWoodRestService-1353"><span class="linenos">1353</span></a><span class="sd">                    &#39;status&#39;, &#39;alias&#39;, &#39;description&#39;, &#39;notes&#39;, &#39;dimensions&#39;,</span>
</span><span id="PumpWoodRestService-1354"><a href="#PumpWoodRestService-1354"><span class="linenos">1354</span></a><span class="sd">                    &#39;updated_by&#39;, &#39;updated_at&#39;],</span>
</span><span id="PumpWoodRestService-1355"><a href="#PumpWoodRestService-1355"><span class="linenos">1355</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;main&#39;</span>
</span><span id="PumpWoodRestService-1356"><a href="#PumpWoodRestService-1356"><span class="linenos">1356</span></a><span class="sd">                &#39;name&#39;: &#39;main&#39;},</span>
</span><span id="PumpWoodRestService-1357"><a href="#PumpWoodRestService-1357"><span class="linenos">1357</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService-1358"><a href="#PumpWoodRestService-1358"><span class="linenos">1358</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService-1359"><a href="#PumpWoodRestService-1359"><span class="linenos">1359</span></a><span class="sd">                    &#39;metabase_id&#39;, &#39;auto_embedding&#39;,</span>
</span><span id="PumpWoodRestService-1360"><a href="#PumpWoodRestService-1360"><span class="linenos">1360</span></a><span class="sd">                    &#39;object_model_class&#39;, &#39;object_pk&#39;],</span>
</span><span id="PumpWoodRestService-1361"><a href="#PumpWoodRestService-1361"><span class="linenos">1361</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;embedding&#39;</span>
</span><span id="PumpWoodRestService-1362"><a href="#PumpWoodRestService-1362"><span class="linenos">1362</span></a><span class="sd">                &#39;name&#39;: &#39;embedding&#39;},</span>
</span><span id="PumpWoodRestService-1363"><a href="#PumpWoodRestService-1363"><span class="linenos">1363</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService-1364"><a href="#PumpWoodRestService-1364"><span class="linenos">1364</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService-1365"><a href="#PumpWoodRestService-1365"><span class="linenos">1365</span></a><span class="sd">                    &#39;expire_in_min&#39;, &#39;default_theme&#39;, &#39;default_is_bordered&#39;,</span>
</span><span id="PumpWoodRestService-1366"><a href="#PumpWoodRestService-1366"><span class="linenos">1366</span></a><span class="sd">                    &#39;default_is_titled&#39;],</span>
</span><span id="PumpWoodRestService-1367"><a href="#PumpWoodRestService-1367"><span class="linenos">1367</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;config&#39;</span>
</span><span id="PumpWoodRestService-1368"><a href="#PumpWoodRestService-1368"><span class="linenos">1368</span></a><span class="sd">                &#39;name&#39;: &#39;config&#39;},</span>
</span><span id="PumpWoodRestService-1369"><a href="#PumpWoodRestService-1369"><span class="linenos">1369</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService-1370"><a href="#PumpWoodRestService-1370"><span class="linenos">1370</span></a><span class="sd">                &#39;fields&#39;: [&#39;extra_info&#39;],</span>
</span><span id="PumpWoodRestService-1371"><a href="#PumpWoodRestService-1371"><span class="linenos">1371</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;extra_info&#39;</span>
</span><span id="PumpWoodRestService-1372"><a href="#PumpWoodRestService-1372"><span class="linenos">1372</span></a><span class="sd">                &#39;name&#39;: &#39;extra_info&#39;</span>
</span><span id="PumpWoodRestService-1373"><a href="#PumpWoodRestService-1373"><span class="linenos">1373</span></a><span class="sd">              }],</span>
</span><span id="PumpWoodRestService-1374"><a href="#PumpWoodRestService-1374"><span class="linenos">1374</span></a><span class="sd">             &#39;verbose_field&#39;: &#39;{pk} | {description}&#39;}</span>
</span><span id="PumpWoodRestService-1375"><a href="#PumpWoodRestService-1375"><span class="linenos">1375</span></a><span class="sd">            ```</span>
</span><span id="PumpWoodRestService-1376"><a href="#PumpWoodRestService-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1377"><a href="#PumpWoodRestService-1377"><span class="linenos">1377</span></a>        <span class="n">gui_retrieve_fieldset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_retrieve_fieldset</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1378"><a href="#PumpWoodRestService-1378"><span class="linenos">1378</span></a>        <span class="n">gui_verbose_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_verbose_field</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1379"><a href="#PumpWoodRestService-1379"><span class="linenos">1379</span></a>
</span><span id="PumpWoodRestService-1380"><a href="#PumpWoodRestService-1380"><span class="linenos">1380</span></a>        <span class="c1"># If gui_retrieve_fieldset is not set return all columns</span>
</span><span id="PumpWoodRestService-1381"><a href="#PumpWoodRestService-1381"><span class="linenos">1381</span></a>        <span class="c1"># on the main tab</span>
</span><span id="PumpWoodRestService-1382"><a href="#PumpWoodRestService-1382"><span class="linenos">1382</span></a>        <span class="k">if</span> <span class="n">gui_retrieve_fieldset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1383"><a href="#PumpWoodRestService-1383"><span class="linenos">1383</span></a>            <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1384"><a href="#PumpWoodRestService-1384"><span class="linenos">1384</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">fields_options</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="PumpWoodRestService-1385"><a href="#PumpWoodRestService-1385"><span class="linenos">1385</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_columns</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;pk&#39;</span><span class="p">,</span> <span class="s1">&#39;model_class&#39;</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1386"><a href="#PumpWoodRestService-1386"><span class="linenos">1386</span></a>            <span class="n">all_columns</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1387"><a href="#PumpWoodRestService-1387"><span class="linenos">1387</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService-1388"><a href="#PumpWoodRestService-1388"><span class="linenos">1388</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1389"><a href="#PumpWoodRestService-1389"><span class="linenos">1389</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">all_columns</span><span class="p">}}})</span>
</span><span id="PumpWoodRestService-1390"><a href="#PumpWoodRestService-1390"><span class="linenos">1390</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1391"><a href="#PumpWoodRestService-1391"><span class="linenos">1391</span></a>            <span class="n">return_gui_retrieve_fieldset</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">gui_retrieve_fieldset</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1392"><a href="#PumpWoodRestService-1392"><span class="linenos">1392</span></a>            <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService-1393"><a href="#PumpWoodRestService-1393"><span class="linenos">1393</span></a>            <span class="n">tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fieldset_name__</span><span class="si">{fieldset_name}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService-1394"><a href="#PumpWoodRestService-1394"><span class="linenos">1394</span></a>            <span class="k">for</span> <span class="n">fieldset</span> <span class="ow">in</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1395"><a href="#PumpWoodRestService-1395"><span class="linenos">1395</span></a>                <span class="n">fieldset_name</span> <span class="o">=</span> <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="PumpWoodRestService-1396"><a href="#PumpWoodRestService-1396"><span class="linenos">1396</span></a>                <span class="n">tag</span> <span class="o">=</span> <span class="n">tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService-1397"><a href="#PumpWoodRestService-1397"><span class="linenos">1397</span></a>                    <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">fieldset_name</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1398"><a href="#PumpWoodRestService-1398"><span class="linenos">1398</span></a>                <span class="n">name__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">sentence</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1399"><a href="#PumpWoodRestService-1399"><span class="linenos">1399</span></a>                <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name__verbose</span>
</span><span id="PumpWoodRestService-1400"><a href="#PumpWoodRestService-1400"><span class="linenos">1400</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService-1401"><a href="#PumpWoodRestService-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1402"><a href="#PumpWoodRestService-1402"><span class="linenos">1402</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">})</span>
</span><span id="PumpWoodRestService-1403"><a href="#PumpWoodRestService-1403"><span class="linenos">1403</span></a>
</span><span id="PumpWoodRestService-1404"><a href="#PumpWoodRestService-1404"><span class="linenos">1404</span></a>    <span class="k">def</span> <span class="nf">fill_options_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1405"><a href="#PumpWoodRestService-1405"><span class="linenos">1405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1406"><a href="#PumpWoodRestService-1406"><span class="linenos">1406</span></a><span class="sd">        Return fill options for retrieve/save pages.</span>
</span><span id="PumpWoodRestService-1407"><a href="#PumpWoodRestService-1407"><span class="linenos">1407</span></a>
</span><span id="PumpWoodRestService-1408"><a href="#PumpWoodRestService-1408"><span class="linenos">1408</span></a><span class="sd">        It will validate partial data fill return update fill options and</span>
</span><span id="PumpWoodRestService-1409"><a href="#PumpWoodRestService-1409"><span class="linenos">1409</span></a><span class="sd">        raise validation errors if necessary.</span>
</span><span id="PumpWoodRestService-1410"><a href="#PumpWoodRestService-1410"><span class="linenos">1410</span></a>
</span><span id="PumpWoodRestService-1411"><a href="#PumpWoodRestService-1411"><span class="linenos">1411</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService-1412"><a href="#PumpWoodRestService-1412"><span class="linenos">1412</span></a><span class="sd">        Partially filled data to be validated by the backend.</span>
</span><span id="PumpWoodRestService-1413"><a href="#PumpWoodRestService-1413"><span class="linenos">1413</span></a>
</span><span id="PumpWoodRestService-1414"><a href="#PumpWoodRestService-1414"><span class="linenos">1414</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService-1415"><a href="#PumpWoodRestService-1415"><span class="linenos">1415</span></a><span class="sd">        - **user_type[str]:**</span>
</span><span id="PumpWoodRestService-1416"><a href="#PumpWoodRestService-1416"><span class="linenos">1416</span></a><span class="sd">            Must be in [&#39;api&#39;, &#39;gui&#39;]. It will return the options according</span>
</span><span id="PumpWoodRestService-1417"><a href="#PumpWoodRestService-1417"><span class="linenos">1417</span></a><span class="sd">            to interface user is using. When requesting using &#39;gui&#39;,</span>
</span><span id="PumpWoodRestService-1418"><a href="#PumpWoodRestService-1418"><span class="linenos">1418</span></a><span class="sd">            self.gui_readonly field will be setted as read-only.</span>
</span><span id="PumpWoodRestService-1419"><a href="#PumpWoodRestService-1419"><span class="linenos">1419</span></a><span class="sd">        - **field [str]:**</span>
</span><span id="PumpWoodRestService-1420"><a href="#PumpWoodRestService-1420"><span class="linenos">1420</span></a><span class="sd">            Set to validade an specific field. If not set all</span>
</span><span id="PumpWoodRestService-1421"><a href="#PumpWoodRestService-1421"><span class="linenos">1421</span></a><span class="sd">            fields will be validated. Validation must be implemented.</span>
</span><span id="PumpWoodRestService-1422"><a href="#PumpWoodRestService-1422"><span class="linenos">1422</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService-1423"><a href="#PumpWoodRestService-1423"><span class="linenos">1423</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService-1424"><a href="#PumpWoodRestService-1424"><span class="linenos">1424</span></a><span class="sd">        Return [dict]:</span>
</span><span id="PumpWoodRestService-1425"><a href="#PumpWoodRestService-1425"><span class="linenos">1425</span></a><span class="sd">            Return an dictonary with `field_descriptions` generated by</span>
</span><span id="PumpWoodRestService-1426"><a href="#PumpWoodRestService-1426"><span class="linenos">1426</span></a><span class="sd">            `cls_fields_options` and `gui_readonly` indicating the fields</span>
</span><span id="PumpWoodRestService-1427"><a href="#PumpWoodRestService-1427"><span class="linenos">1427</span></a><span class="sd">            that will be set as read-only if user_type=&#39;gui&#39;</span>
</span><span id="PumpWoodRestService-1428"><a href="#PumpWoodRestService-1428"><span class="linenos">1428</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService-1429"><a href="#PumpWoodRestService-1429"><span class="linenos">1429</span></a>        <span class="n">user_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_type&#39;</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1430"><a href="#PumpWoodRestService-1430"><span class="linenos">1430</span></a>        <span class="n">field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService-1431"><a href="#PumpWoodRestService-1431"><span class="linenos">1431</span></a>        <span class="n">partial_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService-1432"><a href="#PumpWoodRestService-1432"><span class="linenos">1432</span></a>
</span><span id="PumpWoodRestService-1433"><a href="#PumpWoodRestService-1433"><span class="linenos">1433</span></a>        <span class="n">gui_readonly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_readonly</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1434"><a href="#PumpWoodRestService-1434"><span class="linenos">1434</span></a>        <span class="n">fill_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService-1435"><a href="#PumpWoodRestService-1435"><span class="linenos">1435</span></a>
</span><span id="PumpWoodRestService-1436"><a href="#PumpWoodRestService-1436"><span class="linenos">1436</span></a>        <span class="c1"># If it is gui interface then set gui_readonly as read-only</span>
</span><span id="PumpWoodRestService-1437"><a href="#PumpWoodRestService-1437"><span class="linenos">1437</span></a>        <span class="c1"># this will limit fields that are not read-only but should not</span>
</span><span id="PumpWoodRestService-1438"><a href="#PumpWoodRestService-1438"><span class="linenos">1438</span></a>        <span class="c1"># be edited be the user</span>
</span><span id="PumpWoodRestService-1439"><a href="#PumpWoodRestService-1439"><span class="linenos">1439</span></a>        <span class="k">if</span> <span class="n">user_type</span> <span class="o">==</span> <span class="s1">&#39;gui&#39;</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1440"><a href="#PumpWoodRestService-1440"><span class="linenos">1440</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">fill_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService-1441"><a href="#PumpWoodRestService-1441"><span class="linenos">1441</span></a>                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">gui_readonly</span><span class="p">:</span>
</span><span id="PumpWoodRestService-1442"><a href="#PumpWoodRestService-1442"><span class="linenos">1442</span></a>                    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;read_only&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService-1443"><a href="#PumpWoodRestService-1443"><span class="linenos">1443</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService-1444"><a href="#PumpWoodRestService-1444"><span class="linenos">1444</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fill_options</span><span class="p">,</span>
</span><span id="PumpWoodRestService-1445"><a href="#PumpWoodRestService-1445"><span class="linenos">1445</span></a>            <span class="s2">&quot;gui_readonly&quot;</span><span class="p">:</span> <span class="n">gui_readonly</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Basic View-Set for pumpwood rest end-points.</p>

<p>Example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">metabase.models</span> <span class="kn">import</span> <span class="n">MetabaseDashboard</span>
<span class="kn">from</span> <span class="nn">metabase.serializers</span> <span class="kn">import</span> <span class="n">MetabaseDashboardSerializer</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">storage_object</span><span class="p">,</span> <span class="n">microservice</span>


<span class="k">class</span> <span class="nc">RestMetabaseDashboard</span><span class="p">(</span><span class="n">PumpWoodRestService</span><span class="p">):</span>
    <span class="n">endpoint_description</span> <span class="o">=</span> <span class="s2">&quot;Metabase Dashboard&quot;</span>
    <span class="n">notes</span> <span class="o">=</span> <span class="s2">&quot;Register and generate url to embed Metabase dashboards&quot;</span>

    <span class="c1"># Django model that will be mapped to this end-point</span>
    <span class="n">service_model</span> <span class="o">=</span> <span class="n">MetabaseDashboard</span>

    <span class="c1"># Serializer that will be used to dump model data</span>
    <span class="n">serializer</span> <span class="o">=</span> <span class="n">MetabaseDashboardSerializer</span>

    <span class="c1"># PumpwoodStorage object that will be used to save and retrieve</span>
    <span class="c1"># file data from storage.</span>
    <span class="n">storage_object</span> <span class="o">=</span> <span class="n">storage_object</span>

    <span class="c1"># PumpWoodMicroService object used to communicate with other</span>
    <span class="c1"># microservice if necessary. Ex: Trigger ETL Jobs on object</span>
    <span class="c1"># saving and update.</span>
    <span class="n">microservice</span> <span class="o">=</span> <span class="n">microservice</span>

    <span class="c1"># Fields that will be considered as files and extensions that</span>
    <span class="c1"># will be accepted.</span>
    <span class="n">file_fields</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;xlsx&#39;</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="c1">###########################################################</span>
    <span class="c1"># Gui this information will be returned at retrieve_options</span>
    <span class="c1"># to help frontend correctly render app frontend.</span>
    <span class="c1"># Set field sets, grouping the fields and hiding those that</span>
    <span class="c1"># ar not listed on fieldsets</span>
    <span class="n">gui_retrieve_fieldset</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;alias&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;notes&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dimensions&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_by&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_at&quot;</span><span class="p">]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;embedding&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;metabase_id&quot;</span><span class="p">,</span> <span class="s2">&quot;auto_embedding&quot;</span><span class="p">,</span> <span class="s2">&quot;object_model_class&quot;</span><span class="p">,</span>
                <span class="s2">&quot;object_pk&quot;</span><span class="p">]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;expire_in_min&quot;</span><span class="p">,</span> <span class="s2">&quot;default_theme&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default_is_bordered&quot;</span><span class="p">,</span> <span class="s2">&quot;default_is_titled&quot;</span><span class="p">]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;extra_info&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="c1"># This fields will be set as readonly if fill_options_validation</span>
    <span class="c1"># is called with query parameter `?user_type=gui`</span>
    <span class="n">gui_readonly</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;updated_by_id&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_at&quot;</span><span class="p">,</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">]</span>

    <span class="c1"># Indication how the object could be presented to user</span>
    <span class="n">gui_verbose_field</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{pk}</span><span class="s1"> | </span><span class="si">{description}</span><span class="s1">&#39;</span>
</code></pre>
</div>
</div>


                            <div id="PumpWoodRestService.endpoint_description" class="classattr">
                                <div class="attr variable">
            <span class="name">endpoint_description</span><span class="annotation">: str</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.endpoint_description"></a>
    
            <div class="docstring"><p>Description of the end-point, this information will be avaiable at
<code>rest/pumpwood/endpoints/</code> for frontend. This information will be
saved at KongRoute, it must be unique for all microservices</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.dimensions" class="classattr">
                                <div class="attr variable">
            <span class="name">dimensions</span><span class="annotation">: dict</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.dimensions"></a>
    
            <div class="docstring"><p>Dimensions associated with end-points. This information will be saved
at KongRoute dimensions.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.icon" class="classattr">
                                <div class="attr variable">
            <span class="name">icon</span><span class="annotation">: str</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.icon"></a>
    
            <div class="docstring"><p>Icon associated with model class. This information will be saved
at KongRoute icon field.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.service_model" class="classattr">
                                <div class="attr variable">
            <span class="name">service_model</span><span class="annotation">: django.db.models.base.Model</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.service_model"></a>
    
            <div class="docstring"><p>Django model associated end-points will be made avaiable.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.storage_object" class="classattr">
                                <div class="attr variable">
            <span class="name">storage_object</span><span class="annotation">: pumpwood_miscellaneous.storage.PumpWoodStorage</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.storage_object"></a>
    
            <div class="docstring"><p>PumpwoodStorage object that will be used to save and retrieve
file data from storage.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.microservice" class="classattr">
                                <div class="attr variable">
            <span class="name">microservice</span><span class="annotation">: pumpwood_communication.microservices.PumpWoodMicroService</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.microservice"></a>
    
            <div class="docstring"><p>PumpWoodMicroService object used to communicate with other
microservice if necessary. Ex: Trigger ETL Jobs on object
saving and update.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.trigger" class="classattr">
                                <div class="attr variable">
            <span class="name">trigger</span><span class="annotation">: bool</span>        =
<span class="default_value">False</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.trigger"></a>
    
            <div class="docstring"><p>If should be called ELTTrigger at ETL microservice at saving, deleting
and executing actions. Default value is False.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.serializer" class="classattr">
                                <div class="attr variable">
            <span class="name">serializer</span><span class="annotation">: pumpwood_djangoviews.serializers.DynamicFieldsModelSerializer</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.serializer"></a>
    
            <div class="docstring"><p>Serializer that will be used to dump data on end-points.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.file_fields" class="classattr">
                                <div class="attr variable">
            <span class="name">file_fields</span>        =
<span class="default_value">{}</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.file_fields"></a>
    
            <div class="docstring"><p>File fields associated with model, it is a dictonary with keys as
field keys and values as a list of accepted extensions.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.list_paginate_limit" class="classattr">
                                <div class="attr variable">
            <span class="name">list_paginate_limit</span><span class="annotation">: int</span>        =
<span class="default_value">50</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.list_paginate_limit"></a>
    
            <div class="docstring"><p>List end-point pagination default limit.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.gui_retrieve_fieldset" class="classattr">
                                <div class="attr variable">
            <span class="name">gui_retrieve_fieldset</span><span class="annotation">: List[dict]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.gui_retrieve_fieldset"></a>
    
            <div class="docstring"><p>Retrieve field set to be passed to gui from <code><a href="#PumpWoodRestService.retrieve_view_options">retrieve_view_options</a></code>.
It is a list of dictonary with keys name for name of the viewset and
fields for the fields that are associated.</p>

<p>Example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">gui_retrieve_fieldset</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;alias&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;notes&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dimensions&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_by&quot;</span><span class="p">,</span> <span class="s2">&quot;updated_at&quot;</span><span class="p">]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;embedding&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;metabase_id&quot;</span><span class="p">,</span> <span class="s2">&quot;auto_embedding&quot;</span><span class="p">,</span> <span class="s2">&quot;object_model_class&quot;</span><span class="p">,</span>
            <span class="s2">&quot;object_pk&quot;</span><span class="p">]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;expire_in_min&quot;</span><span class="p">,</span> <span class="s2">&quot;default_theme&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default_is_bordered&quot;</span><span class="p">,</span> <span class="s2">&quot;default_is_titled&quot;</span><span class="p">]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;extra_info&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="PumpWoodRestService.gui_verbose_field" class="classattr">
                                <div class="attr variable">
            <span class="name">gui_verbose_field</span><span class="annotation">: str</span>        =
<span class="default_value">&#39;pk&#39;</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.gui_verbose_field"></a>
    
            <div class="docstring"><p>Suggest verbose for object using information from object. It is set
as python string format, default <code>pk</code>. Ex: <code>{pk} | {description}</code> will
use information from <code>pk</code> and <code>description</code> keys.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.gui_readonly" class="classattr">
                                <div class="attr variable">
            <span class="name">gui_readonly</span><span class="annotation">: List[str]</span>        =
<span class="default_value">[]</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodRestService.gui_readonly"></a>
    
            <div class="docstring"><p>Set readonly fields when calling with <code>user_type=gui</code> for
<code><a href="#PumpWoodRestService.fill_options_validation">fill_options_validation</a></code> end-point.</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.get_gui_retrieve_fieldset" class="classattr">
                                        <input id="PumpWoodRestService.get_gui_retrieve_fieldset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">get_gui_retrieve_fieldset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.get_gui_retrieve_fieldset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.get_gui_retrieve_fieldset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-215"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-215"><span class="linenos">215</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-216"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-216"><span class="linenos">216</span></a>    <span class="k">def</span> <span class="nf">get_gui_retrieve_fieldset</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-217"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-217"><span class="linenos">217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-218"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-218"><span class="linenos">218</span></a><span class="sd">        Return gui_retrieve_fieldset attribute.</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-219"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-219"><span class="linenos">219</span></a>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-220"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-220"><span class="linenos">220</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-221"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-221"><span class="linenos">221</span></a><span class="sd">        to get `gui_retrieve_fieldset` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-222"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-222"><span class="linenos">222</span></a>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-223"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-223"><span class="linenos">223</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-224"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-224"><span class="linenos">224</span></a><span class="sd">            Return `gui_retrieve_fieldset` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-225"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-225"><span class="linenos">225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_retrieve_fieldset-226"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset-226"><span class="linenos">226</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_retrieve_fieldset</span>
</span></pre></div>


            <div class="docstring"><p>Return gui_retrieve_fieldset attribute.</p>

<p>This function can be overwriten to add custom funcionalities
to get <code><a href="#PumpWoodRestService.gui_retrieve_fieldset">gui_retrieve_fieldset</a></code> attribute.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return <code><a href="#PumpWoodRestService.gui_retrieve_fieldset">gui_retrieve_fieldset</a></code> attribute.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.get_gui_verbose_field" class="classattr">
                                        <input id="PumpWoodRestService.get_gui_verbose_field-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">get_gui_verbose_field</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.get_gui_verbose_field-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.get_gui_verbose_field"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.get_gui_verbose_field-228"><a href="#PumpWoodRestService.get_gui_verbose_field-228"><span class="linenos">228</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-229"><a href="#PumpWoodRestService.get_gui_verbose_field-229"><span class="linenos">229</span></a>    <span class="k">def</span> <span class="nf">get_gui_verbose_field</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-230"><a href="#PumpWoodRestService.get_gui_verbose_field-230"><span class="linenos">230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-231"><a href="#PumpWoodRestService.get_gui_verbose_field-231"><span class="linenos">231</span></a><span class="sd">        Return gui_verbose_field attribute.</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-232"><a href="#PumpWoodRestService.get_gui_verbose_field-232"><span class="linenos">232</span></a>
</span><span id="PumpWoodRestService.get_gui_verbose_field-233"><a href="#PumpWoodRestService.get_gui_verbose_field-233"><span class="linenos">233</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-234"><a href="#PumpWoodRestService.get_gui_verbose_field-234"><span class="linenos">234</span></a><span class="sd">        to get `gui_verbose_field` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-235"><a href="#PumpWoodRestService.get_gui_verbose_field-235"><span class="linenos">235</span></a>
</span><span id="PumpWoodRestService.get_gui_verbose_field-236"><a href="#PumpWoodRestService.get_gui_verbose_field-236"><span class="linenos">236</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-237"><a href="#PumpWoodRestService.get_gui_verbose_field-237"><span class="linenos">237</span></a><span class="sd">            Return `gui_verbose_field` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-238"><a href="#PumpWoodRestService.get_gui_verbose_field-238"><span class="linenos">238</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_verbose_field-239"><a href="#PumpWoodRestService.get_gui_verbose_field-239"><span class="linenos">239</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_verbose_field</span>
</span></pre></div>


            <div class="docstring"><p>Return gui_verbose_field attribute.</p>

<p>This function can be overwriten to add custom funcionalities
to get <code><a href="#PumpWoodRestService.gui_verbose_field">gui_verbose_field</a></code> attribute.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return <code><a href="#PumpWoodRestService.gui_verbose_field">gui_verbose_field</a></code> attribute.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.get_gui_readonly" class="classattr">
                                        <input id="PumpWoodRestService.get_gui_readonly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">get_gui_readonly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.get_gui_readonly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.get_gui_readonly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.get_gui_readonly-241"><a href="#PumpWoodRestService.get_gui_readonly-241"><span class="linenos">241</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService.get_gui_readonly-242"><a href="#PumpWoodRestService.get_gui_readonly-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">get_gui_readonly</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="PumpWoodRestService.get_gui_readonly-243"><a href="#PumpWoodRestService.get_gui_readonly-243"><span class="linenos">243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_readonly-244"><a href="#PumpWoodRestService.get_gui_readonly-244"><span class="linenos">244</span></a><span class="sd">        Return gui_readonly attribute.</span>
</span><span id="PumpWoodRestService.get_gui_readonly-245"><a href="#PumpWoodRestService.get_gui_readonly-245"><span class="linenos">245</span></a>
</span><span id="PumpWoodRestService.get_gui_readonly-246"><a href="#PumpWoodRestService.get_gui_readonly-246"><span class="linenos">246</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService.get_gui_readonly-247"><a href="#PumpWoodRestService.get_gui_readonly-247"><span class="linenos">247</span></a><span class="sd">        to get `gui_readonly` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_readonly-248"><a href="#PumpWoodRestService.get_gui_readonly-248"><span class="linenos">248</span></a>
</span><span id="PumpWoodRestService.get_gui_readonly-249"><a href="#PumpWoodRestService.get_gui_readonly-249"><span class="linenos">249</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.get_gui_readonly-250"><a href="#PumpWoodRestService.get_gui_readonly-250"><span class="linenos">250</span></a><span class="sd">            Return `gui_readonly` attribute.</span>
</span><span id="PumpWoodRestService.get_gui_readonly-251"><a href="#PumpWoodRestService.get_gui_readonly-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_gui_readonly-252"><a href="#PumpWoodRestService.get_gui_readonly-252"><span class="linenos">252</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">gui_readonly</span>
</span></pre></div>


            <div class="docstring"><p>Return gui_readonly attribute.</p>

<p>This function can be overwriten to add custom funcionalities
to get <code><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></code> attribute.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return <code><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></code> attribute.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.get_list_fields" class="classattr">
                                        <input id="PumpWoodRestService.get_list_fields-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">get_list_fields</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="PumpWoodRestService.get_list_fields-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.get_list_fields"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.get_list_fields-254"><a href="#PumpWoodRestService.get_list_fields-254"><span class="linenos">254</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService.get_list_fields-255"><a href="#PumpWoodRestService.get_list_fields-255"><span class="linenos">255</span></a>    <span class="k">def</span> <span class="nf">get_list_fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
</span><span id="PumpWoodRestService.get_list_fields-256"><a href="#PumpWoodRestService.get_list_fields-256"><span class="linenos">256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_list_fields-257"><a href="#PumpWoodRestService.get_list_fields-257"><span class="linenos">257</span></a><span class="sd">        Return list_fields from associated serializer.</span>
</span><span id="PumpWoodRestService.get_list_fields-258"><a href="#PumpWoodRestService.get_list_fields-258"><span class="linenos">258</span></a>
</span><span id="PumpWoodRestService.get_list_fields-259"><a href="#PumpWoodRestService.get_list_fields-259"><span class="linenos">259</span></a><span class="sd">        This function can be overwriten to add custom funcionalities</span>
</span><span id="PumpWoodRestService.get_list_fields-260"><a href="#PumpWoodRestService.get_list_fields-260"><span class="linenos">260</span></a><span class="sd">        to get `cls.serializer().get_list_fields()` data.</span>
</span><span id="PumpWoodRestService.get_list_fields-261"><a href="#PumpWoodRestService.get_list_fields-261"><span class="linenos">261</span></a>
</span><span id="PumpWoodRestService.get_list_fields-262"><a href="#PumpWoodRestService.get_list_fields-262"><span class="linenos">262</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.get_list_fields-263"><a href="#PumpWoodRestService.get_list_fields-263"><span class="linenos">263</span></a><span class="sd">            Return list_fields for model.</span>
</span><span id="PumpWoodRestService.get_list_fields-264"><a href="#PumpWoodRestService.get_list_fields-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.get_list_fields-265"><a href="#PumpWoodRestService.get_list_fields-265"><span class="linenos">265</span></a>        <span class="n">serializer_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">()</span>
</span><span id="PumpWoodRestService.get_list_fields-266"><a href="#PumpWoodRestService.get_list_fields-266"><span class="linenos">266</span></a>        <span class="k">return</span> <span class="n">serializer_obj</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Return list_fields from associated serializer.</p>

<p>This function can be overwriten to add custom funcionalities
to get <code>cls.serializer().get_list_fields()</code> data.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return list_fields for model.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.list" class="classattr">
                                        <input id="PumpWoodRestService.list-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.list-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.list"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.list-284"><a href="#PumpWoodRestService.list-284"><span class="linenos">284</span></a>    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService.list-285"><a href="#PumpWoodRestService.list-285"><span class="linenos">285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list-286"><a href="#PumpWoodRestService.list-286"><span class="linenos">286</span></a><span class="sd">        View function to list objects with pagination.</span>
</span><span id="PumpWoodRestService.list-287"><a href="#PumpWoodRestService.list-287"><span class="linenos">287</span></a>
</span><span id="PumpWoodRestService.list-288"><a href="#PumpWoodRestService.list-288"><span class="linenos">288</span></a><span class="sd">        Number of objects are limited by. To get next page, use</span>
</span><span id="PumpWoodRestService.list-289"><a href="#PumpWoodRestService.list-289"><span class="linenos">289</span></a><span class="sd">        exclude_dict[&#39;pk__in&#39;: [list of the received pks]] to get more</span>
</span><span id="PumpWoodRestService.list-290"><a href="#PumpWoodRestService.list-290"><span class="linenos">290</span></a><span class="sd">        objects.</span>
</span><span id="PumpWoodRestService.list-291"><a href="#PumpWoodRestService.list-291"><span class="linenos">291</span></a>
</span><span id="PumpWoodRestService.list-292"><a href="#PumpWoodRestService.list-292"><span class="linenos">292</span></a><span class="sd">        ..: notes:</span>
</span><span id="PumpWoodRestService.list-293"><a href="#PumpWoodRestService.list-293"><span class="linenos">293</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="PumpWoodRestService.list-294"><a href="#PumpWoodRestService.list-294"><span class="linenos">294</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="PumpWoodRestService.list-295"><a href="#PumpWoodRestService.list-295"><span class="linenos">295</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="PumpWoodRestService.list-296"><a href="#PumpWoodRestService.list-296"><span class="linenos">296</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="PumpWoodRestService.list-297"><a href="#PumpWoodRestService.list-297"><span class="linenos">297</span></a>
</span><span id="PumpWoodRestService.list-298"><a href="#PumpWoodRestService.list-298"><span class="linenos">298</span></a><span class="sd">        Use to limit the query .query.filter_by_dict function. Request</span>
</span><span id="PumpWoodRestService.list-299"><a href="#PumpWoodRestService.list-299"><span class="linenos">299</span></a><span class="sd">        expected parameters and query parameters are listed bellow:</span>
</span><span id="PumpWoodRestService.list-300"><a href="#PumpWoodRestService.list-300"><span class="linenos">300</span></a>
</span><span id="PumpWoodRestService.list-301"><a href="#PumpWoodRestService.list-301"><span class="linenos">301</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.list-302"><a href="#PumpWoodRestService.list-302"><span class="linenos">302</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.list-303"><a href="#PumpWoodRestService.list-303"><span class="linenos">303</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-304"><a href="#PumpWoodRestService.list-304"><span class="linenos">304</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.list-305"><a href="#PumpWoodRestService.list-305"><span class="linenos">305</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService.list-306"><a href="#PumpWoodRestService.list-306"><span class="linenos">306</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-307"><a href="#PumpWoodRestService.list-307"><span class="linenos">307</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="PumpWoodRestService.list-308"><a href="#PumpWoodRestService.list-308"><span class="linenos">308</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-309"><a href="#PumpWoodRestService.list-309"><span class="linenos">309</span></a><span class="sd">        - **limit [int] = None:**</span>
</span><span id="PumpWoodRestService.list-310"><a href="#PumpWoodRestService.list-310"><span class="linenos">310</span></a><span class="sd">            Limit of the query result, if not set attribute</span>
</span><span id="PumpWoodRestService.list-311"><a href="#PumpWoodRestService.list-311"><span class="linenos">311</span></a><span class="sd">            `list_paginate_limit` will be used insted.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-312"><a href="#PumpWoodRestService.list-312"><span class="linenos">312</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="PumpWoodRestService.list-313"><a href="#PumpWoodRestService.list-313"><span class="linenos">313</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-314"><a href="#PumpWoodRestService.list-314"><span class="linenos">314</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService.list-315"><a href="#PumpWoodRestService.list-315"><span class="linenos">315</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="PumpWoodRestService.list-316"><a href="#PumpWoodRestService.list-316"><span class="linenos">316</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-317"><a href="#PumpWoodRestService.list-317"><span class="linenos">317</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService.list-318"><a href="#PumpWoodRestService.list-318"><span class="linenos">318</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list-319"><a href="#PumpWoodRestService.list-319"><span class="linenos">319</span></a>
</span><span id="PumpWoodRestService.list-320"><a href="#PumpWoodRestService.list-320"><span class="linenos">320</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.list-321"><a href="#PumpWoodRestService.list-321"><span class="linenos">321</span></a><span class="sd">        No query data.</span>
</span><span id="PumpWoodRestService.list-322"><a href="#PumpWoodRestService.list-322"><span class="linenos">322</span></a>
</span><span id="PumpWoodRestService.list-323"><a href="#PumpWoodRestService.list-323"><span class="linenos">323</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.list-324"><a href="#PumpWoodRestService.list-324"><span class="linenos">324</span></a><span class="sd">            request: Django request object.</span>
</span><span id="PumpWoodRestService.list-325"><a href="#PumpWoodRestService.list-325"><span class="linenos">325</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.list-326"><a href="#PumpWoodRestService.list-326"><span class="linenos">326</span></a><span class="sd">            Return the result of the query limited to</span>
</span><span id="PumpWoodRestService.list-327"><a href="#PumpWoodRestService.list-327"><span class="linenos">327</span></a><span class="sd">            `list_paginate_limit` attribute. Objects are serialized</span>
</span><span id="PumpWoodRestService.list-328"><a href="#PumpWoodRestService.list-328"><span class="linenos">328</span></a><span class="sd">            using `serializer` attribute.</span>
</span><span id="PumpWoodRestService.list-329"><a href="#PumpWoodRestService.list-329"><span class="linenos">329</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.list-330"><a href="#PumpWoodRestService.list-330"><span class="linenos">330</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodRestService.list-331"><a href="#PumpWoodRestService.list-331"><span class="linenos">331</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="PumpWoodRestService.list-332"><a href="#PumpWoodRestService.list-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list-333"><a href="#PumpWoodRestService.list-333"><span class="linenos">333</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list-334"><a href="#PumpWoodRestService.list-334"><span class="linenos">334</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.list-335"><a href="#PumpWoodRestService.list-335"><span class="linenos">335</span></a>            <span class="n">limit</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-336"><a href="#PumpWoodRestService.list-336"><span class="linenos">336</span></a>            <span class="n">list_paginate_limit</span> <span class="o">=</span> <span class="n">limit</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_paginate_limit</span>
</span><span id="PumpWoodRestService.list-337"><a href="#PumpWoodRestService.list-337"><span class="linenos">337</span></a>
</span><span id="PumpWoodRestService.list-338"><a href="#PumpWoodRestService.list-338"><span class="linenos">338</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="PumpWoodRestService.list-339"><a href="#PumpWoodRestService.list-339"><span class="linenos">339</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-340"><a href="#PumpWoodRestService.list-340"><span class="linenos">340</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-341"><a href="#PumpWoodRestService.list-341"><span class="linenos">341</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-342"><a href="#PumpWoodRestService.list-342"><span class="linenos">342</span></a>
</span><span id="PumpWoodRestService.list-343"><a href="#PumpWoodRestService.list-343"><span class="linenos">343</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.list-344"><a href="#PumpWoodRestService.list-344"><span class="linenos">344</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="PumpWoodRestService.list-345"><a href="#PumpWoodRestService.list-345"><span class="linenos">345</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodRestService.list-346"><a href="#PumpWoodRestService.list-346"><span class="linenos">346</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodRestService.list-347"><a href="#PumpWoodRestService.list-347"><span class="linenos">347</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list-348"><a href="#PumpWoodRestService.list-348"><span class="linenos">348</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodRestService.list-349"><a href="#PumpWoodRestService.list-349"><span class="linenos">349</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list-350"><a href="#PumpWoodRestService.list-350"><span class="linenos">350</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="PumpWoodRestService.list-351"><a href="#PumpWoodRestService.list-351"><span class="linenos">351</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list-352"><a href="#PumpWoodRestService.list-352"><span class="linenos">352</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.list-353"><a href="#PumpWoodRestService.list-353"><span class="linenos">353</span></a>                        <span class="k">break</span>
</span><span id="PumpWoodRestService.list-354"><a href="#PumpWoodRestService.list-354"><span class="linenos">354</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list-355"><a href="#PumpWoodRestService.list-355"><span class="linenos">355</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.list-356"><a href="#PumpWoodRestService.list-356"><span class="linenos">356</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.list-357"><a href="#PumpWoodRestService.list-357"><span class="linenos">357</span></a>
</span><span id="PumpWoodRestService.list-358"><a href="#PumpWoodRestService.list-358"><span class="linenos">358</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService.list-359"><a href="#PumpWoodRestService.list-359"><span class="linenos">359</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-360"><a href="#PumpWoodRestService.list-360"><span class="linenos">360</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)[:</span><span class="n">list_paginate_limit</span><span class="p">]</span>
</span><span id="PumpWoodRestService.list-361"><a href="#PumpWoodRestService.list-361"><span class="linenos">361</span></a>
</span><span id="PumpWoodRestService.list-362"><a href="#PumpWoodRestService.list-362"><span class="linenos">362</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list-363"><a href="#PumpWoodRestService.list-363"><span class="linenos">363</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list-364"><a href="#PumpWoodRestService.list-364"><span class="linenos">364</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list-365"><a href="#PumpWoodRestService.list-365"><span class="linenos">365</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list-366"><a href="#PumpWoodRestService.list-366"><span class="linenos">366</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list-367"><a href="#PumpWoodRestService.list-367"><span class="linenos">367</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>View function to list objects with pagination.</p>

<p>Number of objects are limited by. To get next page, use
exclude_dict['pk__in': [list of the received pks]] to get more
objects.</p>

<p>..: notes:
    Models with deleted field will have objects with deleted=True
    excluded by default from results. To retrive these objects
    explicity define <code>exclude_dict</code> <code>{'deleted': None}</code> or
    <code>{'deleted': False}</code>.</p>

<p>Use to limit the query <a href="query.html#filter_by_dict">pumpwood-djangoviews.src.pumpwood_djangoviews.query.filter_by_dict</a> function. Request
expected parameters and query parameters are listed bellow:</p>

<h6 id="request-payload-data">Request payload data:</h6>

<ul>
<li><strong>filter_dict [dict] = {}:</strong>
Dictionary passed as <code>model.objects.filter(**filter_dict)</code>.<br></li>
<li><strong>exclude_dict [dict] = {}:</strong>
Dictionary passed as
<code>model.objects.exclude(**filter_dict)</code>.<br></li>
<li><strong>order_by [dict] = []:</strong>
Dictionary passed as <code>model.objects.exclude(*order_by)</code>.<br></li>
<li><strong>limit [int] = None:</strong>
Limit of the query result, if not set attribute
<code><a href="#PumpWoodRestService.list_paginate_limit">list_paginate_limit</a></code> will be used insted.<br></li>
<li><strong>fields [List[str]] = []:</strong>
List of fields that should be returned on results objects.<br></li>
<li><strong>default_fields [bool] = False:</strong>
If serializer <code>list_fields</code> should be used to filter the
returned fields.<br></li>
<li><strong>foreign_key_fields [bool] = False:</strong>
If foreign keys should be returned with object data.<br></li>
</ul>

<h6 id="request-query-data">Request query data:</h6>

<p>No query data.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return the result of the query limited to
  <code><a href="#PumpWoodRestService.list_paginate_limit">list_paginate_limit</a></code> attribute. Objects are serialized
  using <code><a href="#PumpWoodRestService.serializer">serializer</a></code> attribute.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodQueryException:</strong>  Raise if any error when treating the request.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.list_without_pag" class="classattr">
                                        <input id="PumpWoodRestService.list_without_pag-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_without_pag</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="PumpWoodRestService.list_without_pag-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.list_without_pag"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.list_without_pag-369"><a href="#PumpWoodRestService.list_without_pag-369"><span class="linenos">369</span></a>    <span class="k">def</span> <span class="nf">list_without_pag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService.list_without_pag-370"><a href="#PumpWoodRestService.list_without_pag-370"><span class="linenos">370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_without_pag-371"><a href="#PumpWoodRestService.list_without_pag-371"><span class="linenos">371</span></a><span class="sd">        View function to list objects **without** pagination.</span>
</span><span id="PumpWoodRestService.list_without_pag-372"><a href="#PumpWoodRestService.list_without_pag-372"><span class="linenos">372</span></a>
</span><span id="PumpWoodRestService.list_without_pag-373"><a href="#PumpWoodRestService.list_without_pag-373"><span class="linenos">373</span></a><span class="sd">        ..: notes:</span>
</span><span id="PumpWoodRestService.list_without_pag-374"><a href="#PumpWoodRestService.list_without_pag-374"><span class="linenos">374</span></a><span class="sd">            Models with deleted field will have objects with deleted=True</span>
</span><span id="PumpWoodRestService.list_without_pag-375"><a href="#PumpWoodRestService.list_without_pag-375"><span class="linenos">375</span></a><span class="sd">            excluded by default from results. To retrive these objects</span>
</span><span id="PumpWoodRestService.list_without_pag-376"><a href="#PumpWoodRestService.list_without_pag-376"><span class="linenos">376</span></a><span class="sd">            explicity define `exclude_dict` `{&#39;deleted&#39;: None}` or</span>
</span><span id="PumpWoodRestService.list_without_pag-377"><a href="#PumpWoodRestService.list_without_pag-377"><span class="linenos">377</span></a><span class="sd">            `{&#39;deleted&#39;: False}`.</span>
</span><span id="PumpWoodRestService.list_without_pag-378"><a href="#PumpWoodRestService.list_without_pag-378"><span class="linenos">378</span></a>
</span><span id="PumpWoodRestService.list_without_pag-379"><a href="#PumpWoodRestService.list_without_pag-379"><span class="linenos">379</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService.list_without_pag-380"><a href="#PumpWoodRestService.list_without_pag-380"><span class="linenos">380</span></a><span class="sd">            Be careful with the number of the objects that will be fetched!</span>
</span><span id="PumpWoodRestService.list_without_pag-381"><a href="#PumpWoodRestService.list_without_pag-381"><span class="linenos">381</span></a><span class="sd">            This end-point does not paginate data returning all information</span>
</span><span id="PumpWoodRestService.list_without_pag-382"><a href="#PumpWoodRestService.list_without_pag-382"><span class="linenos">382</span></a><span class="sd">            of query result.</span>
</span><span id="PumpWoodRestService.list_without_pag-383"><a href="#PumpWoodRestService.list_without_pag-383"><span class="linenos">383</span></a>
</span><span id="PumpWoodRestService.list_without_pag-384"><a href="#PumpWoodRestService.list_without_pag-384"><span class="linenos">384</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.list_without_pag-385"><a href="#PumpWoodRestService.list_without_pag-385"><span class="linenos">385</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.list_without_pag-386"><a href="#PumpWoodRestService.list_without_pag-386"><span class="linenos">386</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-387"><a href="#PumpWoodRestService.list_without_pag-387"><span class="linenos">387</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.list_without_pag-388"><a href="#PumpWoodRestService.list_without_pag-388"><span class="linenos">388</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService.list_without_pag-389"><a href="#PumpWoodRestService.list_without_pag-389"><span class="linenos">389</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-390"><a href="#PumpWoodRestService.list_without_pag-390"><span class="linenos">390</span></a><span class="sd">        - **order_by [dict] = []:**</span>
</span><span id="PumpWoodRestService.list_without_pag-391"><a href="#PumpWoodRestService.list_without_pag-391"><span class="linenos">391</span></a><span class="sd">            Dictionary passed as `model.objects.exclude(*order_by)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-392"><a href="#PumpWoodRestService.list_without_pag-392"><span class="linenos">392</span></a><span class="sd">        - **fields [List[str]] = []:**</span>
</span><span id="PumpWoodRestService.list_without_pag-393"><a href="#PumpWoodRestService.list_without_pag-393"><span class="linenos">393</span></a><span class="sd">            List of fields that should be returned on results objects.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-394"><a href="#PumpWoodRestService.list_without_pag-394"><span class="linenos">394</span></a><span class="sd">        - **default_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService.list_without_pag-395"><a href="#PumpWoodRestService.list_without_pag-395"><span class="linenos">395</span></a><span class="sd">            If serializer `list_fields` should be used to filter the</span>
</span><span id="PumpWoodRestService.list_without_pag-396"><a href="#PumpWoodRestService.list_without_pag-396"><span class="linenos">396</span></a><span class="sd">            returned fields.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-397"><a href="#PumpWoodRestService.list_without_pag-397"><span class="linenos">397</span></a><span class="sd">        - **foreign_key_fields [bool] = False:**</span>
</span><span id="PumpWoodRestService.list_without_pag-398"><a href="#PumpWoodRestService.list_without_pag-398"><span class="linenos">398</span></a><span class="sd">            If foreign keys should be returned with object data.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.list_without_pag-399"><a href="#PumpWoodRestService.list_without_pag-399"><span class="linenos">399</span></a>
</span><span id="PumpWoodRestService.list_without_pag-400"><a href="#PumpWoodRestService.list_without_pag-400"><span class="linenos">400</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.list_without_pag-401"><a href="#PumpWoodRestService.list_without_pag-401"><span class="linenos">401</span></a><span class="sd">        No query data.</span>
</span><span id="PumpWoodRestService.list_without_pag-402"><a href="#PumpWoodRestService.list_without_pag-402"><span class="linenos">402</span></a>
</span><span id="PumpWoodRestService.list_without_pag-403"><a href="#PumpWoodRestService.list_without_pag-403"><span class="linenos">403</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.list_without_pag-404"><a href="#PumpWoodRestService.list_without_pag-404"><span class="linenos">404</span></a><span class="sd">            request: Django request object.</span>
</span><span id="PumpWoodRestService.list_without_pag-405"><a href="#PumpWoodRestService.list_without_pag-405"><span class="linenos">405</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.list_without_pag-406"><a href="#PumpWoodRestService.list_without_pag-406"><span class="linenos">406</span></a><span class="sd">            Return the result of the query **without** pagination . Objects</span>
</span><span id="PumpWoodRestService.list_without_pag-407"><a href="#PumpWoodRestService.list_without_pag-407"><span class="linenos">407</span></a><span class="sd">            are serialized using `serializer` attribute.</span>
</span><span id="PumpWoodRestService.list_without_pag-408"><a href="#PumpWoodRestService.list_without_pag-408"><span class="linenos">408</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.list_without_pag-409"><a href="#PumpWoodRestService.list_without_pag-409"><span class="linenos">409</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodRestService.list_without_pag-410"><a href="#PumpWoodRestService.list_without_pag-410"><span class="linenos">410</span></a><span class="sd">                Raise if any error when treating the request.</span>
</span><span id="PumpWoodRestService.list_without_pag-411"><a href="#PumpWoodRestService.list_without_pag-411"><span class="linenos">411</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_without_pag-412"><a href="#PumpWoodRestService.list_without_pag-412"><span class="linenos">412</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_without_pag-413"><a href="#PumpWoodRestService.list_without_pag-413"><span class="linenos">413</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.list_without_pag-414"><a href="#PumpWoodRestService.list_without_pag-414"><span class="linenos">414</span></a>
</span><span id="PumpWoodRestService.list_without_pag-415"><a href="#PumpWoodRestService.list_without_pag-415"><span class="linenos">415</span></a>            <span class="c1"># Serializer parameters</span>
</span><span id="PumpWoodRestService.list_without_pag-416"><a href="#PumpWoodRestService.list_without_pag-416"><span class="linenos">416</span></a>            <span class="n">fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-417"><a href="#PumpWoodRestService.list_without_pag-417"><span class="linenos">417</span></a>            <span class="n">default_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-418"><a href="#PumpWoodRestService.list_without_pag-418"><span class="linenos">418</span></a>            <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;foreign_key_fields&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-419"><a href="#PumpWoodRestService.list_without_pag-419"><span class="linenos">419</span></a>
</span><span id="PumpWoodRestService.list_without_pag-420"><a href="#PumpWoodRestService.list_without_pag-420"><span class="linenos">420</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.list_without_pag-421"><a href="#PumpWoodRestService.list_without_pag-421"><span class="linenos">421</span></a>            <span class="c1"># Do not display deleted objects if not explicity set to display</span>
</span><span id="PumpWoodRestService.list_without_pag-422"><a href="#PumpWoodRestService.list_without_pag-422"><span class="linenos">422</span></a>            <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;exclude_dict&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodRestService.list_without_pag-423"><a href="#PumpWoodRestService.list_without_pag-423"><span class="linenos">423</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodRestService.list_without_pag-424"><a href="#PumpWoodRestService.list_without_pag-424"><span class="linenos">424</span></a>                <span class="n">exclude_dict_keys</span> <span class="o">=</span> <span class="n">exclude_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list_without_pag-425"><a href="#PumpWoodRestService.list_without_pag-425"><span class="linenos">425</span></a>                <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodRestService.list_without_pag-426"><a href="#PumpWoodRestService.list_without_pag-426"><span class="linenos">426</span></a>                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude_dict_keys</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_without_pag-427"><a href="#PumpWoodRestService.list_without_pag-427"><span class="linenos">427</span></a>                    <span class="n">first</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="PumpWoodRestService.list_without_pag-428"><a href="#PumpWoodRestService.list_without_pag-428"><span class="linenos">428</span></a>                    <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&quot;deleted&quot;</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_without_pag-429"><a href="#PumpWoodRestService.list_without_pag-429"><span class="linenos">429</span></a>                        <span class="n">any_delete</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.list_without_pag-430"><a href="#PumpWoodRestService.list_without_pag-430"><span class="linenos">430</span></a>                        <span class="k">break</span>
</span><span id="PumpWoodRestService.list_without_pag-431"><a href="#PumpWoodRestService.list_without_pag-431"><span class="linenos">431</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">any_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_without_pag-432"><a href="#PumpWoodRestService.list_without_pag-432"><span class="linenos">432</span></a>                    <span class="n">exclude_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.list_without_pag-433"><a href="#PumpWoodRestService.list_without_pag-433"><span class="linenos">433</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.list_without_pag-434"><a href="#PumpWoodRestService.list_without_pag-434"><span class="linenos">434</span></a>
</span><span id="PumpWoodRestService.list_without_pag-435"><a href="#PumpWoodRestService.list_without_pag-435"><span class="linenos">435</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService.list_without_pag-436"><a href="#PumpWoodRestService.list_without_pag-436"><span class="linenos">436</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-437"><a href="#PumpWoodRestService.list_without_pag-437"><span class="linenos">437</span></a>
</span><span id="PumpWoodRestService.list_without_pag-438"><a href="#PumpWoodRestService.list_without_pag-438"><span class="linenos">438</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-439"><a href="#PumpWoodRestService.list_without_pag-439"><span class="linenos">439</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_without_pag-440"><a href="#PumpWoodRestService.list_without_pag-440"><span class="linenos">440</span></a>                <span class="n">query_set</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list_without_pag-441"><a href="#PumpWoodRestService.list_without_pag-441"><span class="linenos">441</span></a>                <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list_without_pag-442"><a href="#PumpWoodRestService.list_without_pag-442"><span class="linenos">442</span></a>                <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_without_pag-443"><a href="#PumpWoodRestService.list_without_pag-443"><span class="linenos">443</span></a>
</span><span id="PumpWoodRestService.list_without_pag-444"><a href="#PumpWoodRestService.list_without_pag-444"><span class="linenos">444</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_without_pag-445"><a href="#PumpWoodRestService.list_without_pag-445"><span class="linenos">445</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_without_pag-446"><a href="#PumpWoodRestService.list_without_pag-446"><span class="linenos">446</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>View function to list objects <strong>without</strong> pagination.</p>

<p>..: notes:
    Models with deleted field will have objects with deleted=True
    excluded by default from results. To retrive these objects
    explicity define <code>exclude_dict</code> <code>{'deleted': None}</code> or
    <code>{'deleted': False}</code>.</p>

<div class="pdoc-alert pdoc-alert-warning">

<p>Be careful with the number of the objects that will be fetched!
This end-point does not paginate data returning all information
of query result.</p>

</div>

<h6 id="request-payload-data">Request payload data:</h6>

<ul>
<li><strong>filter_dict [dict] = {}:</strong>
Dictionary passed as <code>model.objects.filter(**filter_dict)</code>.<br></li>
<li><strong>exclude_dict [dict] = {}:</strong>
Dictionary passed as
<code>model.objects.exclude(**filter_dict)</code>.<br></li>
<li><strong>order_by [dict] = []:</strong>
Dictionary passed as <code>model.objects.exclude(*order_by)</code>.<br></li>
<li><strong>fields [List[str]] = []:</strong>
List of fields that should be returned on results objects.<br></li>
<li><strong>default_fields [bool] = False:</strong>
If serializer <code>list_fields</code> should be used to filter the
returned fields.<br></li>
<li><strong>foreign_key_fields [bool] = False:</strong>
If foreign keys should be returned with object data.<br></li>
</ul>

<h6 id="request-query-data">Request query data:</h6>

<p>No query data.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return the result of the query <strong>without</strong> pagination . Objects
  are serialized using <code><a href="#PumpWoodRestService.serializer">serializer</a></code> attribute.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodQueryException:</strong>  Raise if any error when treating the request.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.retrieve" class="classattr">
                                        <input id="PumpWoodRestService.retrieve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span>, </span><span class="param"><span class="n">pk</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.retrieve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.retrieve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.retrieve-448"><a href="#PumpWoodRestService.retrieve-448"><span class="linenos">448</span></a>    <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve-449"><a href="#PumpWoodRestService.retrieve-449"><span class="linenos">449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve-450"><a href="#PumpWoodRestService.retrieve-450"><span class="linenos">450</span></a><span class="sd">        Retrieve view, uses the retrieve_serializer to return object with pk.</span>
</span><span id="PumpWoodRestService.retrieve-451"><a href="#PumpWoodRestService.retrieve-451"><span class="linenos">451</span></a>
</span><span id="PumpWoodRestService.retrieve-452"><a href="#PumpWoodRestService.retrieve-452"><span class="linenos">452</span></a><span class="sd">        Query parameters are loaded as json data, ex:</span>
</span><span id="PumpWoodRestService.retrieve-453"><a href="#PumpWoodRestService.retrieve-453"><span class="linenos">453</span></a><span class="sd">        `json.loads(request.query_params.get(&#39;fields&#39;, &#39;null&#39;))`</span>
</span><span id="PumpWoodRestService.retrieve-454"><a href="#PumpWoodRestService.retrieve-454"><span class="linenos">454</span></a>
</span><span id="PumpWoodRestService.retrieve-455"><a href="#PumpWoodRestService.retrieve-455"><span class="linenos">455</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.retrieve-456"><a href="#PumpWoodRestService.retrieve-456"><span class="linenos">456</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService.retrieve-457"><a href="#PumpWoodRestService.retrieve-457"><span class="linenos">457</span></a>
</span><span id="PumpWoodRestService.retrieve-458"><a href="#PumpWoodRestService.retrieve-458"><span class="linenos">458</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.retrieve-459"><a href="#PumpWoodRestService.retrieve-459"><span class="linenos">459</span></a><span class="sd">        - **fields [List[str]] = None:** List of the fields that should be</span>
</span><span id="PumpWoodRestService.retrieve-460"><a href="#PumpWoodRestService.retrieve-460"><span class="linenos">460</span></a><span class="sd">            returned.</span>
</span><span id="PumpWoodRestService.retrieve-461"><a href="#PumpWoodRestService.retrieve-461"><span class="linenos">461</span></a><span class="sd">        - **foreign_key_fields [bool] = False:** If foreign key should be</span>
</span><span id="PumpWoodRestService.retrieve-462"><a href="#PumpWoodRestService.retrieve-462"><span class="linenos">462</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService.retrieve-463"><a href="#PumpWoodRestService.retrieve-463"><span class="linenos">463</span></a><span class="sd">        - **related_fields [bool] = False:** If related fields should be</span>
</span><span id="PumpWoodRestService.retrieve-464"><a href="#PumpWoodRestService.retrieve-464"><span class="linenos">464</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService.retrieve-465"><a href="#PumpWoodRestService.retrieve-465"><span class="linenos">465</span></a><span class="sd">        - **default_fields [bool] = False:** If only serializer list_fields</span>
</span><span id="PumpWoodRestService.retrieve-466"><a href="#PumpWoodRestService.retrieve-466"><span class="linenos">466</span></a><span class="sd">            should be returned.</span>
</span><span id="PumpWoodRestService.retrieve-467"><a href="#PumpWoodRestService.retrieve-467"><span class="linenos">467</span></a>
</span><span id="PumpWoodRestService.retrieve-468"><a href="#PumpWoodRestService.retrieve-468"><span class="linenos">468</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.retrieve-469"><a href="#PumpWoodRestService.retrieve-469"><span class="linenos">469</span></a><span class="sd">            request [pk]:</span>
</span><span id="PumpWoodRestService.retrieve-470"><a href="#PumpWoodRestService.retrieve-470"><span class="linenos">470</span></a><span class="sd">                Django request.</span>
</span><span id="PumpWoodRestService.retrieve-471"><a href="#PumpWoodRestService.retrieve-471"><span class="linenos">471</span></a><span class="sd">            int [pk]:</span>
</span><span id="PumpWoodRestService.retrieve-472"><a href="#PumpWoodRestService.retrieve-472"><span class="linenos">472</span></a><span class="sd">                Object pk to be retrieve</span>
</span><span id="PumpWoodRestService.retrieve-473"><a href="#PumpWoodRestService.retrieve-473"><span class="linenos">473</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.retrieve-474"><a href="#PumpWoodRestService.retrieve-474"><span class="linenos">474</span></a><span class="sd">            The representation of the object with pk dumped by</span>
</span><span id="PumpWoodRestService.retrieve-475"><a href="#PumpWoodRestService.retrieve-475"><span class="linenos">475</span></a><span class="sd">            self.serializer using arguments passed on query parameters.</span>
</span><span id="PumpWoodRestService.retrieve-476"><a href="#PumpWoodRestService.retrieve-476"><span class="linenos">476</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve-477"><a href="#PumpWoodRestService.retrieve-477"><span class="linenos">477</span></a>        <span class="c1">##########################</span>
</span><span id="PumpWoodRestService.retrieve-478"><a href="#PumpWoodRestService.retrieve-478"><span class="linenos">478</span></a>        <span class="c1"># Get serializer options #</span>
</span><span id="PumpWoodRestService.retrieve-479"><a href="#PumpWoodRestService.retrieve-479"><span class="linenos">479</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve-480"><a href="#PumpWoodRestService.retrieve-480"><span class="linenos">480</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fields&#39;</span><span class="p">,</span> <span class="s1">&#39;null&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.retrieve-481"><a href="#PumpWoodRestService.retrieve-481"><span class="linenos">481</span></a>        <span class="n">foreign_key_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve-482"><a href="#PumpWoodRestService.retrieve-482"><span class="linenos">482</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foreign_key_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.retrieve-483"><a href="#PumpWoodRestService.retrieve-483"><span class="linenos">483</span></a>        <span class="n">related_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve-484"><a href="#PumpWoodRestService.retrieve-484"><span class="linenos">484</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;related_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.retrieve-485"><a href="#PumpWoodRestService.retrieve-485"><span class="linenos">485</span></a>        <span class="n">default_fields</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve-486"><a href="#PumpWoodRestService.retrieve-486"><span class="linenos">486</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;default_fields&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.retrieve-487"><a href="#PumpWoodRestService.retrieve-487"><span class="linenos">487</span></a>        <span class="c1">##########################</span>
</span><span id="PumpWoodRestService.retrieve-488"><a href="#PumpWoodRestService.retrieve-488"><span class="linenos">488</span></a>
</span><span id="PumpWoodRestService.retrieve-489"><a href="#PumpWoodRestService.retrieve-489"><span class="linenos">489</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve-490"><a href="#PumpWoodRestService.retrieve-490"><span class="linenos">490</span></a>        <span class="n">response_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve-491"><a href="#PumpWoodRestService.retrieve-491"><span class="linenos">491</span></a>            <span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve-492"><a href="#PumpWoodRestService.retrieve-492"><span class="linenos">492</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="n">foreign_key_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve-493"><a href="#PumpWoodRestService.retrieve-493"><span class="linenos">493</span></a>            <span class="n">related_fields</span><span class="o">=</span><span class="n">related_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve-494"><a href="#PumpWoodRestService.retrieve-494"><span class="linenos">494</span></a>            <span class="n">default_fields</span><span class="o">=</span><span class="n">default_fields</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.retrieve-495"><a href="#PumpWoodRestService.retrieve-495"><span class="linenos">495</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">response_data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve view, uses the retrieve_serializer to return object with pk.</p>

<p>Query parameters are loaded as json data, ex:
<code>json.loads(request.query_params.get('fields', 'null'))</code></p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>GET request only, does not have payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>fields [List[str]] = None:</strong> List of the fields that should be
returned.</li>
<li><strong>foreign_key_fields [bool] = False:</strong> If foreign key should be
returned with object data.</li>
<li><strong>related_fields [bool] = False:</strong> If related fields should be
returned with object data.</li>
<li><strong>default_fields [bool] = False:</strong> If only serializer list_fields
should be returned.</li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request [pk]:</strong>  Django request.</li>
<li><strong>int [pk]:</strong>  Object pk to be retrieve</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>The representation of the object with pk dumped by
  self.serializer using arguments passed on query parameters.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.retrieve_file" class="classattr">
                                        <input id="PumpWoodRestService.retrieve_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span>, </span><span class="param"><span class="n">pk</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">bytes</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.retrieve_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.retrieve_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.retrieve_file-497"><a href="#PumpWoodRestService.retrieve_file-497"><span class="linenos">497</span></a>    <span class="k">def</span> <span class="nf">retrieve_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_file-498"><a href="#PumpWoodRestService.retrieve_file-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve_file-499"><a href="#PumpWoodRestService.retrieve_file-499"><span class="linenos">499</span></a><span class="sd">        Read file without stream.</span>
</span><span id="PumpWoodRestService.retrieve_file-500"><a href="#PumpWoodRestService.retrieve_file-500"><span class="linenos">500</span></a>
</span><span id="PumpWoodRestService.retrieve_file-501"><a href="#PumpWoodRestService.retrieve_file-501"><span class="linenos">501</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService.retrieve_file-502"><a href="#PumpWoodRestService.retrieve_file-502"><span class="linenos">502</span></a><span class="sd">            This end-point will read de file from storage and them return the</span>
</span><span id="PumpWoodRestService.retrieve_file-503"><a href="#PumpWoodRestService.retrieve_file-503"><span class="linenos">503</span></a><span class="sd">            request. Be carefull when retriving large files (greater than</span>
</span><span id="PumpWoodRestService.retrieve_file-504"><a href="#PumpWoodRestService.retrieve_file-504"><span class="linenos">504</span></a><span class="sd">            10Mb).</span>
</span><span id="PumpWoodRestService.retrieve_file-505"><a href="#PumpWoodRestService.retrieve_file-505"><span class="linenos">505</span></a>
</span><span id="PumpWoodRestService.retrieve_file-506"><a href="#PumpWoodRestService.retrieve_file-506"><span class="linenos">506</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.retrieve_file-507"><a href="#PumpWoodRestService.retrieve_file-507"><span class="linenos">507</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService.retrieve_file-508"><a href="#PumpWoodRestService.retrieve_file-508"><span class="linenos">508</span></a>
</span><span id="PumpWoodRestService.retrieve_file-509"><a href="#PumpWoodRestService.retrieve_file-509"><span class="linenos">509</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.retrieve_file-510"><a href="#PumpWoodRestService.retrieve_file-510"><span class="linenos">510</span></a><span class="sd">        - **file_field [str]:** File field to receive stream file.</span>
</span><span id="PumpWoodRestService.retrieve_file-511"><a href="#PumpWoodRestService.retrieve_file-511"><span class="linenos">511</span></a><span class="sd">            returned with object data.</span>
</span><span id="PumpWoodRestService.retrieve_file-512"><a href="#PumpWoodRestService.retrieve_file-512"><span class="linenos">512</span></a>
</span><span id="PumpWoodRestService.retrieve_file-513"><a href="#PumpWoodRestService.retrieve_file-513"><span class="linenos">513</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.retrieve_file-514"><a href="#PumpWoodRestService.retrieve_file-514"><span class="linenos">514</span></a><span class="sd">            pk [int]:</span>
</span><span id="PumpWoodRestService.retrieve_file-515"><a href="#PumpWoodRestService.retrieve_file-515"><span class="linenos">515</span></a><span class="sd">                Pk of the object to save file field.</span>
</span><span id="PumpWoodRestService.retrieve_file-516"><a href="#PumpWoodRestService.retrieve_file-516"><span class="linenos">516</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.retrieve_file-517"><a href="#PumpWoodRestService.retrieve_file-517"><span class="linenos">517</span></a><span class="sd">            Return a file associated with object pk, file field `file_field`</span>
</span><span id="PumpWoodRestService.retrieve_file-518"><a href="#PumpWoodRestService.retrieve_file-518"><span class="linenos">518</span></a><span class="sd">            read from storage.</span>
</span><span id="PumpWoodRestService.retrieve_file-519"><a href="#PumpWoodRestService.retrieve_file-519"><span class="linenos">519</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.retrieve_file-520"><a href="#PumpWoodRestService.retrieve_file-520"><span class="linenos">520</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService.retrieve_file-521"><a href="#PumpWoodRestService.retrieve_file-521"><span class="linenos">521</span></a><span class="sd">                &#39;{field} must be set on file_fields dictionary.&#39;. Indicates</span>
</span><span id="PumpWoodRestService.retrieve_file-522"><a href="#PumpWoodRestService.retrieve_file-522"><span class="linenos">522</span></a><span class="sd">                that the requested file field was not found on view</span>
</span><span id="PumpWoodRestService.retrieve_file-523"><a href="#PumpWoodRestService.retrieve_file-523"><span class="linenos">523</span></a><span class="sd">                `file_fields` attribute.</span>
</span><span id="PumpWoodRestService.retrieve_file-524"><a href="#PumpWoodRestService.retrieve_file-524"><span class="linenos">524</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService.retrieve_file-525"><a href="#PumpWoodRestService.retrieve_file-525"><span class="linenos">525</span></a><span class="sd">                &#39;storage_object not set&#39;. Indicates that the `storage_object`</span>
</span><span id="PumpWoodRestService.retrieve_file-526"><a href="#PumpWoodRestService.retrieve_file-526"><span class="linenos">526</span></a><span class="sd">                attribute is not set at view. This view can not perform</span>
</span><span id="PumpWoodRestService.retrieve_file-527"><a href="#PumpWoodRestService.retrieve_file-527"><span class="linenos">527</span></a><span class="sd">                file operations.</span>
</span><span id="PumpWoodRestService.retrieve_file-528"><a href="#PumpWoodRestService.retrieve_file-528"><span class="linenos">528</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService.retrieve_file-529"><a href="#PumpWoodRestService.retrieve_file-529"><span class="linenos">529</span></a><span class="sd">                &#39;field [{}] is not set at object&#39;. Indicates that requested</span>
</span><span id="PumpWoodRestService.retrieve_file-530"><a href="#PumpWoodRestService.retrieve_file-530"><span class="linenos">530</span></a><span class="sd">                file field is not set on object.</span>
</span><span id="PumpWoodRestService.retrieve_file-531"><a href="#PumpWoodRestService.retrieve_file-531"><span class="linenos">531</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve_file-532"><a href="#PumpWoodRestService.retrieve_file-532"><span class="linenos">532</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_file-533"><a href="#PumpWoodRestService.retrieve_file-533"><span class="linenos">533</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve_file-534"><a href="#PumpWoodRestService.retrieve_file-534"><span class="linenos">534</span></a>                <span class="s2">&quot;storage_object not set&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-535"><a href="#PumpWoodRestService.retrieve_file-535"><span class="linenos">535</span></a>
</span><span id="PumpWoodRestService.retrieve_file-536"><a href="#PumpWoodRestService.retrieve_file-536"><span class="linenos">536</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-537"><a href="#PumpWoodRestService.retrieve_file-537"><span class="linenos">537</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService.retrieve_file-538"><a href="#PumpWoodRestService.retrieve_file-538"><span class="linenos">538</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve_file-539"><a href="#PumpWoodRestService.retrieve_file-539"><span class="linenos">539</span></a>                <span class="s2">&quot;&#39;</span><span class="si">{field}</span><span class="s2">&#39; must be set on file_fields dictionary.&quot;</span>
</span><span id="PumpWoodRestService.retrieve_file-540"><a href="#PumpWoodRestService.retrieve_file-540"><span class="linenos">540</span></a>            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-541"><a href="#PumpWoodRestService.retrieve_file-541"><span class="linenos">541</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve_file-542"><a href="#PumpWoodRestService.retrieve_file-542"><span class="linenos">542</span></a>                <span class="n">msg</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService.retrieve_file-543"><a href="#PumpWoodRestService.retrieve_file-543"><span class="linenos">543</span></a>                    <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve_file-544"><a href="#PumpWoodRestService.retrieve_file-544"><span class="linenos">544</span></a>                    <span class="n">file_field</span><span class="p">:</span> <span class="s1">&#39;not_found&#39;</span><span class="p">})</span>
</span><span id="PumpWoodRestService.retrieve_file-545"><a href="#PumpWoodRestService.retrieve_file-545"><span class="linenos">545</span></a>
</span><span id="PumpWoodRestService.retrieve_file-546"><a href="#PumpWoodRestService.retrieve_file-546"><span class="linenos">546</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-547"><a href="#PumpWoodRestService.retrieve_file-547"><span class="linenos">547</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-548"><a href="#PumpWoodRestService.retrieve_file-548"><span class="linenos">548</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">FieldFile</span><span class="p">):</span>
</span><span id="PumpWoodRestService.retrieve_file-549"><a href="#PumpWoodRestService.retrieve_file-549"><span class="linenos">549</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span>
</span><span id="PumpWoodRestService.retrieve_file-550"><a href="#PumpWoodRestService.retrieve_file-550"><span class="linenos">550</span></a>
</span><span id="PumpWoodRestService.retrieve_file-551"><a href="#PumpWoodRestService.retrieve_file-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_file-552"><a href="#PumpWoodRestService.retrieve_file-552"><span class="linenos">552</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve_file-553"><a href="#PumpWoodRestService.retrieve_file-553"><span class="linenos">553</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] is not set at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="PumpWoodRestService.retrieve_file-554"><a href="#PumpWoodRestService.retrieve_file-554"><span class="linenos">554</span></a>        <span class="n">file_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-555"><a href="#PumpWoodRestService.retrieve_file-555"><span class="linenos">555</span></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_file-556"><a href="#PumpWoodRestService.retrieve_file-556"><span class="linenos">556</span></a>
</span><span id="PumpWoodRestService.retrieve_file-557"><a href="#PumpWoodRestService.retrieve_file-557"><span class="linenos">557</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]))</span>
</span><span id="PumpWoodRestService.retrieve_file-558"><a href="#PumpWoodRestService.retrieve_file-558"><span class="linenos">558</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_data</span><span class="p">[</span><span class="s2">&quot;content_type&quot;</span><span class="p">]</span>
</span><span id="PumpWoodRestService.retrieve_file-559"><a href="#PumpWoodRestService.retrieve_file-559"><span class="linenos">559</span></a>        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="PumpWoodRestService.retrieve_file-560"><a href="#PumpWoodRestService.retrieve_file-560"><span class="linenos">560</span></a>            <span class="s1">&#39;attachment; filename=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">file_name</span>
</span><span id="PumpWoodRestService.retrieve_file-561"><a href="#PumpWoodRestService.retrieve_file-561"><span class="linenos">561</span></a>        <span class="k">return</span> <span class="n">response</span>
</span></pre></div>


            <div class="docstring"><p>Read file without stream.</p>

<div class="pdoc-alert pdoc-alert-warning">

<p>This end-point will read de file from storage and them return the
request. Be carefull when retriving large files (greater than
10Mb).</p>

</div>

<h6 id="request-payload-data">Request payload data:</h6>

<p>GET request only, does not have payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>file_field [str]:</strong> File field to receive stream file.
returned with object data.</li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>pk [int]:</strong>  Pk of the object to save file field.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a file associated with object pk, file field <code>file_field</code>
  read from storage.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  '{field} must be set on file_fields dictionary.'. Indicates
that the requested file field was not found on view
<code><a href="#PumpWoodRestService.file_fields">file_fields</a></code> attribute.</li>
<li><strong>PumpWoodForbidden:</strong>  'storage_object not set'. Indicates that the <code><a href="#PumpWoodRestService.storage_object">storage_object</a></code>
attribute is not set at view. This view can not perform
file operations.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'field [{}] is not set at object'. Indicates that requested
file field is not set on object.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.delete" class="classattr">
                                        <input id="PumpWoodRestService.delete-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span>, </span><span class="param"><span class="n">pk</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.delete-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.delete"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.delete-563"><a href="#PumpWoodRestService.delete-563"><span class="linenos">563</span></a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete-564"><a href="#PumpWoodRestService.delete-564"><span class="linenos">564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.delete-565"><a href="#PumpWoodRestService.delete-565"><span class="linenos">565</span></a><span class="sd">        Delete view.</span>
</span><span id="PumpWoodRestService.delete-566"><a href="#PumpWoodRestService.delete-566"><span class="linenos">566</span></a>
</span><span id="PumpWoodRestService.delete-567"><a href="#PumpWoodRestService.delete-567"><span class="linenos">567</span></a><span class="sd">        .. notes::</span>
</span><span id="PumpWoodRestService.delete-568"><a href="#PumpWoodRestService.delete-568"><span class="linenos">568</span></a><span class="sd">            If model has deleted field, the default behaviour will set this</span>
</span><span id="PumpWoodRestService.delete-569"><a href="#PumpWoodRestService.delete-569"><span class="linenos">569</span></a><span class="sd">            field to True not deleting the object. To force deletion it is</span>
</span><span id="PumpWoodRestService.delete-570"><a href="#PumpWoodRestService.delete-570"><span class="linenos">570</span></a><span class="sd">            necessary to use query paramenter `force_delete=True`</span>
</span><span id="PumpWoodRestService.delete-571"><a href="#PumpWoodRestService.delete-571"><span class="linenos">571</span></a>
</span><span id="PumpWoodRestService.delete-572"><a href="#PumpWoodRestService.delete-572"><span class="linenos">572</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.delete-573"><a href="#PumpWoodRestService.delete-573"><span class="linenos">573</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService.delete-574"><a href="#PumpWoodRestService.delete-574"><span class="linenos">574</span></a>
</span><span id="PumpWoodRestService.delete-575"><a href="#PumpWoodRestService.delete-575"><span class="linenos">575</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.delete-576"><a href="#PumpWoodRestService.delete-576"><span class="linenos">576</span></a><span class="sd">        - **force_delete [bool] = False:** Force deletion of models that</span>
</span><span id="PumpWoodRestService.delete-577"><a href="#PumpWoodRestService.delete-577"><span class="linenos">577</span></a><span class="sd">            have `deleted` field. If False, object with deleted</span>
</span><span id="PumpWoodRestService.delete-578"><a href="#PumpWoodRestService.delete-578"><span class="linenos">578</span></a><span class="sd">            will not be deleted, but deleted will be set as True.</span>
</span><span id="PumpWoodRestService.delete-579"><a href="#PumpWoodRestService.delete-579"><span class="linenos">579</span></a>
</span><span id="PumpWoodRestService.delete-580"><a href="#PumpWoodRestService.delete-580"><span class="linenos">580</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.delete-581"><a href="#PumpWoodRestService.delete-581"><span class="linenos">581</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.delete-582"><a href="#PumpWoodRestService.delete-582"><span class="linenos">582</span></a><span class="sd">            pk [int]: Object pk to be retrieve.</span>
</span><span id="PumpWoodRestService.delete-583"><a href="#PumpWoodRestService.delete-583"><span class="linenos">583</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.delete-584"><a href="#PumpWoodRestService.delete-584"><span class="linenos">584</span></a><span class="sd">            Return the object that was removed.</span>
</span><span id="PumpWoodRestService.delete-585"><a href="#PumpWoodRestService.delete-585"><span class="linenos">585</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.delete-586"><a href="#PumpWoodRestService.delete-586"><span class="linenos">586</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.delete-587"><a href="#PumpWoodRestService.delete-587"><span class="linenos">587</span></a>        <span class="n">force_delete</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="PumpWoodRestService.delete-588"><a href="#PumpWoodRestService.delete-588"><span class="linenos">588</span></a>            <span class="s1">&#39;force_delete&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.delete-589"><a href="#PumpWoodRestService.delete-589"><span class="linenos">589</span></a>        <span class="n">return_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.delete-590"><a href="#PumpWoodRestService.delete-590"><span class="linenos">590</span></a>
</span><span id="PumpWoodRestService.delete-591"><a href="#PumpWoodRestService.delete-591"><span class="linenos">591</span></a>        <span class="c1"># If object has deleted field, set it to True if force_delete</span>
</span><span id="PumpWoodRestService.delete-592"><a href="#PumpWoodRestService.delete-592"><span class="linenos">592</span></a>        <span class="c1"># parameter is not set, this will function for objects that</span>
</span><span id="PumpWoodRestService.delete-593"><a href="#PumpWoodRestService.delete-593"><span class="linenos">593</span></a>        <span class="c1"># deletion is not a good pratice for keep data audit.</span>
</span><span id="PumpWoodRestService.delete-594"><a href="#PumpWoodRestService.delete-594"><span class="linenos">594</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_delete</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete-595"><a href="#PumpWoodRestService.delete-595"><span class="linenos">595</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">deleted</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.delete-596"><a href="#PumpWoodRestService.delete-596"><span class="linenos">596</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService.delete-597"><a href="#PumpWoodRestService.delete-597"><span class="linenos">597</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete-598"><a href="#PumpWoodRestService.delete-598"><span class="linenos">598</span></a>            <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="PumpWoodRestService.delete-599"><a href="#PumpWoodRestService.delete-599"><span class="linenos">599</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">return_data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Delete view.</p>

<p>.. notes::
    If model has deleted field, the default behaviour will set this
    field to True not deleting the object. To force deletion it is
    necessary to use query paramenter <code>force_delete=True</code></p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>GET request only, does not have payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>force_delete [bool] = False:</strong> Force deletion of models that
have <code>deleted</code> field. If False, object with deleted
will not be deleted, but deleted will be set as True.</li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
<li><strong>pk [int]:</strong>  Object pk to be retrieve.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return the object that was removed.</p>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.delete_many" class="classattr">
                                        <input id="PumpWoodRestService.delete_many-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_many</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.delete_many-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.delete_many"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.delete_many-601"><a href="#PumpWoodRestService.delete_many-601"><span class="linenos">601</span></a>    <span class="k">def</span> <span class="nf">delete_many</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete_many-602"><a href="#PumpWoodRestService.delete_many-602"><span class="linenos">602</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.delete_many-603"><a href="#PumpWoodRestService.delete_many-603"><span class="linenos">603</span></a><span class="sd">        Delete many data using filter.</span>
</span><span id="PumpWoodRestService.delete_many-604"><a href="#PumpWoodRestService.delete_many-604"><span class="linenos">604</span></a>
</span><span id="PumpWoodRestService.delete_many-605"><a href="#PumpWoodRestService.delete_many-605"><span class="linenos">605</span></a><span class="sd">        .. warning::</span>
</span><span id="PumpWoodRestService.delete_many-606"><a href="#PumpWoodRestService.delete_many-606"><span class="linenos">606</span></a><span class="sd">            This action will delete all objects that satisfies the query</span>
</span><span id="PumpWoodRestService.delete_many-607"><a href="#PumpWoodRestService.delete_many-607"><span class="linenos">607</span></a><span class="sd">            filter_dict and exclude_dict. It will also delete objects with</span>
</span><span id="PumpWoodRestService.delete_many-608"><a href="#PumpWoodRestService.delete_many-608"><span class="linenos">608</span></a><span class="sd">            deleted fields. **THIS REQUEST CAN NOT BE UNDONE**.</span>
</span><span id="PumpWoodRestService.delete_many-609"><a href="#PumpWoodRestService.delete_many-609"><span class="linenos">609</span></a>
</span><span id="PumpWoodRestService.delete_many-610"><a href="#PumpWoodRestService.delete_many-610"><span class="linenos">610</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.delete_many-611"><a href="#PumpWoodRestService.delete_many-611"><span class="linenos">611</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService.delete_many-612"><a href="#PumpWoodRestService.delete_many-612"><span class="linenos">612</span></a>
</span><span id="PumpWoodRestService.delete_many-613"><a href="#PumpWoodRestService.delete_many-613"><span class="linenos">613</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.delete_many-614"><a href="#PumpWoodRestService.delete_many-614"><span class="linenos">614</span></a><span class="sd">        - **filter_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.delete_many-615"><a href="#PumpWoodRestService.delete_many-615"><span class="linenos">615</span></a><span class="sd">            Dictionary passed as `model.objects.filter(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.delete_many-616"><a href="#PumpWoodRestService.delete_many-616"><span class="linenos">616</span></a><span class="sd">        - **exclude_dict [dict] = {}:**</span>
</span><span id="PumpWoodRestService.delete_many-617"><a href="#PumpWoodRestService.delete_many-617"><span class="linenos">617</span></a><span class="sd">            Dictionary passed as</span>
</span><span id="PumpWoodRestService.delete_many-618"><a href="#PumpWoodRestService.delete_many-618"><span class="linenos">618</span></a><span class="sd">            `model.objects.exclude(**filter_dict)`.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.delete_many-619"><a href="#PumpWoodRestService.delete_many-619"><span class="linenos">619</span></a>
</span><span id="PumpWoodRestService.delete_many-620"><a href="#PumpWoodRestService.delete_many-620"><span class="linenos">620</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.delete_many-621"><a href="#PumpWoodRestService.delete_many-621"><span class="linenos">621</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.delete_many-622"><a href="#PumpWoodRestService.delete_many-622"><span class="linenos">622</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.delete_many-623"><a href="#PumpWoodRestService.delete_many-623"><span class="linenos">623</span></a><span class="sd">            True if operation has completed.</span>
</span><span id="PumpWoodRestService.delete_many-624"><a href="#PumpWoodRestService.delete_many-624"><span class="linenos">624</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.delete_many-625"><a href="#PumpWoodRestService.delete_many-625"><span class="linenos">625</span></a><span class="sd">            PumpWoodObjectDeleteException:</span>
</span><span id="PumpWoodRestService.delete_many-626"><a href="#PumpWoodRestService.delete_many-626"><span class="linenos">626</span></a><span class="sd">                If any error raised when performing request.</span>
</span><span id="PumpWoodRestService.delete_many-627"><a href="#PumpWoodRestService.delete_many-627"><span class="linenos">627</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.delete_many-628"><a href="#PumpWoodRestService.delete_many-628"><span class="linenos">628</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete_many-629"><a href="#PumpWoodRestService.delete_many-629"><span class="linenos">629</span></a>            <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
</span><span id="PumpWoodRestService.delete_many-630"><a href="#PumpWoodRestService.delete_many-630"><span class="linenos">630</span></a>            <span class="n">arg_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.delete_many-631"><a href="#PumpWoodRestService.delete_many-631"><span class="linenos">631</span></a>
</span><span id="PumpWoodRestService.delete_many-632"><a href="#PumpWoodRestService.delete_many-632"><span class="linenos">632</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService.delete_many-633"><a href="#PumpWoodRestService.delete_many-633"><span class="linenos">633</span></a>            <span class="n">query_set</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span id="PumpWoodRestService.delete_many-634"><a href="#PumpWoodRestService.delete_many-634"><span class="linenos">634</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span id="PumpWoodRestService.delete_many-635"><a href="#PumpWoodRestService.delete_many-635"><span class="linenos">635</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService.delete_many-636"><a href="#PumpWoodRestService.delete_many-636"><span class="linenos">636</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDeleteException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.delete_many-637"><a href="#PumpWoodRestService.delete_many-637"><span class="linenos">637</span></a>                <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Delete many data using filter.</p>

<div class="pdoc-alert pdoc-alert-warning">

<p>This action will delete all objects that satisfies the query
filter_dict and exclude_dict. It will also delete objects with
deleted fields. <strong>THIS REQUEST CAN NOT BE UNDONE</strong>.</p>

</div>

<h6 id="request-payload-data">Request payload data:</h6>

<p>GET request only, does not have payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>filter_dict [dict] = {}:</strong>
Dictionary passed as <code>model.objects.filter(**filter_dict)</code>.<br></li>
<li><strong>exclude_dict [dict] = {}:</strong>
Dictionary passed as
<code>model.objects.exclude(**filter_dict)</code>.<br></li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>True if operation has completed.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodObjectDeleteException:</strong>  If any error raised when performing request.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.remove_file_field" class="classattr">
                                        <input id="PumpWoodRestService.remove_file_field-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_file_field</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span>, </span><span class="param"><span class="n">pk</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.remove_file_field-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.remove_file_field"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.remove_file_field-639"><a href="#PumpWoodRestService.remove_file_field-639"><span class="linenos">639</span></a>    <span class="k">def</span> <span class="nf">remove_file_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">pk</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="PumpWoodRestService.remove_file_field-640"><a href="#PumpWoodRestService.remove_file_field-640"><span class="linenos">640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.remove_file_field-641"><a href="#PumpWoodRestService.remove_file_field-641"><span class="linenos">641</span></a><span class="sd">        Remove file field.</span>
</span><span id="PumpWoodRestService.remove_file_field-642"><a href="#PumpWoodRestService.remove_file_field-642"><span class="linenos">642</span></a>
</span><span id="PumpWoodRestService.remove_file_field-643"><a href="#PumpWoodRestService.remove_file_field-643"><span class="linenos">643</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.remove_file_field-644"><a href="#PumpWoodRestService.remove_file_field-644"><span class="linenos">644</span></a><span class="sd">        GET request only, does not have payload.</span>
</span><span id="PumpWoodRestService.remove_file_field-645"><a href="#PumpWoodRestService.remove_file_field-645"><span class="linenos">645</span></a>
</span><span id="PumpWoodRestService.remove_file_field-646"><a href="#PumpWoodRestService.remove_file_field-646"><span class="linenos">646</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.remove_file_field-647"><a href="#PumpWoodRestService.remove_file_field-647"><span class="linenos">647</span></a><span class="sd">        - **file_field [str]:**</span>
</span><span id="PumpWoodRestService.remove_file_field-648"><a href="#PumpWoodRestService.remove_file_field-648"><span class="linenos">648</span></a><span class="sd">            File field associated with a file that will be removed.&lt;br&gt;</span>
</span><span id="PumpWoodRestService.remove_file_field-649"><a href="#PumpWoodRestService.remove_file_field-649"><span class="linenos">649</span></a>
</span><span id="PumpWoodRestService.remove_file_field-650"><a href="#PumpWoodRestService.remove_file_field-650"><span class="linenos">650</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.remove_file_field-651"><a href="#PumpWoodRestService.remove_file_field-651"><span class="linenos">651</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.remove_file_field-652"><a href="#PumpWoodRestService.remove_file_field-652"><span class="linenos">652</span></a><span class="sd">            pk [int]: pk of the object.</span>
</span><span id="PumpWoodRestService.remove_file_field-653"><a href="#PumpWoodRestService.remove_file_field-653"><span class="linenos">653</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.remove_file_field-654"><a href="#PumpWoodRestService.remove_file_field-654"><span class="linenos">654</span></a><span class="sd">            True if the object was removed.</span>
</span><span id="PumpWoodRestService.remove_file_field-655"><a href="#PumpWoodRestService.remove_file_field-655"><span class="linenos">655</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.remove_file_field-656"><a href="#PumpWoodRestService.remove_file_field-656"><span class="linenos">656</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodRestService.remove_file_field-657"><a href="#PumpWoodRestService.remove_file_field-657"><span class="linenos">657</span></a><span class="sd">                &#39;file_field must be set on self.file_fields dictionary.&#39;.</span>
</span><span id="PumpWoodRestService.remove_file_field-658"><a href="#PumpWoodRestService.remove_file_field-658"><span class="linenos">658</span></a><span class="sd">                Indicates that `file_file` is not in file_fields keys of</span>
</span><span id="PumpWoodRestService.remove_file_field-659"><a href="#PumpWoodRestService.remove_file_field-659"><span class="linenos">659</span></a><span class="sd">                the view.</span>
</span><span id="PumpWoodRestService.remove_file_field-660"><a href="#PumpWoodRestService.remove_file_field-660"><span class="linenos">660</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService.remove_file_field-661"><a href="#PumpWoodRestService.remove_file_field-661"><span class="linenos">661</span></a><span class="sd">                &#39;field [{}] not found at object&#39;. Indicates that file was not</span>
</span><span id="PumpWoodRestService.remove_file_field-662"><a href="#PumpWoodRestService.remove_file_field-662"><span class="linenos">662</span></a><span class="sd">                found on storage.</span>
</span><span id="PumpWoodRestService.remove_file_field-663"><a href="#PumpWoodRestService.remove_file_field-663"><span class="linenos">663</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.remove_file_field-664"><a href="#PumpWoodRestService.remove_file_field-664"><span class="linenos">664</span></a>        <span class="n">file_field</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;file_field&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-665"><a href="#PumpWoodRestService.remove_file_field-665"><span class="linenos">665</span></a>        <span class="k">if</span> <span class="n">file_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService.remove_file_field-666"><a href="#PumpWoodRestService.remove_file_field-666"><span class="linenos">666</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService.remove_file_field-667"><a href="#PumpWoodRestService.remove_file_field-667"><span class="linenos">667</span></a>                <span class="s2">&quot;file_field must be set on self.file_fields dictionary.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-668"><a href="#PumpWoodRestService.remove_file_field-668"><span class="linenos">668</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-669"><a href="#PumpWoodRestService.remove_file_field-669"><span class="linenos">669</span></a>
</span><span id="PumpWoodRestService.remove_file_field-670"><a href="#PumpWoodRestService.remove_file_field-670"><span class="linenos">670</span></a>        <span class="n">file</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-671"><a href="#PumpWoodRestService.remove_file_field-671"><span class="linenos">671</span></a>        <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.remove_file_field-672"><a href="#PumpWoodRestService.remove_file_field-672"><span class="linenos">672</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService.remove_file_field-673"><a href="#PumpWoodRestService.remove_file_field-673"><span class="linenos">673</span></a>                <span class="s2">&quot;field [</span><span class="si">{}</span><span class="s2">] not found at object&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_field</span><span class="p">))</span>
</span><span id="PumpWoodRestService.remove_file_field-674"><a href="#PumpWoodRestService.remove_file_field-674"><span class="linenos">674</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.remove_file_field-675"><a href="#PumpWoodRestService.remove_file_field-675"><span class="linenos">675</span></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span>
</span><span id="PumpWoodRestService.remove_file_field-676"><a href="#PumpWoodRestService.remove_file_field-676"><span class="linenos">676</span></a>        <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file_field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-677"><a href="#PumpWoodRestService.remove_file_field-677"><span class="linenos">677</span></a>        <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService.remove_file_field-678"><a href="#PumpWoodRestService.remove_file_field-678"><span class="linenos">678</span></a>
</span><span id="PumpWoodRestService.remove_file_field-679"><a href="#PumpWoodRestService.remove_file_field-679"><span class="linenos">679</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodRestService.remove_file_field-680"><a href="#PumpWoodRestService.remove_file_field-680"><span class="linenos">680</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-681"><a href="#PumpWoodRestService.remove_file_field-681"><span class="linenos">681</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="PumpWoodRestService.remove_file_field-682"><a href="#PumpWoodRestService.remove_file_field-682"><span class="linenos">682</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodRestService.remove_file_field-683"><a href="#PumpWoodRestService.remove_file_field-683"><span class="linenos">683</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Remove file field.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>GET request only, does not have payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>file_field [str]:</strong>
File field associated with a file that will be removed.<br></li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
<li><strong>pk [int]:</strong>  pk of the object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>True if the object was removed.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'file_field must be set on self.file_fields dictionary.'.
Indicates that <code>file_file</code> is not in file_fields keys of
the view.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'field [{}] not found at object'. Indicates that file was not
found on storage.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.save" class="classattr">
                                        <input id="PumpWoodRestService.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.save-685"><a href="#PumpWoodRestService.save-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-686"><a href="#PumpWoodRestService.save-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.save-687"><a href="#PumpWoodRestService.save-687"><span class="linenos">687</span></a><span class="sd">        Save and update object acording to request.data.</span>
</span><span id="PumpWoodRestService.save-688"><a href="#PumpWoodRestService.save-688"><span class="linenos">688</span></a>
</span><span id="PumpWoodRestService.save-689"><a href="#PumpWoodRestService.save-689"><span class="linenos">689</span></a><span class="sd">        Object will be updated if request.data[&#39;pk&#39;] is not None.</span>
</span><span id="PumpWoodRestService.save-690"><a href="#PumpWoodRestService.save-690"><span class="linenos">690</span></a>
</span><span id="PumpWoodRestService.save-691"><a href="#PumpWoodRestService.save-691"><span class="linenos">691</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.save-692"><a href="#PumpWoodRestService.save-692"><span class="linenos">692</span></a><span class="sd">        Object to be saved. If a pk is set them the object will be updated,</span>
</span><span id="PumpWoodRestService.save-693"><a href="#PumpWoodRestService.save-693"><span class="linenos">693</span></a><span class="sd">        if pk is None or not set a new object will be created.</span>
</span><span id="PumpWoodRestService.save-694"><a href="#PumpWoodRestService.save-694"><span class="linenos">694</span></a>
</span><span id="PumpWoodRestService.save-695"><a href="#PumpWoodRestService.save-695"><span class="linenos">695</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.save-696"><a href="#PumpWoodRestService.save-696"><span class="linenos">696</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService.save-697"><a href="#PumpWoodRestService.save-697"><span class="linenos">697</span></a>
</span><span id="PumpWoodRestService.save-698"><a href="#PumpWoodRestService.save-698"><span class="linenos">698</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.save-699"><a href="#PumpWoodRestService.save-699"><span class="linenos">699</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.save-700"><a href="#PumpWoodRestService.save-700"><span class="linenos">700</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.save-701"><a href="#PumpWoodRestService.save-701"><span class="linenos">701</span></a><span class="sd">            Serialized new/updated object.</span>
</span><span id="PumpWoodRestService.save-702"><a href="#PumpWoodRestService.save-702"><span class="linenos">702</span></a>
</span><span id="PumpWoodRestService.save-703"><a href="#PumpWoodRestService.save-703"><span class="linenos">703</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.save-704"><a href="#PumpWoodRestService.save-704"><span class="linenos">704</span></a><span class="sd">            PumpWoodException:</span>
</span><span id="PumpWoodRestService.save-705"><a href="#PumpWoodRestService.save-705"><span class="linenos">705</span></a><span class="sd">                &#39;Object model class diferent from {service_model} :</span>
</span><span id="PumpWoodRestService.save-706"><a href="#PumpWoodRestService.save-706"><span class="linenos">706</span></a><span class="sd">                {service_model}&#39;. Indicates that the end-point and the</span>
</span><span id="PumpWoodRestService.save-707"><a href="#PumpWoodRestService.save-707"><span class="linenos">707</span></a><span class="sd">                model_class of the object are impatible.</span>
</span><span id="PumpWoodRestService.save-708"><a href="#PumpWoodRestService.save-708"><span class="linenos">708</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodRestService.save-709"><a href="#PumpWoodRestService.save-709"><span class="linenos">709</span></a><span class="sd">                &#39;Error when validating fields when saving object&#39;. Indicates</span>
</span><span id="PumpWoodRestService.save-710"><a href="#PumpWoodRestService.save-710"><span class="linenos">710</span></a><span class="sd">                that there were error when validating object</span>
</span><span id="PumpWoodRestService.save-711"><a href="#PumpWoodRestService.save-711"><span class="linenos">711</span></a><span class="sd">                at the serializer. Error payload will have the fields with</span>
</span><span id="PumpWoodRestService.save-712"><a href="#PumpWoodRestService.save-712"><span class="linenos">712</span></a><span class="sd">                error as keys of the dictonary.</span>
</span><span id="PumpWoodRestService.save-713"><a href="#PumpWoodRestService.save-713"><span class="linenos">713</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.save-714"><a href="#PumpWoodRestService.save-714"><span class="linenos">714</span></a>        <span class="n">request_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.save-715"><a href="#PumpWoodRestService.save-715"><span class="linenos">715</span></a>        <span class="k">if</span> <span class="s2">&quot;application/json&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">content_type</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="PumpWoodRestService.save-716"><a href="#PumpWoodRestService.save-716"><span class="linenos">716</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.save-717"><a href="#PumpWoodRestService.save-717"><span class="linenos">717</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-718"><a href="#PumpWoodRestService.save-718"><span class="linenos">718</span></a>            <span class="n">request_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
</span><span id="PumpWoodRestService.save-719"><a href="#PumpWoodRestService.save-719"><span class="linenos">719</span></a>            <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__json__&quot;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.save-720"><a href="#PumpWoodRestService.save-720"><span class="linenos">720</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-721"><a href="#PumpWoodRestService.save-721"><span class="linenos">721</span></a>
</span><span id="PumpWoodRestService.save-722"><a href="#PumpWoodRestService.save-722"><span class="linenos">722</span></a>        <span class="n">data_pk</span> <span class="o">=</span> <span class="n">request_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-723"><a href="#PumpWoodRestService.save-723"><span class="linenos">723</span></a>        <span class="n">saved_obj</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.save-724"><a href="#PumpWoodRestService.save-724"><span class="linenos">724</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService.save-725"><a href="#PumpWoodRestService.save-725"><span class="linenos">725</span></a>            <span class="n">request_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-726"><a href="#PumpWoodRestService.save-726"><span class="linenos">726</span></a>
</span><span id="PumpWoodRestService.save-727"><a href="#PumpWoodRestService.save-727"><span class="linenos">727</span></a>        <span class="c1"># update</span>
</span><span id="PumpWoodRestService.save-728"><a href="#PumpWoodRestService.save-728"><span class="linenos">728</span></a>        <span class="k">if</span> <span class="n">data_pk</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-729"><a href="#PumpWoodRestService.save-729"><span class="linenos">729</span></a>            <span class="n">data_to_update</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">data_pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-730"><a href="#PumpWoodRestService.save-730"><span class="linenos">730</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-731"><a href="#PumpWoodRestService.save-731"><span class="linenos">731</span></a>                <span class="n">data_to_update</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-732"><a href="#PumpWoodRestService.save-732"><span class="linenos">732</span></a>                <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="PumpWoodRestService.save-733"><a href="#PumpWoodRestService.save-733"><span class="linenos">733</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-734"><a href="#PumpWoodRestService.save-734"><span class="linenos">734</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span>
</span><span id="PumpWoodRestService.save-735"><a href="#PumpWoodRestService.save-735"><span class="linenos">735</span></a>        <span class="c1"># save</span>
</span><span id="PumpWoodRestService.save-736"><a href="#PumpWoodRestService.save-736"><span class="linenos">736</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-737"><a href="#PumpWoodRestService.save-737"><span class="linenos">737</span></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-738"><a href="#PumpWoodRestService.save-738"><span class="linenos">738</span></a>                <span class="n">data</span><span class="o">=</span><span class="n">request_data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
</span><span id="PumpWoodRestService.save-739"><a href="#PumpWoodRestService.save-739"><span class="linenos">739</span></a>            <span class="n">saved_obj</span> <span class="o">=</span> <span class="n">save_serializer_instance</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-740"><a href="#PumpWoodRestService.save-740"><span class="linenos">740</span></a>            <span class="n">response_status</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span>
</span><span id="PumpWoodRestService.save-741"><a href="#PumpWoodRestService.save-741"><span class="linenos">741</span></a>
</span><span id="PumpWoodRestService.save-742"><a href="#PumpWoodRestService.save-742"><span class="linenos">742</span></a>        <span class="c1"># Uploading files</span>
</span><span id="PumpWoodRestService.save-743"><a href="#PumpWoodRestService.save-743"><span class="linenos">743</span></a>        <span class="n">object_errors</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.save-744"><a href="#PumpWoodRestService.save-744"><span class="linenos">744</span></a>        <span class="n">file_save_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-745"><a href="#PumpWoodRestService.save-745"><span class="linenos">745</span></a>            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%Hh%Mm%Ss&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-746"><a href="#PumpWoodRestService.save-746"><span class="linenos">746</span></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="PumpWoodRestService.save-747"><a href="#PumpWoodRestService.save-747"><span class="linenos">747</span></a>            <span class="n">field_errors</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService.save-748"><a href="#PumpWoodRestService.save-748"><span class="linenos">748</span></a>            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-749"><a href="#PumpWoodRestService.save-749"><span class="linenos">749</span></a>                <span class="n">file</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
</span><span id="PumpWoodRestService.save-750"><a href="#PumpWoodRestService.save-750"><span class="linenos">750</span></a>
</span><span id="PumpWoodRestService.save-751"><a href="#PumpWoodRestService.save-751"><span class="linenos">751</span></a>                <span class="n">file_name</span> <span class="o">=</span> <span class="n">secure_filename</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-752"><a href="#PumpWoodRestService.save-752"><span class="linenos">752</span></a>                <span class="n">field_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_extension</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-753"><a href="#PumpWoodRestService.save-753"><span class="linenos">753</span></a>                    <span class="n">filename</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-754"><a href="#PumpWoodRestService.save-754"><span class="linenos">754</span></a>                    <span class="n">allowed_extensions</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">file_fields</span><span class="p">[</span><span class="n">field</span><span class="p">]))</span>
</span><span id="PumpWoodRestService.save-755"><a href="#PumpWoodRestService.save-755"><span class="linenos">755</span></a>
</span><span id="PumpWoodRestService.save-756"><a href="#PumpWoodRestService.save-756"><span class="linenos">756</span></a>                <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">___</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-757"><a href="#PumpWoodRestService.save-757"><span class="linenos">757</span></a>                    <span class="nb">str</span><span class="p">(</span><span class="n">saved_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
</span><span id="PumpWoodRestService.save-758"><a href="#PumpWoodRestService.save-758"><span class="linenos">758</span></a>                    <span class="n">file_save_time</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-759"><a href="#PumpWoodRestService.save-759"><span class="linenos">759</span></a>                    <span class="n">file_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-760"><a href="#PumpWoodRestService.save-760"><span class="linenos">760</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_errors</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-761"><a href="#PumpWoodRestService.save-761"><span class="linenos">761</span></a>                    <span class="n">object_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_errors</span>
</span><span id="PumpWoodRestService.save-762"><a href="#PumpWoodRestService.save-762"><span class="linenos">762</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-763"><a href="#PumpWoodRestService.save-763"><span class="linenos">763</span></a>                    <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="PumpWoodRestService.save-764"><a href="#PumpWoodRestService.save-764"><span class="linenos">764</span></a>                    <span class="n">file_path</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{model_class}</span><span class="s1">__</span><span class="si">{field}</span><span class="s1">/&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-765"><a href="#PumpWoodRestService.save-765"><span class="linenos">765</span></a>                        <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">field</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-766"><a href="#PumpWoodRestService.save-766"><span class="linenos">766</span></a>                    <span class="n">storage_filepath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_object</span><span class="o">.</span><span class="n">write_file</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-767"><a href="#PumpWoodRestService.save-767"><span class="linenos">767</span></a>                        <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-768"><a href="#PumpWoodRestService.save-768"><span class="linenos">768</span></a>                        <span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
</span><span id="PumpWoodRestService.save-769"><a href="#PumpWoodRestService.save-769"><span class="linenos">769</span></a>                        <span class="n">content_type</span><span class="o">=</span><span class="n">file</span><span class="o">.</span><span class="n">content_type</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-770"><a href="#PumpWoodRestService.save-770"><span class="linenos">770</span></a>                        <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;overide&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-771"><a href="#PumpWoodRestService.save-771"><span class="linenos">771</span></a>                    <span class="nb">setattr</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">storage_filepath</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-772"><a href="#PumpWoodRestService.save-772"><span class="linenos">772</span></a>
</span><span id="PumpWoodRestService.save-773"><a href="#PumpWoodRestService.save-773"><span class="linenos">773</span></a>        <span class="k">if</span> <span class="n">object_errors</span> <span class="o">!=</span> <span class="p">{}:</span>
</span><span id="PumpWoodRestService.save-774"><a href="#PumpWoodRestService.save-774"><span class="linenos">774</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;error when saving object: &quot;</span> \
</span><span id="PumpWoodRestService.save-775"><a href="#PumpWoodRestService.save-775"><span class="linenos">775</span></a>                <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;error when updating object: &quot;</span>
</span><span id="PumpWoodRestService.save-776"><a href="#PumpWoodRestService.save-776"><span class="linenos">776</span></a>            <span class="n">payload</span> <span class="o">=</span> <span class="n">object_errors</span>
</span><span id="PumpWoodRestService.save-777"><a href="#PumpWoodRestService.save-777"><span class="linenos">777</span></a>            <span class="n">message_to_append</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService.save-778"><a href="#PumpWoodRestService.save-778"><span class="linenos">778</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">object_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.save-779"><a href="#PumpWoodRestService.save-779"><span class="linenos">779</span></a>                <span class="n">message_to_append</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="PumpWoodRestService.save-780"><a href="#PumpWoodRestService.save-780"><span class="linenos">780</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="s2">&quot;; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message_to_append</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-781"><a href="#PumpWoodRestService.save-781"><span class="linenos">781</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-782"><a href="#PumpWoodRestService.save-782"><span class="linenos">782</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</span><span id="PumpWoodRestService.save-783"><a href="#PumpWoodRestService.save-783"><span class="linenos">783</span></a>        <span class="n">saved_obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="PumpWoodRestService.save-784"><a href="#PumpWoodRestService.save-784"><span class="linenos">784</span></a>
</span><span id="PumpWoodRestService.save-785"><a href="#PumpWoodRestService.save-785"><span class="linenos">785</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-786"><a href="#PumpWoodRestService.save-786"><span class="linenos">786</span></a>            <span class="c1"># Process ETLTrigger for the model class</span>
</span><span id="PumpWoodRestService.save-787"><a href="#PumpWoodRestService.save-787"><span class="linenos">787</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="PumpWoodRestService.save-788"><a href="#PumpWoodRestService.save-788"><span class="linenos">788</span></a>            <span class="k">if</span> <span class="n">data_pk</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-789"><a href="#PumpWoodRestService.save-789"><span class="linenos">789</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-790"><a href="#PumpWoodRestService.save-790"><span class="linenos">790</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService.save-791"><a href="#PumpWoodRestService.save-791"><span class="linenos">791</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService.save-792"><a href="#PumpWoodRestService.save-792"><span class="linenos">792</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;create&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-793"><a href="#PumpWoodRestService.save-793"><span class="linenos">793</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-794"><a href="#PumpWoodRestService.save-794"><span class="linenos">794</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="PumpWoodRestService.save-795"><a href="#PumpWoodRestService.save-795"><span class="linenos">795</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.save-796"><a href="#PumpWoodRestService.save-796"><span class="linenos">796</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-797"><a href="#PumpWoodRestService.save-797"><span class="linenos">797</span></a>                    <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService.save-798"><a href="#PumpWoodRestService.save-798"><span class="linenos">798</span></a>                        <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService.save-799"><a href="#PumpWoodRestService.save-799"><span class="linenos">799</span></a>                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;update&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-800"><a href="#PumpWoodRestService.save-800"><span class="linenos">800</span></a>                        <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">saved_obj</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
</span><span id="PumpWoodRestService.save-801"><a href="#PumpWoodRestService.save-801"><span class="linenos">801</span></a>                        <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
</span><span id="PumpWoodRestService.save-802"><a href="#PumpWoodRestService.save-802"><span class="linenos">802</span></a>
</span><span id="PumpWoodRestService.save-803"><a href="#PumpWoodRestService.save-803"><span class="linenos">803</span></a>        <span class="c1"># Overhead, serializando e deserializando o objecto</span>
</span><span id="PumpWoodRestService.save-804"><a href="#PumpWoodRestService.save-804"><span class="linenos">804</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="PumpWoodRestService.save-805"><a href="#PumpWoodRestService.save-805"><span class="linenos">805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">saved_obj</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">response_status</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Save and update object acording to request.data.</p>

<p>Object will be updated if request.data['pk'] is not None.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>Object to be saved. If a pk is set them the object will be updated,
if pk is None or not set a new object will be created.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Serialized new/updated object.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodException:</strong>  'Object model class diferent from {service_model} :
{service_model}'. Indicates that the end-point and the
model_class of the object are impatible.</li>
<li><strong>PumpWoodObjectSavingException:</strong>  'Error when validating fields when saving object'. Indicates
that there were error when validating object
at the serializer. Error payload will have the fields with
error as keys of the dictonary.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.list_actions" class="classattr">
                                        <input id="PumpWoodRestService.list_actions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_actions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.list_actions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.list_actions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.list_actions-825"><a href="#PumpWoodRestService.list_actions-825"><span class="linenos">825</span></a>    <span class="k">def</span> <span class="nf">list_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodRestService.list_actions-826"><a href="#PumpWoodRestService.list_actions-826"><span class="linenos">826</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_actions-827"><a href="#PumpWoodRestService.list_actions-827"><span class="linenos">827</span></a><span class="sd">        List model exposed actions.</span>
</span><span id="PumpWoodRestService.list_actions-828"><a href="#PumpWoodRestService.list_actions-828"><span class="linenos">828</span></a>
</span><span id="PumpWoodRestService.list_actions-829"><a href="#PumpWoodRestService.list_actions-829"><span class="linenos">829</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.list_actions-830"><a href="#PumpWoodRestService.list_actions-830"><span class="linenos">830</span></a><span class="sd">        No payload.</span>
</span><span id="PumpWoodRestService.list_actions-831"><a href="#PumpWoodRestService.list_actions-831"><span class="linenos">831</span></a>
</span><span id="PumpWoodRestService.list_actions-832"><a href="#PumpWoodRestService.list_actions-832"><span class="linenos">832</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.list_actions-833"><a href="#PumpWoodRestService.list_actions-833"><span class="linenos">833</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService.list_actions-834"><a href="#PumpWoodRestService.list_actions-834"><span class="linenos">834</span></a>
</span><span id="PumpWoodRestService.list_actions-835"><a href="#PumpWoodRestService.list_actions-835"><span class="linenos">835</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.list_actions-836"><a href="#PumpWoodRestService.list_actions-836"><span class="linenos">836</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.list_actions-837"><a href="#PumpWoodRestService.list_actions-837"><span class="linenos">837</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.list_actions-838"><a href="#PumpWoodRestService.list_actions-838"><span class="linenos">838</span></a><span class="sd">            Return a list of dictonary with information of the avaiable</span>
</span><span id="PumpWoodRestService.list_actions-839"><a href="#PumpWoodRestService.list_actions-839"><span class="linenos">839</span></a><span class="sd">            actions for model class. Actions info object keys:</span>
</span><span id="PumpWoodRestService.list_actions-840"><a href="#PumpWoodRestService.list_actions-840"><span class="linenos">840</span></a><span class="sd">            - **action_name [str]:** Name of the function associated with</span>
</span><span id="PumpWoodRestService.list_actions-841"><a href="#PumpWoodRestService.list_actions-841"><span class="linenos">841</span></a><span class="sd">                action on model_class.</span>
</span><span id="PumpWoodRestService.list_actions-842"><a href="#PumpWoodRestService.list_actions-842"><span class="linenos">842</span></a><span class="sd">            - **action_name__verbose [str]:** Name of the function associated</span>
</span><span id="PumpWoodRestService.list_actions-843"><a href="#PumpWoodRestService.list_actions-843"><span class="linenos">843</span></a><span class="sd">                with action on model_class translates by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_actions-844"><a href="#PumpWoodRestService.list_actions-844"><span class="linenos">844</span></a><span class="sd">            - **doc_string [str]:** Doc string associated with function.</span>
</span><span id="PumpWoodRestService.list_actions-845"><a href="#PumpWoodRestService.list_actions-845"><span class="linenos">845</span></a><span class="sd">            - **info [str]:** Info for que action passed as argument at action</span>
</span><span id="PumpWoodRestService.list_actions-846"><a href="#PumpWoodRestService.list_actions-846"><span class="linenos">846</span></a><span class="sd">                function decorator.</span>
</span><span id="PumpWoodRestService.list_actions-847"><a href="#PumpWoodRestService.list_actions-847"><span class="linenos">847</span></a><span class="sd">            - **info__verbose [str]:** Info for que action passed as argument</span>
</span><span id="PumpWoodRestService.list_actions-848"><a href="#PumpWoodRestService.list_actions-848"><span class="linenos">848</span></a><span class="sd">                at action function decorator model_class translates by</span>
</span><span id="PumpWoodRestService.list_actions-849"><a href="#PumpWoodRestService.list_actions-849"><span class="linenos">849</span></a><span class="sd">                Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_actions-850"><a href="#PumpWoodRestService.list_actions-850"><span class="linenos">850</span></a><span class="sd">            - **is_static_function [bool]:** Boolean value setting if function</span>
</span><span id="PumpWoodRestService.list_actions-851"><a href="#PumpWoodRestService.list_actions-851"><span class="linenos">851</span></a><span class="sd">                is classmethod or staticmethod (True), in this cases it is not</span>
</span><span id="PumpWoodRestService.list_actions-852"><a href="#PumpWoodRestService.list_actions-852"><span class="linenos">852</span></a><span class="sd">                associated with an object and aa pk should no be passed as</span>
</span><span id="PumpWoodRestService.list_actions-853"><a href="#PumpWoodRestService.list_actions-853"><span class="linenos">853</span></a><span class="sd">                argument.</span>
</span><span id="PumpWoodRestService.list_actions-854"><a href="#PumpWoodRestService.list_actions-854"><span class="linenos">854</span></a><span class="sd">            - **parameters [dict]:** Dictionary with paramenter as key and with</span>
</span><span id="PumpWoodRestService.list_actions-855"><a href="#PumpWoodRestService.list_actions-855"><span class="linenos">855</span></a><span class="sd">                keys:</span>
</span><span id="PumpWoodRestService.list_actions-856"><a href="#PumpWoodRestService.list_actions-856"><span class="linenos">856</span></a><span class="sd">                - **default_value [any]:** Default value for paramenter.</span>
</span><span id="PumpWoodRestService.list_actions-857"><a href="#PumpWoodRestService.list_actions-857"><span class="linenos">857</span></a><span class="sd">                - **many [bool]:** If the function parameter is many (list).</span>
</span><span id="PumpWoodRestService.list_actions-858"><a href="#PumpWoodRestService.list_actions-858"><span class="linenos">858</span></a><span class="sd">                - **required [bool]:** If the parameter is necessary to run the</span>
</span><span id="PumpWoodRestService.list_actions-859"><a href="#PumpWoodRestService.list_actions-859"><span class="linenos">859</span></a><span class="sd">                    function or optinal.</span>
</span><span id="PumpWoodRestService.list_actions-860"><a href="#PumpWoodRestService.list_actions-860"><span class="linenos">860</span></a><span class="sd">                - **type [str]:** Type of the paramenter that shoul be passed</span>
</span><span id="PumpWoodRestService.list_actions-861"><a href="#PumpWoodRestService.list_actions-861"><span class="linenos">861</span></a><span class="sd">                    to function.</span>
</span><span id="PumpWoodRestService.list_actions-862"><a href="#PumpWoodRestService.list_actions-862"><span class="linenos">862</span></a><span class="sd">                - **verbose_name [str]:** Parameter name translated using</span>
</span><span id="PumpWoodRestService.list_actions-863"><a href="#PumpWoodRestService.list_actions-863"><span class="linenos">863</span></a><span class="sd">                    Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_actions-864"><a href="#PumpWoodRestService.list_actions-864"><span class="linenos">864</span></a><span class="sd">            - **return [dict]:** A dictionary with the type associated with</span>
</span><span id="PumpWoodRestService.list_actions-865"><a href="#PumpWoodRestService.list_actions-865"><span class="linenos">865</span></a><span class="sd">                function return. Keys:</span>
</span><span id="PumpWoodRestService.list_actions-866"><a href="#PumpWoodRestService.list_actions-866"><span class="linenos">866</span></a><span class="sd">                - **many [bool]:** If the return result is a list.</span>
</span><span id="PumpWoodRestService.list_actions-867"><a href="#PumpWoodRestService.list_actions-867"><span class="linenos">867</span></a><span class="sd">                - **type [str]:** Type of the return.</span>
</span><span id="PumpWoodRestService.list_actions-868"><a href="#PumpWoodRestService.list_actions-868"><span class="linenos">868</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_actions-869"><a href="#PumpWoodRestService.list_actions-869"><span class="linenos">869</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list_actions-870"><a href="#PumpWoodRestService.list_actions-870"><span class="linenos">870</span></a>        <span class="n">action_descriptions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodRestService.list_actions-871"><a href="#PumpWoodRestService.list_actions-871"><span class="linenos">871</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__action__</span><span class="si">{action}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService.list_actions-872"><a href="#PumpWoodRestService.list_actions-872"><span class="linenos">872</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService.list_actions-873"><a href="#PumpWoodRestService.list_actions-873"><span class="linenos">873</span></a>        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.list_actions-874"><a href="#PumpWoodRestService.list_actions-874"><span class="linenos">874</span></a>            <span class="n">action_dict</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list_actions-875"><a href="#PumpWoodRestService.list_actions-875"><span class="linenos">875</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_actions-876"><a href="#PumpWoodRestService.list_actions-876"><span class="linenos">876</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list_actions-877"><a href="#PumpWoodRestService.list_actions-877"><span class="linenos">877</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">])</span>
</span><span id="PumpWoodRestService.list_actions-878"><a href="#PumpWoodRestService.list_actions-878"><span class="linenos">878</span></a>
</span><span id="PumpWoodRestService.list_actions-879"><a href="#PumpWoodRestService.list_actions-879"><span class="linenos">879</span></a>            <span class="c1">#########################################################</span>
</span><span id="PumpWoodRestService.list_actions-880"><a href="#PumpWoodRestService.list_actions-880"><span class="linenos">880</span></a>            <span class="c1"># Translate action_name and info to end-user at verbose #</span>
</span><span id="PumpWoodRestService.list_actions-881"><a href="#PumpWoodRestService.list_actions-881"><span class="linenos">881</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_actions-882"><a href="#PumpWoodRestService.list_actions-882"><span class="linenos">882</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;action_name&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__action_name&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_actions-883"><a href="#PumpWoodRestService.list_actions-883"><span class="linenos">883</span></a>            <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_actions-884"><a href="#PumpWoodRestService.list_actions-884"><span class="linenos">884</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__info&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_actions-885"><a href="#PumpWoodRestService.list_actions-885"><span class="linenos">885</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">action_dict</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.list_actions-886"><a href="#PumpWoodRestService.list_actions-886"><span class="linenos">886</span></a>                <span class="n">item</span><span class="p">[</span><span class="s2">&quot;verbose_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.list_actions-887"><a href="#PumpWoodRestService.list_actions-887"><span class="linenos">887</span></a>                    <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__parameters&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_actions-888"><a href="#PumpWoodRestService.list_actions-888"><span class="linenos">888</span></a>            <span class="c1">#########################################################</span>
</span><span id="PumpWoodRestService.list_actions-889"><a href="#PumpWoodRestService.list_actions-889"><span class="linenos">889</span></a>            <span class="n">action_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action_dict</span><span class="p">)</span>
</span><span id="PumpWoodRestService.list_actions-890"><a href="#PumpWoodRestService.list_actions-890"><span class="linenos">890</span></a>
</span><span id="PumpWoodRestService.list_actions-891"><a href="#PumpWoodRestService.list_actions-891"><span class="linenos">891</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">action_descriptions</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>List model exposed actions.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>No payload.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a list of dictonary with information of the avaiable
  actions for model class. Actions info object keys:</p>
  
  <ul>
  <li><strong>action_name [str]:</strong> Name of the function associated with
  action on model_class.</li>
  <li><strong>action_name__verbose [str]:</strong> Name of the function associated
  with action on model_class translates by Pumpwood I8s.</li>
  <li><strong>doc_string [str]:</strong> Doc string associated with function.</li>
  <li><strong>info [str]:</strong> Info for que action passed as argument at action
  function decorator.</li>
  <li><strong>info__verbose [str]:</strong> Info for que action passed as argument
  at action function decorator model_class translates by
  Pumpwood I8s.</li>
  <li><strong>is_static_function [bool]:</strong> Boolean value setting if function
  is classmethod or staticmethod (True), in this cases it is not
  associated with an object and aa pk should no be passed as
  argument.</li>
  <li><strong>parameters [dict]:</strong> Dictionary with paramenter as key and with
  keys:
  <ul>
  <li><strong>default_value [any]:</strong> Default value for paramenter.</li>
  <li><strong>many [bool]:</strong> If the function parameter is many (list).</li>
  <li><strong>required [bool]:</strong> If the parameter is necessary to run the
  function or optinal.</li>
  <li><strong>type [str]:</strong> Type of the paramenter that shoul be passed
  to function.</li>
  <li><strong>verbose_name [str]:</strong> Parameter name translated using
  Pumpwood I8s.</li>
  </ul></li>
  <li><strong>return [dict]:</strong> A dictionary with the type associated with
  function return. Keys:
  <ul>
  <li><strong>many [bool]:</strong> If the return result is a list.</li>
  <li><strong>type [str]:</strong> Type of the return.</li>
  </ul></li>
  </ul>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.execute_action" class="classattr">
                                        <input id="PumpWoodRestService.execute_action-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute_action</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span>, </span><span class="param"><span class="n">action_name</span>, </span><span class="param"><span class="n">pk</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.execute_action-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.execute_action"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.execute_action-893"><a href="#PumpWoodRestService.execute_action-893"><span class="linenos"> 893</span></a>    <span class="k">def</span> <span class="nf">execute_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">action_name</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-894"><a href="#PumpWoodRestService.execute_action-894"><span class="linenos"> 894</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.execute_action-895"><a href="#PumpWoodRestService.execute_action-895"><span class="linenos"> 895</span></a><span class="sd">        Execute action over object or class using parameters.</span>
</span><span id="PumpWoodRestService.execute_action-896"><a href="#PumpWoodRestService.execute_action-896"><span class="linenos"> 896</span></a>
</span><span id="PumpWoodRestService.execute_action-897"><a href="#PumpWoodRestService.execute_action-897"><span class="linenos"> 897</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.execute_action-898"><a href="#PumpWoodRestService.execute_action-898"><span class="linenos"> 898</span></a><span class="sd">        Payload dictionary correspont to function parameters as key-&gt;value</span>
</span><span id="PumpWoodRestService.execute_action-899"><a href="#PumpWoodRestService.execute_action-899"><span class="linenos"> 899</span></a><span class="sd">        elements.</span>
</span><span id="PumpWoodRestService.execute_action-900"><a href="#PumpWoodRestService.execute_action-900"><span class="linenos"> 900</span></a>
</span><span id="PumpWoodRestService.execute_action-901"><a href="#PumpWoodRestService.execute_action-901"><span class="linenos"> 901</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.execute_action-902"><a href="#PumpWoodRestService.execute_action-902"><span class="linenos"> 902</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService.execute_action-903"><a href="#PumpWoodRestService.execute_action-903"><span class="linenos"> 903</span></a>
</span><span id="PumpWoodRestService.execute_action-904"><a href="#PumpWoodRestService.execute_action-904"><span class="linenos"> 904</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.execute_action-905"><a href="#PumpWoodRestService.execute_action-905"><span class="linenos"> 905</span></a><span class="sd">            request:</span>
</span><span id="PumpWoodRestService.execute_action-906"><a href="#PumpWoodRestService.execute_action-906"><span class="linenos"> 906</span></a><span class="sd">                Django request.</span>
</span><span id="PumpWoodRestService.execute_action-907"><a href="#PumpWoodRestService.execute_action-907"><span class="linenos"> 907</span></a><span class="sd">            action_name [str]:</span>
</span><span id="PumpWoodRestService.execute_action-908"><a href="#PumpWoodRestService.execute_action-908"><span class="linenos"> 908</span></a><span class="sd">                Action name.</span>
</span><span id="PumpWoodRestService.execute_action-909"><a href="#PumpWoodRestService.execute_action-909"><span class="linenos"> 909</span></a><span class="sd">            pk [pk]:</span>
</span><span id="PumpWoodRestService.execute_action-910"><a href="#PumpWoodRestService.execute_action-910"><span class="linenos"> 910</span></a><span class="sd">                Of the object that will be used to run the action. For</span>
</span><span id="PumpWoodRestService.execute_action-911"><a href="#PumpWoodRestService.execute_action-911"><span class="linenos"> 911</span></a><span class="sd">                staticmethods and classmethods the object should not be</span>
</span><span id="PumpWoodRestService.execute_action-912"><a href="#PumpWoodRestService.execute_action-912"><span class="linenos"> 912</span></a><span class="sd">                passed as argument.</span>
</span><span id="PumpWoodRestService.execute_action-913"><a href="#PumpWoodRestService.execute_action-913"><span class="linenos"> 913</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.execute_action-914"><a href="#PumpWoodRestService.execute_action-914"><span class="linenos"> 914</span></a><span class="sd">            Return a dictonary with keys:</span>
</span><span id="PumpWoodRestService.execute_action-915"><a href="#PumpWoodRestService.execute_action-915"><span class="linenos"> 915</span></a><span class="sd">            -</span>
</span><span id="PumpWoodRestService.execute_action-916"><a href="#PumpWoodRestService.execute_action-916"><span class="linenos"> 916</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodRestService.execute_action-917"><a href="#PumpWoodRestService.execute_action-917"><span class="linenos"> 917</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService.execute_action-918"><a href="#PumpWoodRestService.execute_action-918"><span class="linenos"> 918</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is not</span>
</span><span id="PumpWoodRestService.execute_action-919"><a href="#PumpWoodRestService.execute_action-919"><span class="linenos"> 919</span></a><span class="sd">                a classmethod and not pk provided.&#39;. Indicates that the action</span>
</span><span id="PumpWoodRestService.execute_action-920"><a href="#PumpWoodRestService.execute_action-920"><span class="linenos"> 920</span></a><span class="sd">                is not a classmethod and the pk was not passed as function</span>
</span><span id="PumpWoodRestService.execute_action-921"><a href="#PumpWoodRestService.execute_action-921"><span class="linenos"> 921</span></a><span class="sd">                argument.</span>
</span><span id="PumpWoodRestService.execute_action-922"><a href="#PumpWoodRestService.execute_action-922"><span class="linenos"> 922</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService.execute_action-923"><a href="#PumpWoodRestService.execute_action-923"><span class="linenos"> 923</span></a><span class="sd">                &#39;Action [{action}] at model [{class_name}] is a</span>
</span><span id="PumpWoodRestService.execute_action-924"><a href="#PumpWoodRestService.execute_action-924"><span class="linenos"> 924</span></a><span class="sd">                classmethod and pk provided.&#39;. Indicates that the action is</span>
</span><span id="PumpWoodRestService.execute_action-925"><a href="#PumpWoodRestService.execute_action-925"><span class="linenos"> 925</span></a><span class="sd">                a classmethod, but a pk was passed as argument.</span>
</span><span id="PumpWoodRestService.execute_action-926"><a href="#PumpWoodRestService.execute_action-926"><span class="linenos"> 926</span></a><span class="sd">            PumpWoodObjectDoesNotExist:</span>
</span><span id="PumpWoodRestService.execute_action-927"><a href="#PumpWoodRestService.execute_action-927"><span class="linenos"> 927</span></a><span class="sd">                &#39;Requested object {service_model}[{pk}] not found.&#39;.</span>
</span><span id="PumpWoodRestService.execute_action-928"><a href="#PumpWoodRestService.execute_action-928"><span class="linenos"> 928</span></a><span class="sd">                Indicates that the object with [pk] was not found on</span>
</span><span id="PumpWoodRestService.execute_action-929"><a href="#PumpWoodRestService.execute_action-929"><span class="linenos"> 929</span></a><span class="sd">                database.</span>
</span><span id="PumpWoodRestService.execute_action-930"><a href="#PumpWoodRestService.execute_action-930"><span class="linenos"> 930</span></a><span class="sd">            PumpWoodActionArgsException:</span>
</span><span id="PumpWoodRestService.execute_action-931"><a href="#PumpWoodRestService.execute_action-931"><span class="linenos"> 931</span></a><span class="sd">                &#39;error when unserializing function arguments: [...]&#39;.</span>
</span><span id="PumpWoodRestService.execute_action-932"><a href="#PumpWoodRestService.execute_action-932"><span class="linenos"> 932</span></a><span class="sd">                Indicates that it was not possible to unserialize objects</span>
</span><span id="PumpWoodRestService.execute_action-933"><a href="#PumpWoodRestService.execute_action-933"><span class="linenos"> 933</span></a><span class="sd">                passed as function arguments. Pumpwood used function tips</span>
</span><span id="PumpWoodRestService.execute_action-934"><a href="#PumpWoodRestService.execute_action-934"><span class="linenos"> 934</span></a><span class="sd">                types to convert the arguments on correct types before</span>
</span><span id="PumpWoodRestService.execute_action-935"><a href="#PumpWoodRestService.execute_action-935"><span class="linenos"> 935</span></a><span class="sd">                passing them to function.</span>
</span><span id="PumpWoodRestService.execute_action-936"><a href="#PumpWoodRestService.execute_action-936"><span class="linenos"> 936</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.execute_action-937"><a href="#PumpWoodRestService.execute_action-937"><span class="linenos"> 937</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.execute_action-938"><a href="#PumpWoodRestService.execute_action-938"><span class="linenos"> 938</span></a>        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_actions</span><span class="p">()</span>
</span><span id="PumpWoodRestService.execute_action-939"><a href="#PumpWoodRestService.execute_action-939"><span class="linenos"> 939</span></a>        <span class="n">rest_action_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="PumpWoodRestService.execute_action-940"><a href="#PumpWoodRestService.execute_action-940"><span class="linenos"> 940</span></a>
</span><span id="PumpWoodRestService.execute_action-941"><a href="#PumpWoodRestService.execute_action-941"><span class="linenos"> 941</span></a>        <span class="k">if</span> <span class="n">action_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rest_action_names</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-942"><a href="#PumpWoodRestService.execute_action-942"><span class="linenos"> 942</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-943"><a href="#PumpWoodRestService.execute_action-943"><span class="linenos"> 943</span></a>                <span class="s2">&quot;There is no method </span><span class="si">{action}</span><span class="s2"> in rest actions &quot;</span>
</span><span id="PumpWoodRestService.execute_action-944"><a href="#PumpWoodRestService.execute_action-944"><span class="linenos"> 944</span></a>                <span class="s2">&quot;for </span><span class="si">{class_name}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-945"><a href="#PumpWoodRestService.execute_action-945"><span class="linenos"> 945</span></a>                    <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService.execute_action-946"><a href="#PumpWoodRestService.execute_action-946"><span class="linenos"> 946</span></a>                    <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-947"><a href="#PumpWoodRestService.execute_action-947"><span class="linenos"> 947</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-948"><a href="#PumpWoodRestService.execute_action-948"><span class="linenos"> 948</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService.execute_action-949"><a href="#PumpWoodRestService.execute_action-949"><span class="linenos"> 949</span></a>
</span><span id="PumpWoodRestService.execute_action-950"><a href="#PumpWoodRestService.execute_action-950"><span class="linenos"> 950</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-951"><a href="#PumpWoodRestService.execute_action-951"><span class="linenos"> 951</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-952"><a href="#PumpWoodRestService.execute_action-952"><span class="linenos"> 952</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-953"><a href="#PumpWoodRestService.execute_action-953"><span class="linenos"> 953</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is not &quot;</span>
</span><span id="PumpWoodRestService.execute_action-954"><a href="#PumpWoodRestService.execute_action-954"><span class="linenos"> 954</span></a>                <span class="s2">&quot;a classmethod and not pk provided.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-955"><a href="#PumpWoodRestService.execute_action-955"><span class="linenos"> 955</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-956"><a href="#PumpWoodRestService.execute_action-956"><span class="linenos"> 956</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService.execute_action-957"><a href="#PumpWoodRestService.execute_action-957"><span class="linenos"> 957</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-958"><a href="#PumpWoodRestService.execute_action-958"><span class="linenos"> 958</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-959"><a href="#PumpWoodRestService.execute_action-959"><span class="linenos"> 959</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService.execute_action-960"><a href="#PumpWoodRestService.execute_action-960"><span class="linenos"> 960</span></a>
</span><span id="PumpWoodRestService.execute_action-961"><a href="#PumpWoodRestService.execute_action-961"><span class="linenos"> 961</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">action</span><span class="o">.</span><span class="n">action_object</span><span class="o">.</span><span class="n">is_static_function</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-962"><a href="#PumpWoodRestService.execute_action-962"><span class="linenos"> 962</span></a>            <span class="n">msg_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-963"><a href="#PumpWoodRestService.execute_action-963"><span class="linenos"> 963</span></a>                <span class="s2">&quot;Action [</span><span class="si">{action}</span><span class="s2">] at model [</span><span class="si">{class_name}</span><span class="s2">] is a&quot;</span>
</span><span id="PumpWoodRestService.execute_action-964"><a href="#PumpWoodRestService.execute_action-964"><span class="linenos"> 964</span></a>                <span class="s2">&quot;classmethod and pk provided.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-965"><a href="#PumpWoodRestService.execute_action-965"><span class="linenos"> 965</span></a>            <span class="n">message</span> <span class="o">=</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-966"><a href="#PumpWoodRestService.execute_action-966"><span class="linenos"> 966</span></a>                <span class="n">action</span><span class="o">=</span><span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService.execute_action-967"><a href="#PumpWoodRestService.execute_action-967"><span class="linenos"> 967</span></a>                <span class="n">class_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-968"><a href="#PumpWoodRestService.execute_action-968"><span class="linenos"> 968</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodActionArgsException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-969"><a href="#PumpWoodRestService.execute_action-969"><span class="linenos"> 969</span></a>                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService.execute_action-970"><a href="#PumpWoodRestService.execute_action-970"><span class="linenos"> 970</span></a>
</span><span id="PumpWoodRestService.execute_action-971"><a href="#PumpWoodRestService.execute_action-971"><span class="linenos"> 971</span></a>        <span class="n">object_dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.execute_action-972"><a href="#PumpWoodRestService.execute_action-972"><span class="linenos"> 972</span></a>        <span class="n">action</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.execute_action-973"><a href="#PumpWoodRestService.execute_action-973"><span class="linenos"> 973</span></a>        <span class="k">if</span> <span class="n">pk</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-974"><a href="#PumpWoodRestService.execute_action-974"><span class="linenos"> 974</span></a>            <span class="n">model_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span id="PumpWoodRestService.execute_action-975"><a href="#PumpWoodRestService.execute_action-975"><span class="linenos"> 975</span></a>            <span class="k">if</span> <span class="n">model_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-976"><a href="#PumpWoodRestService.execute_action-976"><span class="linenos"> 976</span></a>                <span class="n">message_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-977"><a href="#PumpWoodRestService.execute_action-977"><span class="linenos"> 977</span></a>                    <span class="s2">&quot;Requested object </span><span class="si">{service_model}</span><span class="s2">[</span><span class="si">{pk}</span><span class="s2">] not found.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-978"><a href="#PumpWoodRestService.execute_action-978"><span class="linenos"> 978</span></a>                <span class="n">temp_service_model</span> <span class="o">=</span> \
</span><span id="PumpWoodRestService.execute_action-979"><a href="#PumpWoodRestService.execute_action-979"><span class="linenos"> 979</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService.execute_action-980"><a href="#PumpWoodRestService.execute_action-980"><span class="linenos"> 980</span></a>                <span class="n">message</span> <span class="o">=</span> <span class="n">message_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-981"><a href="#PumpWoodRestService.execute_action-981"><span class="linenos"> 981</span></a>                    <span class="n">service_model</span><span class="o">=</span><span class="n">temp_service_model</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-982"><a href="#PumpWoodRestService.execute_action-982"><span class="linenos"> 982</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectDoesNotExist</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-983"><a href="#PumpWoodRestService.execute_action-983"><span class="linenos"> 983</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService.execute_action-984"><a href="#PumpWoodRestService.execute_action-984"><span class="linenos"> 984</span></a>                        <span class="s2">&quot;service_model&quot;</span><span class="p">:</span> <span class="n">temp_service_model</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">})</span>
</span><span id="PumpWoodRestService.execute_action-985"><a href="#PumpWoodRestService.execute_action-985"><span class="linenos"> 985</span></a>
</span><span id="PumpWoodRestService.execute_action-986"><a href="#PumpWoodRestService.execute_action-986"><span class="linenos"> 986</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-987"><a href="#PumpWoodRestService.execute_action-987"><span class="linenos"> 987</span></a>            <span class="n">object_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.execute_action-988"><a href="#PumpWoodRestService.execute_action-988"><span class="linenos"> 988</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-989"><a href="#PumpWoodRestService.execute_action-989"><span class="linenos"> 989</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">action_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-990"><a href="#PumpWoodRestService.execute_action-990"><span class="linenos"> 990</span></a>
</span><span id="PumpWoodRestService.execute_action-991"><a href="#PumpWoodRestService.execute_action-991"><span class="linenos"> 991</span></a>        <span class="n">loaded_parameters</span> <span class="o">=</span> <span class="n">load_action_parameters</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-992"><a href="#PumpWoodRestService.execute_action-992"><span class="linenos"> 992</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">action</span><span class="p">(</span><span class="o">**</span><span class="n">loaded_parameters</span><span class="p">)</span>
</span><span id="PumpWoodRestService.execute_action-993"><a href="#PumpWoodRestService.execute_action-993"><span class="linenos"> 993</span></a>
</span><span id="PumpWoodRestService.execute_action-994"><a href="#PumpWoodRestService.execute_action-994"><span class="linenos"> 994</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger</span><span class="p">:</span>
</span><span id="PumpWoodRestService.execute_action-995"><a href="#PumpWoodRestService.execute_action-995"><span class="linenos"> 995</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</span><span id="PumpWoodRestService.execute_action-996"><a href="#PumpWoodRestService.execute_action-996"><span class="linenos"> 996</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">microservice</span><span class="o">.</span><span class="n">execute_action</span><span class="p">(</span>
</span><span id="PumpWoodRestService.execute_action-997"><a href="#PumpWoodRestService.execute_action-997"><span class="linenos"> 997</span></a>                <span class="s2">&quot;ETLTrigger&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;process_triggers&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodRestService.execute_action-998"><a href="#PumpWoodRestService.execute_action-998"><span class="linenos"> 998</span></a>                    <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
</span><span id="PumpWoodRestService.execute_action-999"><a href="#PumpWoodRestService.execute_action-999"><span class="linenos"> 999</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;action_name&quot;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">})</span>
</span><span id="PumpWoodRestService.execute_action-1000"><a href="#PumpWoodRestService.execute_action-1000"><span class="linenos">1000</span></a>
</span><span id="PumpWoodRestService.execute_action-1001"><a href="#PumpWoodRestService.execute_action-1001"><span class="linenos">1001</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService.execute_action-1002"><a href="#PumpWoodRestService.execute_action-1002"><span class="linenos">1002</span></a>            <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="n">action_name</span><span class="p">,</span>
</span><span id="PumpWoodRestService.execute_action-1003"><a href="#PumpWoodRestService.execute_action-1003"><span class="linenos">1003</span></a>            <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="p">:</span> <span class="n">object_dict</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Execute action over object or class using parameters.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>Payload dictionary correspont to function parameters as key->value
elements.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
<li><strong>action_name [str]:</strong>  Action name.</li>
<li><strong>pk [pk]:</strong>  Of the object that will be used to run the action. For
staticmethods and classmethods the object should not be
passed as argument.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a dictonary with keys:
  -</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodActionArgsException:</strong>  'Action [{action}] at model [{class_name}] is not
a classmethod and not pk provided.'. Indicates that the action
is not a classmethod and the pk was not passed as function
argument.</li>
<li><strong>PumpWoodActionArgsException:</strong>  'Action [{action}] at model [{class_name}] is a
classmethod and pk provided.'. Indicates that the action is
a classmethod, but a pk was passed as argument.</li>
<li><strong>PumpWoodObjectDoesNotExist:</strong>  'Requested object {service_model}[{pk}] not found.'.
Indicates that the object with [pk] was not found on
database.</li>
<li><strong>PumpWoodActionArgsException:</strong>  'error when unserializing function arguments: [...]'.
Indicates that it was not possible to unserialize objects
passed as function arguments. Pumpwood used function tips
types to convert the arguments on correct types before
passing them to function.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodRestService.cls_fields_options" class="classattr">
                                        <input id="PumpWoodRestService.cls_fields_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">cls_fields_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.cls_fields_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.cls_fields_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.cls_fields_options-1005"><a href="#PumpWoodRestService.cls_fields_options-1005"><span class="linenos">1005</span></a>    <span class="nd">@classmethod</span>
</span><span id="PumpWoodRestService.cls_fields_options-1006"><a href="#PumpWoodRestService.cls_fields_options-1006"><span class="linenos">1006</span></a>    <span class="k">def</span> <span class="nf">cls_fields_options</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1007"><a href="#PumpWoodRestService.cls_fields_options-1007"><span class="linenos">1007</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1008"><a href="#PumpWoodRestService.cls_fields_options-1008"><span class="linenos">1008</span></a><span class="sd">        Return field options using serializer.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1009"><a href="#PumpWoodRestService.cls_fields_options-1009"><span class="linenos">1009</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1010"><a href="#PumpWoodRestService.cls_fields_options-1010"><span class="linenos">1010</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1011"><a href="#PumpWoodRestService.cls_fields_options-1011"><span class="linenos">1011</span></a><span class="sd">            No args.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1012"><a href="#PumpWoodRestService.cls_fields_options-1012"><span class="linenos">1012</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1013"><a href="#PumpWoodRestService.cls_fields_options-1013"><span class="linenos">1013</span></a><span class="sd">            Return information for each column to render search filters on</span>
</span><span id="PumpWoodRestService.cls_fields_options-1014"><a href="#PumpWoodRestService.cls_fields_options-1014"><span class="linenos">1014</span></a><span class="sd">            frontend. Each field will have:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1015"><a href="#PumpWoodRestService.cls_fields_options-1015"><span class="linenos">1015</span></a><span class="sd">            - **column [str]:** Name of the column associated with the</span>
</span><span id="PumpWoodRestService.cls_fields_options-1016"><a href="#PumpWoodRestService.cls_fields_options-1016"><span class="linenos">1016</span></a><span class="sd">                field (same as the key).</span>
</span><span id="PumpWoodRestService.cls_fields_options-1017"><a href="#PumpWoodRestService.cls_fields_options-1017"><span class="linenos">1017</span></a><span class="sd">            - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="PumpWoodRestService.cls_fields_options-1018"><a href="#PumpWoodRestService.cls_fields_options-1018"><span class="linenos">1018</span></a><span class="sd">                using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1019"><a href="#PumpWoodRestService.cls_fields_options-1019"><span class="linenos">1019</span></a><span class="sd">            - **default [str]:** Defult value for column.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1020"><a href="#PumpWoodRestService.cls_fields_options-1020"><span class="linenos">1020</span></a><span class="sd">            - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="PumpWoodRestService.cls_fields_options-1021"><a href="#PumpWoodRestService.cls_fields_options-1021"><span class="linenos">1021</span></a><span class="sd">                can be used to pass information about foreign key or</span>
</span><span id="PumpWoodRestService.cls_fields_options-1022"><a href="#PumpWoodRestService.cls_fields_options-1022"><span class="linenos">1022</span></a><span class="sd">                related fields.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1023"><a href="#PumpWoodRestService.cls_fields_options-1023"><span class="linenos">1023</span></a><span class="sd">            - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1024"><a href="#PumpWoodRestService.cls_fields_options-1024"><span class="linenos">1024</span></a><span class="sd">            - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="PumpWoodRestService.cls_fields_options-1025"><a href="#PumpWoodRestService.cls_fields_options-1025"><span class="linenos">1025</span></a><span class="sd">                collumn translated using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1026"><a href="#PumpWoodRestService.cls_fields_options-1026"><span class="linenos">1026</span></a><span class="sd">            - **indexed [str]:** If this column is indexed.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1027"><a href="#PumpWoodRestService.cls_fields_options-1027"><span class="linenos">1027</span></a><span class="sd">            - **nullable [str]:** If this column is nullable.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1028"><a href="#PumpWoodRestService.cls_fields_options-1028"><span class="linenos">1028</span></a><span class="sd">            - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="PumpWoodRestService.cls_fields_options-1029"><a href="#PumpWoodRestService.cls_fields_options-1029"><span class="linenos">1029</span></a><span class="sd">                key of the table. This is use full for tables with</span>
</span><span id="PumpWoodRestService.cls_fields_options-1030"><a href="#PumpWoodRestService.cls_fields_options-1030"><span class="linenos">1030</span></a><span class="sd">                composite pk.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1031"><a href="#PumpWoodRestService.cls_fields_options-1031"><span class="linenos">1031</span></a><span class="sd">            - **read_only [str]:** If this column is read-only on</span>
</span><span id="PumpWoodRestService.cls_fields_options-1032"><a href="#PumpWoodRestService.cls_fields_options-1032"><span class="linenos">1032</span></a><span class="sd">                end-point. The results for this value may differ from</span>
</span><span id="PumpWoodRestService.cls_fields_options-1033"><a href="#PumpWoodRestService.cls_fields_options-1033"><span class="linenos">1033</span></a><span class="sd">                fill_validation due to `gui_readonly`.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1034"><a href="#PumpWoodRestService.cls_fields_options-1034"><span class="linenos">1034</span></a><span class="sd">            - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1035"><a href="#PumpWoodRestService.cls_fields_options-1035"><span class="linenos">1035</span></a><span class="sd">            - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1036"><a href="#PumpWoodRestService.cls_fields_options-1036"><span class="linenos">1036</span></a><span class="sd">            - **in [str]:** If column type is options, this key will</span>
</span><span id="PumpWoodRestService.cls_fields_options-1037"><a href="#PumpWoodRestService.cls_fields_options-1037"><span class="linenos">1037</span></a><span class="sd">                indicates the accepted values for this field. This element</span>
</span><span id="PumpWoodRestService.cls_fields_options-1038"><a href="#PumpWoodRestService.cls_fields_options-1038"><span class="linenos">1038</span></a><span class="sd">                is a dictonary with keys:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1039"><a href="#PumpWoodRestService.cls_fields_options-1039"><span class="linenos">1039</span></a><span class="sd">                - **description:** Human readble value for option.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1040"><a href="#PumpWoodRestService.cls_fields_options-1040"><span class="linenos">1040</span></a><span class="sd">                - **description__verbose:** Human readble value for</span>
</span><span id="PumpWoodRestService.cls_fields_options-1041"><a href="#PumpWoodRestService.cls_fields_options-1041"><span class="linenos">1041</span></a><span class="sd">                    option translated by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1042"><a href="#PumpWoodRestService.cls_fields_options-1042"><span class="linenos">1042</span></a><span class="sd">                - **value:** Value of the option that will be saved on</span>
</span><span id="PumpWoodRestService.cls_fields_options-1043"><a href="#PumpWoodRestService.cls_fields_options-1043"><span class="linenos">1043</span></a><span class="sd">                    database, for save end-points use this value to</span>
</span><span id="PumpWoodRestService.cls_fields_options-1044"><a href="#PumpWoodRestService.cls_fields_options-1044"><span class="linenos">1044</span></a><span class="sd">                    modify the object.</span>
</span><span id="PumpWoodRestService.cls_fields_options-1045"><a href="#PumpWoodRestService.cls_fields_options-1045"><span class="linenos">1045</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1046"><a href="#PumpWoodRestService.cls_fields_options-1046"><span class="linenos">1046</span></a>        <span class="n">fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1047"><a href="#PumpWoodRestService.cls_fields_options-1047"><span class="linenos">1047</span></a>        <span class="n">dict_fields</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1048"><a href="#PumpWoodRestService.cls_fields_options-1048"><span class="linenos">1048</span></a>        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1049"><a href="#PumpWoodRestService.cls_fields_options-1049"><span class="linenos">1049</span></a>            <span class="n">is_relation</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;is_relation&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1050"><a href="#PumpWoodRestService.cls_fields_options-1050"><span class="linenos">1050</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1051"><a href="#PumpWoodRestService.cls_fields_options-1051"><span class="linenos">1051</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_relation</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1052"><a href="#PumpWoodRestService.cls_fields_options-1052"><span class="linenos">1052</span></a>                <span class="n">dict_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
</span><span id="PumpWoodRestService.cls_fields_options-1053"><a href="#PumpWoodRestService.cls_fields_options-1053"><span class="linenos">1053</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1054"><a href="#PumpWoodRestService.cls_fields_options-1054"><span class="linenos">1054</span></a>        <span class="n">model_class</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService.cls_fields_options-1055"><a href="#PumpWoodRestService.cls_fields_options-1055"><span class="linenos">1055</span></a>        <span class="n">translation_tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fields__</span><span class="si">{field}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1056"><a href="#PumpWoodRestService.cls_fields_options-1056"><span class="linenos">1056</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1057"><a href="#PumpWoodRestService.cls_fields_options-1057"><span class="linenos">1057</span></a>        <span class="c1"># Get read-only fields from serializer</span>
</span><span id="PumpWoodRestService.cls_fields_options-1058"><a href="#PumpWoodRestService.cls_fields_options-1058"><span class="linenos">1058</span></a>        <span class="n">read_only_fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;read_only_fields&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="PumpWoodRestService.cls_fields_options-1059"><a href="#PumpWoodRestService.cls_fields_options-1059"><span class="linenos">1059</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1060"><a href="#PumpWoodRestService.cls_fields_options-1060"><span class="linenos">1060</span></a>        <span class="c1"># Get field serializers</span>
</span><span id="PumpWoodRestService.cls_fields_options-1061"><a href="#PumpWoodRestService.cls_fields_options-1061"><span class="linenos">1061</span></a>        <span class="n">serializer_fields</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1062"><a href="#PumpWoodRestService.cls_fields_options-1062"><span class="linenos">1062</span></a>            <span class="n">foreign_key_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fields</span>
</span><span id="PumpWoodRestService.cls_fields_options-1063"><a href="#PumpWoodRestService.cls_fields_options-1063"><span class="linenos">1063</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1064"><a href="#PumpWoodRestService.cls_fields_options-1064"><span class="linenos">1064</span></a>        <span class="c1"># Get serializers associated with FKs and related models</span>
</span><span id="PumpWoodRestService.cls_fields_options-1065"><a href="#PumpWoodRestService.cls_fields_options-1065"><span class="linenos">1065</span></a>        <span class="n">microservice_fk_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1066"><a href="#PumpWoodRestService.cls_fields_options-1066"><span class="linenos">1066</span></a>        <span class="n">microservice_related_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1067"><a href="#PumpWoodRestService.cls_fields_options-1067"><span class="linenos">1067</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1068"><a href="#PumpWoodRestService.cls_fields_options-1068"><span class="linenos">1068</span></a>        <span class="n">all_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1069"><a href="#PumpWoodRestService.cls_fields_options-1069"><span class="linenos">1069</span></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_serializer</span> <span class="ow">in</span> <span class="n">serializer_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.cls_fields_options-1070"><a href="#PumpWoodRestService.cls_fields_options-1070"><span class="linenos">1070</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.cls_fields_options-1071"><a href="#PumpWoodRestService.cls_fields_options-1071"><span class="linenos">1071</span></a>            <span class="c1"># Do not create relations between models in search description #</span>
</span><span id="PumpWoodRestService.cls_fields_options-1072"><a href="#PumpWoodRestService.cls_fields_options-1072"><span class="linenos">1072</span></a>            <span class="n">is_microservice_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1073"><a href="#PumpWoodRestService.cls_fields_options-1073"><span class="linenos">1073</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceForeignKeyField</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1074"><a href="#PumpWoodRestService.cls_fields_options-1074"><span class="linenos">1074</span></a>            <span class="n">is_local_fk</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1075"><a href="#PumpWoodRestService.cls_fields_options-1075"><span class="linenos">1075</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalForeignKeyField</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1076"><a href="#PumpWoodRestService.cls_fields_options-1076"><span class="linenos">1076</span></a>            <span class="k">if</span> <span class="n">is_microservice_fk</span> <span class="ow">or</span> <span class="n">is_local_fk</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1077"><a href="#PumpWoodRestService.cls_fields_options-1077"><span class="linenos">1077</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1078"><a href="#PumpWoodRestService.cls_fields_options-1078"><span class="linenos">1078</span></a>                <span class="n">microservice_fk_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="PumpWoodRestService.cls_fields_options-1079"><a href="#PumpWoodRestService.cls_fields_options-1079"><span class="linenos">1079</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1080"><a href="#PumpWoodRestService.cls_fields_options-1080"><span class="linenos">1080</span></a>            <span class="n">is_microservice_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1081"><a href="#PumpWoodRestService.cls_fields_options-1081"><span class="linenos">1081</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">MicroserviceRelatedField</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1082"><a href="#PumpWoodRestService.cls_fields_options-1082"><span class="linenos">1082</span></a>            <span class="n">is_local_related</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1083"><a href="#PumpWoodRestService.cls_fields_options-1083"><span class="linenos">1083</span></a>                <span class="n">field_serializer</span><span class="p">,</span> <span class="n">LocalRelatedField</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1084"><a href="#PumpWoodRestService.cls_fields_options-1084"><span class="linenos">1084</span></a>            <span class="k">if</span> <span class="n">is_microservice_related</span> <span class="ow">or</span> <span class="n">is_local_related</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1085"><a href="#PumpWoodRestService.cls_fields_options-1085"><span class="linenos">1085</span></a>                <span class="n">field_key</span> <span class="o">=</span> <span class="n">field_serializer</span><span class="o">.</span><span class="n">get_fields_options_key</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1086"><a href="#PumpWoodRestService.cls_fields_options-1086"><span class="linenos">1086</span></a>                <span class="n">microservice_related_dict</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_serializer</span>
</span><span id="PumpWoodRestService.cls_fields_options-1087"><a href="#PumpWoodRestService.cls_fields_options-1087"><span class="linenos">1087</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1088"><a href="#PumpWoodRestService.cls_fields_options-1088"><span class="linenos">1088</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="n">dict_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_serializer</span><span class="o">.</span><span class="n">source</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1089"><a href="#PumpWoodRestService.cls_fields_options-1089"><span class="linenos">1089</span></a>            <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1090"><a href="#PumpWoodRestService.cls_fields_options-1090"><span class="linenos">1090</span></a>                <span class="k">continue</span>
</span><span id="PumpWoodRestService.cls_fields_options-1091"><a href="#PumpWoodRestService.cls_fields_options-1091"><span class="linenos">1091</span></a>            <span class="c1">################################################################</span>
</span><span id="PumpWoodRestService.cls_fields_options-1092"><a href="#PumpWoodRestService.cls_fields_options-1092"><span class="linenos">1092</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1093"><a href="#PumpWoodRestService.cls_fields_options-1093"><span class="linenos">1093</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1094"><a href="#PumpWoodRestService.cls_fields_options-1094"><span class="linenos">1094</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1095"><a href="#PumpWoodRestService.cls_fields_options-1095"><span class="linenos">1095</span></a>            <span class="c1"># Getting correspondent simple type</span>
</span><span id="PumpWoodRestService.cls_fields_options-1096"><a href="#PumpWoodRestService.cls_fields_options-1096"><span class="linenos">1096</span></a>            <span class="n">column_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1097"><a href="#PumpWoodRestService.cls_fields_options-1097"><span class="linenos">1097</span></a>            <span class="n">python_type</span> <span class="o">=</span> <span class="n">django_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column_type</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1098"><a href="#PumpWoodRestService.cls_fields_options-1098"><span class="linenos">1098</span></a>            <span class="k">if</span> <span class="n">python_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1099"><a href="#PumpWoodRestService.cls_fields_options-1099"><span class="linenos">1099</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1100"><a href="#PumpWoodRestService.cls_fields_options-1100"><span class="linenos">1100</span></a>                    <span class="s2">&quot;Type [</span><span class="si">{column_type}</span><span class="s2">] not implemented in map dictionary &quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1101"><a href="#PumpWoodRestService.cls_fields_options-1101"><span class="linenos">1101</span></a>                    <span class="s2">&quot;django type -&gt; python type&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1102"><a href="#PumpWoodRestService.cls_fields_options-1102"><span class="linenos">1102</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1103"><a href="#PumpWoodRestService.cls_fields_options-1103"><span class="linenos">1103</span></a>                    <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">column_type</span><span class="o">=</span><span class="n">column_type</span><span class="p">))</span>
</span><span id="PumpWoodRestService.cls_fields_options-1104"><a href="#PumpWoodRestService.cls_fields_options-1104"><span class="linenos">1104</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1105"><a href="#PumpWoodRestService.cls_fields_options-1105"><span class="linenos">1105</span></a>            <span class="c1"># Getting default value</span>
</span><span id="PumpWoodRestService.cls_fields_options-1106"><a href="#PumpWoodRestService.cls_fields_options-1106"><span class="linenos">1106</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.cls_fields_options-1107"><a href="#PumpWoodRestService.cls_fields_options-1107"><span class="linenos">1107</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1108"><a href="#PumpWoodRestService.cls_fields_options-1108"><span class="linenos">1108</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1109"><a href="#PumpWoodRestService.cls_fields_options-1109"><span class="linenos">1109</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="PumpWoodRestService.cls_fields_options-1110"><a href="#PumpWoodRestService.cls_fields_options-1110"><span class="linenos">1110</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1111"><a href="#PumpWoodRestService.cls_fields_options-1111"><span class="linenos">1111</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1112"><a href="#PumpWoodRestService.cls_fields_options-1112"><span class="linenos">1112</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="PumpWoodRestService.cls_fields_options-1113"><a href="#PumpWoodRestService.cls_fields_options-1113"><span class="linenos">1113</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1114"><a href="#PumpWoodRestService.cls_fields_options-1114"><span class="linenos">1114</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1115"><a href="#PumpWoodRestService.cls_fields_options-1115"><span class="linenos">1115</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.cls_fields_options-1116"><a href="#PumpWoodRestService.cls_fields_options-1116"><span class="linenos">1116</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1117"><a href="#PumpWoodRestService.cls_fields_options-1117"><span class="linenos">1117</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1118"><a href="#PumpWoodRestService.cls_fields_options-1118"><span class="linenos">1118</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1119"><a href="#PumpWoodRestService.cls_fields_options-1119"><span class="linenos">1119</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.cls_fields_options-1120"><a href="#PumpWoodRestService.cls_fields_options-1120"><span class="linenos">1120</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1121"><a href="#PumpWoodRestService.cls_fields_options-1121"><span class="linenos">1121</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1122"><a href="#PumpWoodRestService.cls_fields_options-1122"><span class="linenos">1122</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1123"><a href="#PumpWoodRestService.cls_fields_options-1123"><span class="linenos">1123</span></a>                <span class="n">column</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">column</span>
</span><span id="PumpWoodRestService.cls_fields_options-1124"><a href="#PumpWoodRestService.cls_fields_options-1124"><span class="linenos">1124</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1125"><a href="#PumpWoodRestService.cls_fields_options-1125"><span class="linenos">1125</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1126"><a href="#PumpWoodRestService.cls_fields_options-1126"><span class="linenos">1126</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1127"><a href="#PumpWoodRestService.cls_fields_options-1127"><span class="linenos">1127</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1128"><a href="#PumpWoodRestService.cls_fields_options-1128"><span class="linenos">1128</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1129"><a href="#PumpWoodRestService.cls_fields_options-1129"><span class="linenos">1129</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1130"><a href="#PumpWoodRestService.cls_fields_options-1130"><span class="linenos">1130</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1131"><a href="#PumpWoodRestService.cls_fields_options-1131"><span class="linenos">1131</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService.cls_fields_options-1132"><a href="#PumpWoodRestService.cls_fields_options-1132"><span class="linenos">1132</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1133"><a href="#PumpWoodRestService.cls_fields_options-1133"><span class="linenos">1133</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">column</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1134"><a href="#PumpWoodRestService.cls_fields_options-1134"><span class="linenos">1134</span></a>                <span class="s2">&quot;column__verbose&quot;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1135"><a href="#PumpWoodRestService.cls_fields_options-1135"><span class="linenos">1135</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1136"><a href="#PumpWoodRestService.cls_fields_options-1136"><span class="linenos">1136</span></a>                <span class="s2">&quot;help_text__verbose&quot;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1137"><a href="#PumpWoodRestService.cls_fields_options-1137"><span class="linenos">1137</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">python_type</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1138"><a href="#PumpWoodRestService.cls_fields_options-1138"><span class="linenos">1138</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1139"><a href="#PumpWoodRestService.cls_fields_options-1139"><span class="linenos">1139</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1140"><a href="#PumpWoodRestService.cls_fields_options-1140"><span class="linenos">1140</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1141"><a href="#PumpWoodRestService.cls_fields_options-1141"><span class="linenos">1141</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1142"><a href="#PumpWoodRestService.cls_fields_options-1142"><span class="linenos">1142</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1143"><a href="#PumpWoodRestService.cls_fields_options-1143"><span class="linenos">1143</span></a>                    <span class="p">(</span><span class="n">column</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="PumpWoodRestService.cls_fields_options-1144"><a href="#PumpWoodRestService.cls_fields_options-1144"><span class="linenos">1144</span></a>                    <span class="p">(</span><span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;pk&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1145"><a href="#PumpWoodRestService.cls_fields_options-1145"><span class="linenos">1145</span></a>                <span class="p">),</span> <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="p">{}}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1146"><a href="#PumpWoodRestService.cls_fields_options-1146"><span class="linenos">1146</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1147"><a href="#PumpWoodRestService.cls_fields_options-1147"><span class="linenos">1147</span></a>            <span class="c1"># Get choice options if avaiable</span>
</span><span id="PumpWoodRestService.cls_fields_options-1148"><a href="#PumpWoodRestService.cls_fields_options-1148"><span class="linenos">1148</span></a>            <span class="n">choices</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1149"><a href="#PumpWoodRestService.cls_fields_options-1149"><span class="linenos">1149</span></a>            <span class="k">if</span> <span class="n">choices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1150"><a href="#PumpWoodRestService.cls_fields_options-1150"><span class="linenos">1150</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;options&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1151"><a href="#PumpWoodRestService.cls_fields_options-1151"><span class="linenos">1151</span></a>                <span class="n">in_list</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1152"><a href="#PumpWoodRestService.cls_fields_options-1152"><span class="linenos">1152</span></a>                <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1153"><a href="#PumpWoodRestService.cls_fields_options-1153"><span class="linenos">1153</span></a>                    <span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1154"><a href="#PumpWoodRestService.cls_fields_options-1154"><span class="linenos">1154</span></a>                        <span class="n">sentence</span><span class="o">=</span><span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__choices&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1155"><a href="#PumpWoodRestService.cls_fields_options-1155"><span class="linenos">1155</span></a>                    <span class="n">in_list</span><span class="p">[</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService.cls_fields_options-1156"><a href="#PumpWoodRestService.cls_fields_options-1156"><span class="linenos">1156</span></a>                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="PumpWoodRestService.cls_fields_options-1157"><a href="#PumpWoodRestService.cls_fields_options-1157"><span class="linenos">1157</span></a>                        <span class="s2">&quot;description__verbose&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1158"><a href="#PumpWoodRestService.cls_fields_options-1158"><span class="linenos">1158</span></a>                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1159"><a href="#PumpWoodRestService.cls_fields_options-1159"><span class="linenos">1159</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;in&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_list</span>
</span><span id="PumpWoodRestService.cls_fields_options-1160"><a href="#PumpWoodRestService.cls_fields_options-1160"><span class="linenos">1160</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1161"><a href="#PumpWoodRestService.cls_fields_options-1161"><span class="linenos">1161</span></a>            <span class="c1"># Set autoincrement for primary keys</span>
</span><span id="PumpWoodRestService.cls_fields_options-1162"><a href="#PumpWoodRestService.cls_fields_options-1162"><span class="linenos">1162</span></a>            <span class="k">if</span> <span class="n">primary_key</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1163"><a href="#PumpWoodRestService.cls_fields_options-1163"><span class="linenos">1163</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pk&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1164"><a href="#PumpWoodRestService.cls_fields_options-1164"><span class="linenos">1164</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#autoincrement#&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1165"><a href="#PumpWoodRestService.cls_fields_options-1165"><span class="linenos">1165</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;doc_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;object primary key&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1166"><a href="#PumpWoodRestService.cls_fields_options-1166"><span class="linenos">1166</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1167"><a href="#PumpWoodRestService.cls_fields_options-1167"><span class="linenos">1167</span></a>            <span class="c1"># Ajust type if file</span>
</span><span id="PumpWoodRestService.cls_fields_options-1168"><a href="#PumpWoodRestService.cls_fields_options-1168"><span class="linenos">1168</span></a>            <span class="n">file_field</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">file_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1169"><a href="#PumpWoodRestService.cls_fields_options-1169"><span class="linenos">1169</span></a>            <span class="k">if</span> <span class="n">file_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1170"><a href="#PumpWoodRestService.cls_fields_options-1170"><span class="linenos">1170</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1171"><a href="#PumpWoodRestService.cls_fields_options-1171"><span class="linenos">1171</span></a>                <span class="n">column_info</span><span class="p">[</span><span class="s2">&quot;extra_info&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService.cls_fields_options-1172"><a href="#PumpWoodRestService.cls_fields_options-1172"><span class="linenos">1172</span></a>                    <span class="s2">&quot;permited_file_types&quot;</span><span class="p">:</span> <span class="n">file_field</span><span class="p">}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1173"><a href="#PumpWoodRestService.cls_fields_options-1173"><span class="linenos">1173</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService.cls_fields_options-1174"><a href="#PumpWoodRestService.cls_fields_options-1174"><span class="linenos">1174</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1175"><a href="#PumpWoodRestService.cls_fields_options-1175"><span class="linenos">1175</span></a>        <span class="c1">#############################################</span>
</span><span id="PumpWoodRestService.cls_fields_options-1176"><a href="#PumpWoodRestService.cls_fields_options-1176"><span class="linenos">1176</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="PumpWoodRestService.cls_fields_options-1177"><a href="#PumpWoodRestService.cls_fields_options-1177"><span class="linenos">1177</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_fk_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.cls_fields_options-1178"><a href="#PumpWoodRestService.cls_fields_options-1178"><span class="linenos">1178</span></a>            <span class="n">column</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1179"><a href="#PumpWoodRestService.cls_fields_options-1179"><span class="linenos">1179</span></a>            <span class="k">if</span> <span class="n">column</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1180"><a href="#PumpWoodRestService.cls_fields_options-1180"><span class="linenos">1180</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1181"><a href="#PumpWoodRestService.cls_fields_options-1181"><span class="linenos">1181</span></a>                    <span class="s2">&quot;Foreign Key [</span><span class="si">{key}</span><span class="s2">] was not found as model_class &quot;</span>
</span><span id="PumpWoodRestService.cls_fields_options-1182"><a href="#PumpWoodRestService.cls_fields_options-1182"><span class="linenos">1182</span></a>                    <span class="s2">&quot;[</span><span class="si">{model_class}</span><span class="s2">] fields&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1183"><a href="#PumpWoodRestService.cls_fields_options-1183"><span class="linenos">1183</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodOtherException</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1184"><a href="#PumpWoodRestService.cls_fields_options-1184"><span class="linenos">1184</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1185"><a href="#PumpWoodRestService.cls_fields_options-1185"><span class="linenos">1185</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span> <span class="s2">&quot;model_class&quot;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">})</span>
</span><span id="PumpWoodRestService.cls_fields_options-1186"><a href="#PumpWoodRestService.cls_fields_options-1186"><span class="linenos">1186</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1187"><a href="#PumpWoodRestService.cls_fields_options-1187"><span class="linenos">1187</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1188"><a href="#PumpWoodRestService.cls_fields_options-1188"><span class="linenos">1188</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1189"><a href="#PumpWoodRestService.cls_fields_options-1189"><span class="linenos">1189</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1190"><a href="#PumpWoodRestService.cls_fields_options-1190"><span class="linenos">1190</span></a>            <span class="n">primary_key</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;primary_key&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1191"><a href="#PumpWoodRestService.cls_fields_options-1191"><span class="linenos">1191</span></a>            <span class="n">help_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;help_text&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="PumpWoodRestService.cls_fields_options-1192"><a href="#PumpWoodRestService.cls_fields_options-1192"><span class="linenos">1192</span></a>            <span class="n">db_index</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;db_index&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1193"><a href="#PumpWoodRestService.cls_fields_options-1193"><span class="linenos">1193</span></a>            <span class="n">unique</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;unique&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1194"><a href="#PumpWoodRestService.cls_fields_options-1194"><span class="linenos">1194</span></a>            <span class="n">null</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1195"><a href="#PumpWoodRestService.cls_fields_options-1195"><span class="linenos">1195</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1196"><a href="#PumpWoodRestService.cls_fields_options-1196"><span class="linenos">1196</span></a>            <span class="c1"># Getting default value</span>
</span><span id="PumpWoodRestService.cls_fields_options-1197"><a href="#PumpWoodRestService.cls_fields_options-1197"><span class="linenos">1197</span></a>            <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="PumpWoodRestService.cls_fields_options-1198"><a href="#PumpWoodRestService.cls_fields_options-1198"><span class="linenos">1198</span></a>            <span class="n">f_default</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1199"><a href="#PumpWoodRestService.cls_fields_options-1199"><span class="linenos">1199</span></a>            <span class="k">if</span> <span class="n">f_default</span> <span class="o">!=</span> <span class="n">NOT_PROVIDED</span> <span class="ow">and</span> <span class="n">f_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1200"><a href="#PumpWoodRestService.cls_fields_options-1200"><span class="linenos">1200</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f_default</span><span class="p">):</span>
</span><span id="PumpWoodRestService.cls_fields_options-1201"><a href="#PumpWoodRestService.cls_fields_options-1201"><span class="linenos">1201</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span><span class="p">()</span>
</span><span id="PumpWoodRestService.cls_fields_options-1202"><a href="#PumpWoodRestService.cls_fields_options-1202"><span class="linenos">1202</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.cls_fields_options-1203"><a href="#PumpWoodRestService.cls_fields_options-1203"><span class="linenos">1203</span></a>                    <span class="n">default</span> <span class="o">=</span> <span class="n">f_default</span>
</span><span id="PumpWoodRestService.cls_fields_options-1204"><a href="#PumpWoodRestService.cls_fields_options-1204"><span class="linenos">1204</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1205"><a href="#PumpWoodRestService.cls_fields_options-1205"><span class="linenos">1205</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1206"><a href="#PumpWoodRestService.cls_fields_options-1206"><span class="linenos">1206</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1207"><a href="#PumpWoodRestService.cls_fields_options-1207"><span class="linenos">1207</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1208"><a href="#PumpWoodRestService.cls_fields_options-1208"><span class="linenos">1208</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1209"><a href="#PumpWoodRestService.cls_fields_options-1209"><span class="linenos">1209</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService.cls_fields_options-1210"><a href="#PumpWoodRestService.cls_fields_options-1210"><span class="linenos">1210</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1211"><a href="#PumpWoodRestService.cls_fields_options-1211"><span class="linenos">1211</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1212"><a href="#PumpWoodRestService.cls_fields_options-1212"><span class="linenos">1212</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1213"><a href="#PumpWoodRestService.cls_fields_options-1213"><span class="linenos">1213</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1214"><a href="#PumpWoodRestService.cls_fields_options-1214"><span class="linenos">1214</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1215"><a href="#PumpWoodRestService.cls_fields_options-1215"><span class="linenos">1215</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;foreign_key&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1216"><a href="#PumpWoodRestService.cls_fields_options-1216"><span class="linenos">1216</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1217"><a href="#PumpWoodRestService.cls_fields_options-1217"><span class="linenos">1217</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1218"><a href="#PumpWoodRestService.cls_fields_options-1218"><span class="linenos">1218</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="n">db_index</span> <span class="ow">or</span> <span class="n">primary_key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1219"><a href="#PumpWoodRestService.cls_fields_options-1219"><span class="linenos">1219</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="n">unique</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1220"><a href="#PumpWoodRestService.cls_fields_options-1220"><span class="linenos">1220</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">read_only_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1221"><a href="#PumpWoodRestService.cls_fields_options-1221"><span class="linenos">1221</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1222"><a href="#PumpWoodRestService.cls_fields_options-1222"><span class="linenos">1222</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService.cls_fields_options-1223"><a href="#PumpWoodRestService.cls_fields_options-1223"><span class="linenos">1223</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1224"><a href="#PumpWoodRestService.cls_fields_options-1224"><span class="linenos">1224</span></a>        <span class="c1">#############################################</span>
</span><span id="PumpWoodRestService.cls_fields_options-1225"><a href="#PumpWoodRestService.cls_fields_options-1225"><span class="linenos">1225</span></a>        <span class="c1"># Adding field description for foreign keys #</span>
</span><span id="PumpWoodRestService.cls_fields_options-1226"><a href="#PumpWoodRestService.cls_fields_options-1226"><span class="linenos">1226</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">microservice_related_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.cls_fields_options-1227"><a href="#PumpWoodRestService.cls_fields_options-1227"><span class="linenos">1227</span></a>            <span class="n">tag</span> <span class="o">=</span> <span class="n">translation_tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1228"><a href="#PumpWoodRestService.cls_fields_options-1228"><span class="linenos">1228</span></a>                <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1229"><a href="#PumpWoodRestService.cls_fields_options-1229"><span class="linenos">1229</span></a>
</span><span id="PumpWoodRestService.cls_fields_options-1230"><a href="#PumpWoodRestService.cls_fields_options-1230"><span class="linenos">1230</span></a>            <span class="n">column__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1231"><a href="#PumpWoodRestService.cls_fields_options-1231"><span class="linenos">1231</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__column&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1232"><a href="#PumpWoodRestService.cls_fields_options-1232"><span class="linenos">1232</span></a>            <span class="n">help_text__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span>
</span><span id="PumpWoodRestService.cls_fields_options-1233"><a href="#PumpWoodRestService.cls_fields_options-1233"><span class="linenos">1233</span></a>                <span class="n">sentence</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span> <span class="o">+</span> <span class="s2">&quot;__help_text&quot;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.cls_fields_options-1234"><a href="#PumpWoodRestService.cls_fields_options-1234"><span class="linenos">1234</span></a>            <span class="n">column_info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodRestService.cls_fields_options-1235"><a href="#PumpWoodRestService.cls_fields_options-1235"><span class="linenos">1235</span></a>                <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1236"><a href="#PumpWoodRestService.cls_fields_options-1236"><span class="linenos">1236</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1237"><a href="#PumpWoodRestService.cls_fields_options-1237"><span class="linenos">1237</span></a>                <span class="s1">&#39;column__verbose&#39;</span><span class="p">:</span> <span class="n">column__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1238"><a href="#PumpWoodRestService.cls_fields_options-1238"><span class="linenos">1238</span></a>                <span class="s2">&quot;help_text&quot;</span><span class="p">:</span> <span class="n">help_text</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1239"><a href="#PumpWoodRestService.cls_fields_options-1239"><span class="linenos">1239</span></a>                <span class="s1">&#39;help_text__verbose&#39;</span><span class="p">:</span> <span class="n">help_text__verbose</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1240"><a href="#PumpWoodRestService.cls_fields_options-1240"><span class="linenos">1240</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;related_model&quot;</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1241"><a href="#PumpWoodRestService.cls_fields_options-1241"><span class="linenos">1241</span></a>                <span class="s2">&quot;nullable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1242"><a href="#PumpWoodRestService.cls_fields_options-1242"><span class="linenos">1242</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">default</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1243"><a href="#PumpWoodRestService.cls_fields_options-1243"><span class="linenos">1243</span></a>                <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1244"><a href="#PumpWoodRestService.cls_fields_options-1244"><span class="linenos">1244</span></a>                <span class="s2">&quot;unique&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1245"><a href="#PumpWoodRestService.cls_fields_options-1245"><span class="linenos">1245</span></a>                <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="PumpWoodRestService.cls_fields_options-1246"><a href="#PumpWoodRestService.cls_fields_options-1246"><span class="linenos">1246</span></a>                <span class="s2">&quot;extra_info&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()}</span>
</span><span id="PumpWoodRestService.cls_fields_options-1247"><a href="#PumpWoodRestService.cls_fields_options-1247"><span class="linenos">1247</span></a>            <span class="n">all_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">column_info</span>
</span><span id="PumpWoodRestService.cls_fields_options-1248"><a href="#PumpWoodRestService.cls_fields_options-1248"><span class="linenos">1248</span></a>        <span class="k">return</span> <span class="n">all_info</span>
</span></pre></div>


            <div class="docstring"><p>Return field options using serializer.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li>No args.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return information for each column to render search filters on
  frontend. Each field will have:</p>
  
  <ul>
  <li><strong>column [str]:</strong> Name of the column associated with the
  field (same as the key).</li>
  <li><strong>column__verbose [str]:</strong> Name of the collumns translated
  using Pumpwood I8s.</li>
  <li><strong>default [str]:</strong> Defult value for column.</li>
  <li><strong>extra_info [str]:</strong> Extra information for the collumns
  can be used to pass information about foreign key or
  related fields.</li>
  <li><strong>help_text [str]:</strong> Help text associated with the collumn.</li>
  <li><strong>help_text__verbose [str]:</strong> Help text associated with the
  collumn translated using Pumpwood I8s.</li>
  <li><strong>indexed [str]:</strong> If this column is indexed.</li>
  <li><strong>nullable [str]:</strong> If this column is nullable.</li>
  <li><strong>primary_key [str]:</strong> If this column is part of the primary
  key of the table. This is use full for tables with
  composite pk.</li>
  <li><strong>read_only [str]:</strong> If this column is read-only on
  end-point. The results for this value may differ from
  fill_validation due to <code><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></code>.</li>
  <li><strong>type [str]:</strong> Type of the column, will return Python types.</li>
  <li><strong>unique [str]:</strong> If this column has an unique restriction.</li>
  <li><strong>in [str]:</strong> If column type is options, this key will
  indicates the accepted values for this field. This element
  is a dictonary with keys:
  <ul>
  <li><strong>description:</strong> Human readble value for option.</li>
  <li><strong>description__verbose:</strong> Human readble value for
  option translated by Pumpwood I8s.</li>
  <li><strong>value:</strong> Value of the option that will be saved on
  database, for save end-points use this value to
  modify the object.</li>
  </ul></li>
  </ul>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.search_options" class="classattr">
                                        <input id="PumpWoodRestService.search_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">search_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="PumpWoodRestService.search_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.search_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.search_options-1250"><a href="#PumpWoodRestService.search_options-1250"><span class="linenos">1250</span></a>    <span class="k">def</span> <span class="nf">search_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService.search_options-1251"><a href="#PumpWoodRestService.search_options-1251"><span class="linenos">1251</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.search_options-1252"><a href="#PumpWoodRestService.search_options-1252"><span class="linenos">1252</span></a><span class="sd">        Return options to be used in list funciton.</span>
</span><span id="PumpWoodRestService.search_options-1253"><a href="#PumpWoodRestService.search_options-1253"><span class="linenos">1253</span></a>
</span><span id="PumpWoodRestService.search_options-1254"><a href="#PumpWoodRestService.search_options-1254"><span class="linenos">1254</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="PumpWoodRestService.search_options-1255"><a href="#PumpWoodRestService.search_options-1255"><span class="linenos">1255</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.search_options-1256"><a href="#PumpWoodRestService.search_options-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Return options to be used in list funciton.</p>

<p>THIS END-POINT IS DEPRECTED</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.fill_options" class="classattr">
                                        <input id="PumpWoodRestService.fill_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fill_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="PumpWoodRestService.fill_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.fill_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.fill_options-1258"><a href="#PumpWoodRestService.fill_options-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">fill_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span><span id="PumpWoodRestService.fill_options-1259"><a href="#PumpWoodRestService.fill_options-1259"><span class="linenos">1259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.fill_options-1260"><a href="#PumpWoodRestService.fill_options-1260"><span class="linenos">1260</span></a><span class="sd">        Return options for object update acording its partial data.</span>
</span><span id="PumpWoodRestService.fill_options-1261"><a href="#PumpWoodRestService.fill_options-1261"><span class="linenos">1261</span></a>
</span><span id="PumpWoodRestService.fill_options-1262"><a href="#PumpWoodRestService.fill_options-1262"><span class="linenos">1262</span></a><span class="sd">        THIS END-POINT IS DEPRECTED</span>
</span><span id="PumpWoodRestService.fill_options-1263"><a href="#PumpWoodRestService.fill_options-1263"><span class="linenos">1263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.fill_options-1264"><a href="#PumpWoodRestService.fill_options-1264"><span class="linenos">1264</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Return options for object update acording its partial data.</p>

<p>THIS END-POINT IS DEPRECTED</p>
</div>


                            </div>
                            <div id="PumpWoodRestService.list_view_options" class="classattr">
                                        <input id="PumpWoodRestService.list_view_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_view_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.list_view_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.list_view_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.list_view_options-1266"><a href="#PumpWoodRestService.list_view_options-1266"><span class="linenos">1266</span></a>    <span class="k">def</span> <span class="nf">list_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.list_view_options-1267"><a href="#PumpWoodRestService.list_view_options-1267"><span class="linenos">1267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_view_options-1268"><a href="#PumpWoodRestService.list_view_options-1268"><span class="linenos">1268</span></a><span class="sd">        Return information to render list views on frontend.</span>
</span><span id="PumpWoodRestService.list_view_options-1269"><a href="#PumpWoodRestService.list_view_options-1269"><span class="linenos">1269</span></a>
</span><span id="PumpWoodRestService.list_view_options-1270"><a href="#PumpWoodRestService.list_view_options-1270"><span class="linenos">1270</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.list_view_options-1271"><a href="#PumpWoodRestService.list_view_options-1271"><span class="linenos">1271</span></a><span class="sd">        No payload data.</span>
</span><span id="PumpWoodRestService.list_view_options-1272"><a href="#PumpWoodRestService.list_view_options-1272"><span class="linenos">1272</span></a>
</span><span id="PumpWoodRestService.list_view_options-1273"><a href="#PumpWoodRestService.list_view_options-1273"><span class="linenos">1273</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.list_view_options-1274"><a href="#PumpWoodRestService.list_view_options-1274"><span class="linenos">1274</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService.list_view_options-1275"><a href="#PumpWoodRestService.list_view_options-1275"><span class="linenos">1275</span></a>
</span><span id="PumpWoodRestService.list_view_options-1276"><a href="#PumpWoodRestService.list_view_options-1276"><span class="linenos">1276</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.list_view_options-1277"><a href="#PumpWoodRestService.list_view_options-1277"><span class="linenos">1277</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.list_view_options-1278"><a href="#PumpWoodRestService.list_view_options-1278"><span class="linenos">1278</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.list_view_options-1279"><a href="#PumpWoodRestService.list_view_options-1279"><span class="linenos">1279</span></a><span class="sd">            Return a dictionary with keys:</span>
</span><span id="PumpWoodRestService.list_view_options-1280"><a href="#PumpWoodRestService.list_view_options-1280"><span class="linenos">1280</span></a><span class="sd">            - **list_fields[List[str]]:** Return a list of default list fields</span>
</span><span id="PumpWoodRestService.list_view_options-1281"><a href="#PumpWoodRestService.list_view_options-1281"><span class="linenos">1281</span></a><span class="sd">                that should be redendered on list view.</span>
</span><span id="PumpWoodRestService.list_view_options-1282"><a href="#PumpWoodRestService.list_view_options-1282"><span class="linenos">1282</span></a><span class="sd">            - **field_type [dict]:** Return information for each column to</span>
</span><span id="PumpWoodRestService.list_view_options-1283"><a href="#PumpWoodRestService.list_view_options-1283"><span class="linenos">1283</span></a><span class="sd">                render search filters on frontend. Each field will have:</span>
</span><span id="PumpWoodRestService.list_view_options-1284"><a href="#PumpWoodRestService.list_view_options-1284"><span class="linenos">1284</span></a><span class="sd">                - **column [str]:** Name of the column associated with the</span>
</span><span id="PumpWoodRestService.list_view_options-1285"><a href="#PumpWoodRestService.list_view_options-1285"><span class="linenos">1285</span></a><span class="sd">                    field (same as the key).</span>
</span><span id="PumpWoodRestService.list_view_options-1286"><a href="#PumpWoodRestService.list_view_options-1286"><span class="linenos">1286</span></a><span class="sd">                - **column__verbose [str]:** Name of the collumns translated</span>
</span><span id="PumpWoodRestService.list_view_options-1287"><a href="#PumpWoodRestService.list_view_options-1287"><span class="linenos">1287</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_view_options-1288"><a href="#PumpWoodRestService.list_view_options-1288"><span class="linenos">1288</span></a><span class="sd">                - **default [str]:** Defult value for column.</span>
</span><span id="PumpWoodRestService.list_view_options-1289"><a href="#PumpWoodRestService.list_view_options-1289"><span class="linenos">1289</span></a><span class="sd">                - **extra_info [str]:** Extra information for the collumns</span>
</span><span id="PumpWoodRestService.list_view_options-1290"><a href="#PumpWoodRestService.list_view_options-1290"><span class="linenos">1290</span></a><span class="sd">                    can be used to pass information about foreign key or</span>
</span><span id="PumpWoodRestService.list_view_options-1291"><a href="#PumpWoodRestService.list_view_options-1291"><span class="linenos">1291</span></a><span class="sd">                    related fields.</span>
</span><span id="PumpWoodRestService.list_view_options-1292"><a href="#PumpWoodRestService.list_view_options-1292"><span class="linenos">1292</span></a><span class="sd">                - **help_text [str]:** Help text associated with the collumn.</span>
</span><span id="PumpWoodRestService.list_view_options-1293"><a href="#PumpWoodRestService.list_view_options-1293"><span class="linenos">1293</span></a><span class="sd">                - **help_text__verbose [str]:** Help text associated with the</span>
</span><span id="PumpWoodRestService.list_view_options-1294"><a href="#PumpWoodRestService.list_view_options-1294"><span class="linenos">1294</span></a><span class="sd">                    collumn translated using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_view_options-1295"><a href="#PumpWoodRestService.list_view_options-1295"><span class="linenos">1295</span></a><span class="sd">                - **indexed [str]:** If this column is indexed.</span>
</span><span id="PumpWoodRestService.list_view_options-1296"><a href="#PumpWoodRestService.list_view_options-1296"><span class="linenos">1296</span></a><span class="sd">                - **nullable [str]:** If this column is nullable.</span>
</span><span id="PumpWoodRestService.list_view_options-1297"><a href="#PumpWoodRestService.list_view_options-1297"><span class="linenos">1297</span></a><span class="sd">                - **primary_key [str]:** If this column is part of the primary</span>
</span><span id="PumpWoodRestService.list_view_options-1298"><a href="#PumpWoodRestService.list_view_options-1298"><span class="linenos">1298</span></a><span class="sd">                    key of the table. This is use full for tables with</span>
</span><span id="PumpWoodRestService.list_view_options-1299"><a href="#PumpWoodRestService.list_view_options-1299"><span class="linenos">1299</span></a><span class="sd">                    composite pk.</span>
</span><span id="PumpWoodRestService.list_view_options-1300"><a href="#PumpWoodRestService.list_view_options-1300"><span class="linenos">1300</span></a><span class="sd">                - **read_only [str]:** If this column is read-only on</span>
</span><span id="PumpWoodRestService.list_view_options-1301"><a href="#PumpWoodRestService.list_view_options-1301"><span class="linenos">1301</span></a><span class="sd">                    end-point. The results for this value may differ from</span>
</span><span id="PumpWoodRestService.list_view_options-1302"><a href="#PumpWoodRestService.list_view_options-1302"><span class="linenos">1302</span></a><span class="sd">                    fill_validation due to `gui_readonly`.</span>
</span><span id="PumpWoodRestService.list_view_options-1303"><a href="#PumpWoodRestService.list_view_options-1303"><span class="linenos">1303</span></a><span class="sd">                - **type [str]:** Type of the column, will return Python types.</span>
</span><span id="PumpWoodRestService.list_view_options-1304"><a href="#PumpWoodRestService.list_view_options-1304"><span class="linenos">1304</span></a><span class="sd">                - **unique [str]:** If this column has an unique restriction.</span>
</span><span id="PumpWoodRestService.list_view_options-1305"><a href="#PumpWoodRestService.list_view_options-1305"><span class="linenos">1305</span></a><span class="sd">                - **in [str]:** If column type is options, this key will</span>
</span><span id="PumpWoodRestService.list_view_options-1306"><a href="#PumpWoodRestService.list_view_options-1306"><span class="linenos">1306</span></a><span class="sd">                    indicates the accepted values for this field. This element</span>
</span><span id="PumpWoodRestService.list_view_options-1307"><a href="#PumpWoodRestService.list_view_options-1307"><span class="linenos">1307</span></a><span class="sd">                    is a dictonary with keys:</span>
</span><span id="PumpWoodRestService.list_view_options-1308"><a href="#PumpWoodRestService.list_view_options-1308"><span class="linenos">1308</span></a><span class="sd">                    - **description:** Human readble value for option.</span>
</span><span id="PumpWoodRestService.list_view_options-1309"><a href="#PumpWoodRestService.list_view_options-1309"><span class="linenos">1309</span></a><span class="sd">                    - **description__verbose:** Human readble value for</span>
</span><span id="PumpWoodRestService.list_view_options-1310"><a href="#PumpWoodRestService.list_view_options-1310"><span class="linenos">1310</span></a><span class="sd">                        option translated by Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.list_view_options-1311"><a href="#PumpWoodRestService.list_view_options-1311"><span class="linenos">1311</span></a><span class="sd">                    - **value:** Value of the option that will be saved on</span>
</span><span id="PumpWoodRestService.list_view_options-1312"><a href="#PumpWoodRestService.list_view_options-1312"><span class="linenos">1312</span></a><span class="sd">                        database, for save end-points use this value to</span>
</span><span id="PumpWoodRestService.list_view_options-1313"><a href="#PumpWoodRestService.list_view_options-1313"><span class="linenos">1313</span></a><span class="sd">                        modify the object.</span>
</span><span id="PumpWoodRestService.list_view_options-1314"><a href="#PumpWoodRestService.list_view_options-1314"><span class="linenos">1314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.list_view_options-1315"><a href="#PumpWoodRestService.list_view_options-1315"><span class="linenos">1315</span></a>        <span class="n">list_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_fields</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list_view_options-1316"><a href="#PumpWoodRestService.list_view_options-1316"><span class="linenos">1316</span></a>        <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService.list_view_options-1317"><a href="#PumpWoodRestService.list_view_options-1317"><span class="linenos">1317</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService.list_view_options-1318"><a href="#PumpWoodRestService.list_view_options-1318"><span class="linenos">1318</span></a>            <span class="s2">&quot;default_list_fields&quot;</span><span class="p">:</span> <span class="n">list_fields</span><span class="p">,</span>
</span><span id="PumpWoodRestService.list_view_options-1319"><a href="#PumpWoodRestService.list_view_options-1319"><span class="linenos">1319</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fields_options</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Return information to render list views on frontend.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>No payload data.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a dictionary with keys:</p>
  
  <ul>
  <li><strong>list_fields[List[str]]:</strong> Return a list of default list fields
  that should be redendered on list view.</li>
  <li><strong>field_type [dict]:</strong> Return information for each column to
  render search filters on frontend. Each field will have:
  <ul>
  <li><strong>column [str]:</strong> Name of the column associated with the
  field (same as the key).</li>
  <li><strong>column__verbose [str]:</strong> Name of the collumns translated
  using Pumpwood I8s.</li>
  <li><strong>default [str]:</strong> Defult value for column.</li>
  <li><strong>extra_info [str]:</strong> Extra information for the collumns
  can be used to pass information about foreign key or
  related fields.</li>
  <li><strong>help_text [str]:</strong> Help text associated with the collumn.</li>
  <li><strong>help_text__verbose [str]:</strong> Help text associated with the
  collumn translated using Pumpwood I8s.</li>
  <li><strong>indexed [str]:</strong> If this column is indexed.</li>
  <li><strong>nullable [str]:</strong> If this column is nullable.</li>
  <li><strong>primary_key [str]:</strong> If this column is part of the primary
  key of the table. This is use full for tables with
  composite pk.</li>
  <li><strong>read_only [str]:</strong> If this column is read-only on
  end-point. The results for this value may differ from
  fill_validation due to <code><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></code>.</li>
  <li><strong>type [str]:</strong> Type of the column, will return Python types.</li>
  <li><strong>unique [str]:</strong> If this column has an unique restriction.</li>
  <li><strong>in [str]:</strong> If column type is options, this key will
  indicates the accepted values for this field. This element
  is a dictonary with keys:
  <ul>
  <li><strong>description:</strong> Human readble value for option.</li>
  <li><strong>description__verbose:</strong> Human readble value for
  option translated by Pumpwood I8s.</li>
  <li><strong>value:</strong> Value of the option that will be saved on
  database, for save end-points use this value to
  modify the object.</li>
  </ul></li>
  </ul></li>
  </ul>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.retrieve_view_options" class="classattr">
                                        <input id="PumpWoodRestService.retrieve_view_options-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_view_options</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.retrieve_view_options-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.retrieve_view_options"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.retrieve_view_options-1321"><a href="#PumpWoodRestService.retrieve_view_options-1321"><span class="linenos">1321</span></a>    <span class="k">def</span> <span class="nf">retrieve_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1322"><a href="#PumpWoodRestService.retrieve_view_options-1322"><span class="linenos">1322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1323"><a href="#PumpWoodRestService.retrieve_view_options-1323"><span class="linenos">1323</span></a><span class="sd">        Return information to correctly create retrieve view.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1324"><a href="#PumpWoodRestService.retrieve_view_options-1324"><span class="linenos">1324</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1325"><a href="#PumpWoodRestService.retrieve_view_options-1325"><span class="linenos">1325</span></a><span class="sd">        Field set are set using gui_retrieve_fieldset attribute of the</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1326"><a href="#PumpWoodRestService.retrieve_view_options-1326"><span class="linenos">1326</span></a><span class="sd">        class. It is used classes to define each fieldset.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1327"><a href="#PumpWoodRestService.retrieve_view_options-1327"><span class="linenos">1327</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1328"><a href="#PumpWoodRestService.retrieve_view_options-1328"><span class="linenos">1328</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1329"><a href="#PumpWoodRestService.retrieve_view_options-1329"><span class="linenos">1329</span></a><span class="sd">        No payload data.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1330"><a href="#PumpWoodRestService.retrieve_view_options-1330"><span class="linenos">1330</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1331"><a href="#PumpWoodRestService.retrieve_view_options-1331"><span class="linenos">1331</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1332"><a href="#PumpWoodRestService.retrieve_view_options-1332"><span class="linenos">1332</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1333"><a href="#PumpWoodRestService.retrieve_view_options-1333"><span class="linenos">1333</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1334"><a href="#PumpWoodRestService.retrieve_view_options-1334"><span class="linenos">1334</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1335"><a href="#PumpWoodRestService.retrieve_view_options-1335"><span class="linenos">1335</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1336"><a href="#PumpWoodRestService.retrieve_view_options-1336"><span class="linenos">1336</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1337"><a href="#PumpWoodRestService.retrieve_view_options-1337"><span class="linenos">1337</span></a><span class="sd">            Return a dictonary with information to render retrieve</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1338"><a href="#PumpWoodRestService.retrieve_view_options-1338"><span class="linenos">1338</span></a><span class="sd">            views on front-ends. Returns a dictonary with keys:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1339"><a href="#PumpWoodRestService.retrieve_view_options-1339"><span class="linenos">1339</span></a><span class="sd">            - **fieldset [List[dict]]:** A list of dictionaries with</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1340"><a href="#PumpWoodRestService.retrieve_view_options-1340"><span class="linenos">1340</span></a><span class="sd">                information for rendering the retrieve page on frontend.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1341"><a href="#PumpWoodRestService.retrieve_view_options-1341"><span class="linenos">1341</span></a><span class="sd">                - **fields [List[str]]:** List of fields to be rendered at</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1342"><a href="#PumpWoodRestService.retrieve_view_options-1342"><span class="linenos">1342</span></a><span class="sd">                    fieldset.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1343"><a href="#PumpWoodRestService.retrieve_view_options-1343"><span class="linenos">1343</span></a><span class="sd">                - **name [str]:** Name of the fieldset.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1344"><a href="#PumpWoodRestService.retrieve_view_options-1344"><span class="linenos">1344</span></a><span class="sd">                - **name__verbose [str]:** Name of the fieldset translated</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1345"><a href="#PumpWoodRestService.retrieve_view_options-1345"><span class="linenos">1345</span></a><span class="sd">                    using Pumpwood I8s.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1346"><a href="#PumpWoodRestService.retrieve_view_options-1346"><span class="linenos">1346</span></a><span class="sd">            - **verbose_field [str]:** String that can be used to create</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1347"><a href="#PumpWoodRestService.retrieve_view_options-1347"><span class="linenos">1347</span></a><span class="sd">                user readble string at frontend.</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1348"><a href="#PumpWoodRestService.retrieve_view_options-1348"><span class="linenos">1348</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1349"><a href="#PumpWoodRestService.retrieve_view_options-1349"><span class="linenos">1349</span></a><span class="sd">            Example:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1350"><a href="#PumpWoodRestService.retrieve_view_options-1350"><span class="linenos">1350</span></a><span class="sd">            ```python</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1351"><a href="#PumpWoodRestService.retrieve_view_options-1351"><span class="linenos">1351</span></a><span class="sd">            {&#39;fieldset&#39;: [{</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1352"><a href="#PumpWoodRestService.retrieve_view_options-1352"><span class="linenos">1352</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1353"><a href="#PumpWoodRestService.retrieve_view_options-1353"><span class="linenos">1353</span></a><span class="sd">                    &#39;status&#39;, &#39;alias&#39;, &#39;description&#39;, &#39;notes&#39;, &#39;dimensions&#39;,</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1354"><a href="#PumpWoodRestService.retrieve_view_options-1354"><span class="linenos">1354</span></a><span class="sd">                    &#39;updated_by&#39;, &#39;updated_at&#39;],</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1355"><a href="#PumpWoodRestService.retrieve_view_options-1355"><span class="linenos">1355</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;main&#39;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1356"><a href="#PumpWoodRestService.retrieve_view_options-1356"><span class="linenos">1356</span></a><span class="sd">                &#39;name&#39;: &#39;main&#39;},</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1357"><a href="#PumpWoodRestService.retrieve_view_options-1357"><span class="linenos">1357</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1358"><a href="#PumpWoodRestService.retrieve_view_options-1358"><span class="linenos">1358</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1359"><a href="#PumpWoodRestService.retrieve_view_options-1359"><span class="linenos">1359</span></a><span class="sd">                    &#39;metabase_id&#39;, &#39;auto_embedding&#39;,</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1360"><a href="#PumpWoodRestService.retrieve_view_options-1360"><span class="linenos">1360</span></a><span class="sd">                    &#39;object_model_class&#39;, &#39;object_pk&#39;],</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1361"><a href="#PumpWoodRestService.retrieve_view_options-1361"><span class="linenos">1361</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;embedding&#39;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1362"><a href="#PumpWoodRestService.retrieve_view_options-1362"><span class="linenos">1362</span></a><span class="sd">                &#39;name&#39;: &#39;embedding&#39;},</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1363"><a href="#PumpWoodRestService.retrieve_view_options-1363"><span class="linenos">1363</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1364"><a href="#PumpWoodRestService.retrieve_view_options-1364"><span class="linenos">1364</span></a><span class="sd">                &#39;fields&#39;: [</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1365"><a href="#PumpWoodRestService.retrieve_view_options-1365"><span class="linenos">1365</span></a><span class="sd">                    &#39;expire_in_min&#39;, &#39;default_theme&#39;, &#39;default_is_bordered&#39;,</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1366"><a href="#PumpWoodRestService.retrieve_view_options-1366"><span class="linenos">1366</span></a><span class="sd">                    &#39;default_is_titled&#39;],</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1367"><a href="#PumpWoodRestService.retrieve_view_options-1367"><span class="linenos">1367</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;config&#39;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1368"><a href="#PumpWoodRestService.retrieve_view_options-1368"><span class="linenos">1368</span></a><span class="sd">                &#39;name&#39;: &#39;config&#39;},</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1369"><a href="#PumpWoodRestService.retrieve_view_options-1369"><span class="linenos">1369</span></a><span class="sd">              {</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1370"><a href="#PumpWoodRestService.retrieve_view_options-1370"><span class="linenos">1370</span></a><span class="sd">                &#39;fields&#39;: [&#39;extra_info&#39;],</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1371"><a href="#PumpWoodRestService.retrieve_view_options-1371"><span class="linenos">1371</span></a><span class="sd">                &#39;name__verbose&#39;: &#39;extra_info&#39;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1372"><a href="#PumpWoodRestService.retrieve_view_options-1372"><span class="linenos">1372</span></a><span class="sd">                &#39;name&#39;: &#39;extra_info&#39;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1373"><a href="#PumpWoodRestService.retrieve_view_options-1373"><span class="linenos">1373</span></a><span class="sd">              }],</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1374"><a href="#PumpWoodRestService.retrieve_view_options-1374"><span class="linenos">1374</span></a><span class="sd">             &#39;verbose_field&#39;: &#39;{pk} | {description}&#39;}</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1375"><a href="#PumpWoodRestService.retrieve_view_options-1375"><span class="linenos">1375</span></a><span class="sd">            ```</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1376"><a href="#PumpWoodRestService.retrieve_view_options-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1377"><a href="#PumpWoodRestService.retrieve_view_options-1377"><span class="linenos">1377</span></a>        <span class="n">gui_retrieve_fieldset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_retrieve_fieldset</span><span class="p">()</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1378"><a href="#PumpWoodRestService.retrieve_view_options-1378"><span class="linenos">1378</span></a>        <span class="n">gui_verbose_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_verbose_field</span><span class="p">()</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1379"><a href="#PumpWoodRestService.retrieve_view_options-1379"><span class="linenos">1379</span></a>
</span><span id="PumpWoodRestService.retrieve_view_options-1380"><a href="#PumpWoodRestService.retrieve_view_options-1380"><span class="linenos">1380</span></a>        <span class="c1"># If gui_retrieve_fieldset is not set return all columns</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1381"><a href="#PumpWoodRestService.retrieve_view_options-1381"><span class="linenos">1381</span></a>        <span class="c1"># on the main tab</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1382"><a href="#PumpWoodRestService.retrieve_view_options-1382"><span class="linenos">1382</span></a>        <span class="k">if</span> <span class="n">gui_retrieve_fieldset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1383"><a href="#PumpWoodRestService.retrieve_view_options-1383"><span class="linenos">1383</span></a>            <span class="n">fields_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1384"><a href="#PumpWoodRestService.retrieve_view_options-1384"><span class="linenos">1384</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">fields_options</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1385"><a href="#PumpWoodRestService.retrieve_view_options-1385"><span class="linenos">1385</span></a>            <span class="n">all_columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_columns</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;pk&#39;</span><span class="p">,</span> <span class="s1">&#39;model_class&#39;</span><span class="p">})</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1386"><a href="#PumpWoodRestService.retrieve_view_options-1386"><span class="linenos">1386</span></a>            <span class="n">all_columns</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1387"><a href="#PumpWoodRestService.retrieve_view_options-1387"><span class="linenos">1387</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1388"><a href="#PumpWoodRestService.retrieve_view_options-1388"><span class="linenos">1388</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1389"><a href="#PumpWoodRestService.retrieve_view_options-1389"><span class="linenos">1389</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">all_columns</span><span class="p">}}})</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1390"><a href="#PumpWoodRestService.retrieve_view_options-1390"><span class="linenos">1390</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1391"><a href="#PumpWoodRestService.retrieve_view_options-1391"><span class="linenos">1391</span></a>            <span class="n">return_gui_retrieve_fieldset</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">gui_retrieve_fieldset</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1392"><a href="#PumpWoodRestService.retrieve_view_options-1392"><span class="linenos">1392</span></a>            <span class="n">model_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1393"><a href="#PumpWoodRestService.retrieve_view_options-1393"><span class="linenos">1393</span></a>            <span class="n">tag_template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{model_class}</span><span class="s2">__fieldset_name__</span><span class="si">{fieldset_name}</span><span class="s2">&quot;</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1394"><a href="#PumpWoodRestService.retrieve_view_options-1394"><span class="linenos">1394</span></a>            <span class="k">for</span> <span class="n">fieldset</span> <span class="ow">in</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">:</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1395"><a href="#PumpWoodRestService.retrieve_view_options-1395"><span class="linenos">1395</span></a>                <span class="n">fieldset_name</span> <span class="o">=</span> <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1396"><a href="#PumpWoodRestService.retrieve_view_options-1396"><span class="linenos">1396</span></a>                <span class="n">tag</span> <span class="o">=</span> <span class="n">tag_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1397"><a href="#PumpWoodRestService.retrieve_view_options-1397"><span class="linenos">1397</span></a>                    <span class="n">model_class</span><span class="o">=</span><span class="n">model_class</span><span class="p">,</span> <span class="n">fieldset_name</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1398"><a href="#PumpWoodRestService.retrieve_view_options-1398"><span class="linenos">1398</span></a>                <span class="n">name__verbose</span> <span class="o">=</span> <span class="n">_</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">sentence</span><span class="o">=</span><span class="n">fieldset_name</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1399"><a href="#PumpWoodRestService.retrieve_view_options-1399"><span class="linenos">1399</span></a>                <span class="n">fieldset</span><span class="p">[</span><span class="s2">&quot;name__verbose&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name__verbose</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1400"><a href="#PumpWoodRestService.retrieve_view_options-1400"><span class="linenos">1400</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1401"><a href="#PumpWoodRestService.retrieve_view_options-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;verbose_field&quot;</span><span class="p">:</span> <span class="n">gui_verbose_field</span><span class="p">,</span>
</span><span id="PumpWoodRestService.retrieve_view_options-1402"><a href="#PumpWoodRestService.retrieve_view_options-1402"><span class="linenos">1402</span></a>                <span class="s2">&quot;fieldset&quot;</span><span class="p">:</span> <span class="n">return_gui_retrieve_fieldset</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Return information to correctly create retrieve view.</p>

<p>Field set are set using gui_retrieve_fieldset attribute of the
class. It is used classes to define each fieldset.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>No payload data.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a dictonary with information to render retrieve
  views on front-ends. Returns a dictonary with keys:</p>
  
  <ul>
  <li><strong>fieldset [List[dict]]:</strong> A list of dictionaries with
  information for rendering the retrieve page on frontend.
  <ul>
  <li><strong>fields [List[str]]:</strong> List of fields to be rendered at
  fieldset.</li>
  <li><strong>name [str]:</strong> Name of the fieldset.</li>
  <li><strong>name__verbose [str]:</strong> Name of the fieldset translated
  using Pumpwood I8s.</li>
  </ul></li>
  <li><strong>verbose_field [str]:</strong> String that can be used to create
  user readble string at frontend.</li>
  </ul>
  
  <p>Example:</p>
  
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="p">{</span><span class="s1">&#39;fieldset&#39;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;alias&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;updated_by&#39;</span><span class="p">,</span> <span class="s1">&#39;updated_at&#39;</span><span class="p">],</span>
    <span class="s1">&#39;name__verbose&#39;</span><span class="p">:</span> <span class="s1">&#39;main&#39;</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;main&#39;</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;metabase_id&#39;</span><span class="p">,</span> <span class="s1">&#39;auto_embedding&#39;</span><span class="p">,</span>
        <span class="s1">&#39;object_model_class&#39;</span><span class="p">,</span> <span class="s1">&#39;object_pk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;name__verbose&#39;</span><span class="p">:</span> <span class="s1">&#39;embedding&#39;</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;embedding&#39;</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;expire_in_min&#39;</span><span class="p">,</span> <span class="s1">&#39;default_theme&#39;</span><span class="p">,</span> <span class="s1">&#39;default_is_bordered&#39;</span><span class="p">,</span>
        <span class="s1">&#39;default_is_titled&#39;</span><span class="p">],</span>
    <span class="s1">&#39;name__verbose&#39;</span><span class="p">:</span> <span class="s1">&#39;config&#39;</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;config&#39;</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;extra_info&#39;</span><span class="p">],</span>
    <span class="s1">&#39;name__verbose&#39;</span><span class="p">:</span> <span class="s1">&#39;extra_info&#39;</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;extra_info&#39;</span>
  <span class="p">}],</span>
 <span class="s1">&#39;verbose_field&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{pk}</span><span class="s1"> | </span><span class="si">{description}</span><span class="s1">&#39;</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>
</div>


                            </div>
                            <div id="PumpWoodRestService.fill_options_validation" class="classattr">
                                        <input id="PumpWoodRestService.fill_options_validation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">fill_options_validation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodRestService.fill_options_validation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodRestService.fill_options_validation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodRestService.fill_options_validation-1404"><a href="#PumpWoodRestService.fill_options_validation-1404"><span class="linenos">1404</span></a>    <span class="k">def</span> <span class="nf">fill_options_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1405"><a href="#PumpWoodRestService.fill_options_validation-1405"><span class="linenos">1405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.fill_options_validation-1406"><a href="#PumpWoodRestService.fill_options_validation-1406"><span class="linenos">1406</span></a><span class="sd">        Return fill options for retrieve/save pages.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1407"><a href="#PumpWoodRestService.fill_options_validation-1407"><span class="linenos">1407</span></a>
</span><span id="PumpWoodRestService.fill_options_validation-1408"><a href="#PumpWoodRestService.fill_options_validation-1408"><span class="linenos">1408</span></a><span class="sd">        It will validate partial data fill return update fill options and</span>
</span><span id="PumpWoodRestService.fill_options_validation-1409"><a href="#PumpWoodRestService.fill_options_validation-1409"><span class="linenos">1409</span></a><span class="sd">        raise validation errors if necessary.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1410"><a href="#PumpWoodRestService.fill_options_validation-1410"><span class="linenos">1410</span></a>
</span><span id="PumpWoodRestService.fill_options_validation-1411"><a href="#PumpWoodRestService.fill_options_validation-1411"><span class="linenos">1411</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1412"><a href="#PumpWoodRestService.fill_options_validation-1412"><span class="linenos">1412</span></a><span class="sd">        Partially filled data to be validated by the backend.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1413"><a href="#PumpWoodRestService.fill_options_validation-1413"><span class="linenos">1413</span></a>
</span><span id="PumpWoodRestService.fill_options_validation-1414"><a href="#PumpWoodRestService.fill_options_validation-1414"><span class="linenos">1414</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1415"><a href="#PumpWoodRestService.fill_options_validation-1415"><span class="linenos">1415</span></a><span class="sd">        - **user_type[str]:**</span>
</span><span id="PumpWoodRestService.fill_options_validation-1416"><a href="#PumpWoodRestService.fill_options_validation-1416"><span class="linenos">1416</span></a><span class="sd">            Must be in [&#39;api&#39;, &#39;gui&#39;]. It will return the options according</span>
</span><span id="PumpWoodRestService.fill_options_validation-1417"><a href="#PumpWoodRestService.fill_options_validation-1417"><span class="linenos">1417</span></a><span class="sd">            to interface user is using. When requesting using &#39;gui&#39;,</span>
</span><span id="PumpWoodRestService.fill_options_validation-1418"><a href="#PumpWoodRestService.fill_options_validation-1418"><span class="linenos">1418</span></a><span class="sd">            self.gui_readonly field will be setted as read-only.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1419"><a href="#PumpWoodRestService.fill_options_validation-1419"><span class="linenos">1419</span></a><span class="sd">        - **field [str]:**</span>
</span><span id="PumpWoodRestService.fill_options_validation-1420"><a href="#PumpWoodRestService.fill_options_validation-1420"><span class="linenos">1420</span></a><span class="sd">            Set to validade an specific field. If not set all</span>
</span><span id="PumpWoodRestService.fill_options_validation-1421"><a href="#PumpWoodRestService.fill_options_validation-1421"><span class="linenos">1421</span></a><span class="sd">            fields will be validated. Validation must be implemented.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1422"><a href="#PumpWoodRestService.fill_options_validation-1422"><span class="linenos">1422</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1423"><a href="#PumpWoodRestService.fill_options_validation-1423"><span class="linenos">1423</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodRestService.fill_options_validation-1424"><a href="#PumpWoodRestService.fill_options_validation-1424"><span class="linenos">1424</span></a><span class="sd">        Return [dict]:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1425"><a href="#PumpWoodRestService.fill_options_validation-1425"><span class="linenos">1425</span></a><span class="sd">            Return an dictonary with `field_descriptions` generated by</span>
</span><span id="PumpWoodRestService.fill_options_validation-1426"><a href="#PumpWoodRestService.fill_options_validation-1426"><span class="linenos">1426</span></a><span class="sd">            `cls_fields_options` and `gui_readonly` indicating the fields</span>
</span><span id="PumpWoodRestService.fill_options_validation-1427"><a href="#PumpWoodRestService.fill_options_validation-1427"><span class="linenos">1427</span></a><span class="sd">            that will be set as read-only if user_type=&#39;gui&#39;</span>
</span><span id="PumpWoodRestService.fill_options_validation-1428"><a href="#PumpWoodRestService.fill_options_validation-1428"><span class="linenos">1428</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodRestService.fill_options_validation-1429"><a href="#PumpWoodRestService.fill_options_validation-1429"><span class="linenos">1429</span></a>        <span class="n">user_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_type&#39;</span><span class="p">,</span> <span class="s1">&#39;api&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.fill_options_validation-1430"><a href="#PumpWoodRestService.fill_options_validation-1430"><span class="linenos">1430</span></a>        <span class="n">field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;field&#39;</span><span class="p">)</span>
</span><span id="PumpWoodRestService.fill_options_validation-1431"><a href="#PumpWoodRestService.fill_options_validation-1431"><span class="linenos">1431</span></a>        <span class="n">partial_data</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodRestService.fill_options_validation-1432"><a href="#PumpWoodRestService.fill_options_validation-1432"><span class="linenos">1432</span></a>
</span><span id="PumpWoodRestService.fill_options_validation-1433"><a href="#PumpWoodRestService.fill_options_validation-1433"><span class="linenos">1433</span></a>        <span class="n">gui_readonly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_gui_readonly</span><span class="p">()</span>
</span><span id="PumpWoodRestService.fill_options_validation-1434"><a href="#PumpWoodRestService.fill_options_validation-1434"><span class="linenos">1434</span></a>        <span class="n">fill_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls_fields_options</span><span class="p">()</span>
</span><span id="PumpWoodRestService.fill_options_validation-1435"><a href="#PumpWoodRestService.fill_options_validation-1435"><span class="linenos">1435</span></a>
</span><span id="PumpWoodRestService.fill_options_validation-1436"><a href="#PumpWoodRestService.fill_options_validation-1436"><span class="linenos">1436</span></a>        <span class="c1"># If it is gui interface then set gui_readonly as read-only</span>
</span><span id="PumpWoodRestService.fill_options_validation-1437"><a href="#PumpWoodRestService.fill_options_validation-1437"><span class="linenos">1437</span></a>        <span class="c1"># this will limit fields that are not read-only but should not</span>
</span><span id="PumpWoodRestService.fill_options_validation-1438"><a href="#PumpWoodRestService.fill_options_validation-1438"><span class="linenos">1438</span></a>        <span class="c1"># be edited be the user</span>
</span><span id="PumpWoodRestService.fill_options_validation-1439"><a href="#PumpWoodRestService.fill_options_validation-1439"><span class="linenos">1439</span></a>        <span class="k">if</span> <span class="n">user_type</span> <span class="o">==</span> <span class="s1">&#39;gui&#39;</span><span class="p">:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1440"><a href="#PumpWoodRestService.fill_options_validation-1440"><span class="linenos">1440</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">fill_options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="PumpWoodRestService.fill_options_validation-1441"><a href="#PumpWoodRestService.fill_options_validation-1441"><span class="linenos">1441</span></a>                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">gui_readonly</span><span class="p">:</span>
</span><span id="PumpWoodRestService.fill_options_validation-1442"><a href="#PumpWoodRestService.fill_options_validation-1442"><span class="linenos">1442</span></a>                    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;read_only&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="PumpWoodRestService.fill_options_validation-1443"><a href="#PumpWoodRestService.fill_options_validation-1443"><span class="linenos">1443</span></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">({</span>
</span><span id="PumpWoodRestService.fill_options_validation-1444"><a href="#PumpWoodRestService.fill_options_validation-1444"><span class="linenos">1444</span></a>            <span class="s2">&quot;field_descriptions&quot;</span><span class="p">:</span> <span class="n">fill_options</span><span class="p">,</span>
</span><span id="PumpWoodRestService.fill_options_validation-1445"><a href="#PumpWoodRestService.fill_options_validation-1445"><span class="linenos">1445</span></a>            <span class="s2">&quot;gui_readonly&quot;</span><span class="p">:</span> <span class="n">gui_readonly</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Return fill options for retrieve/save pages.</p>

<p>It will validate partial data fill return update fill options and
raise validation errors if necessary.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>Partially filled data to be validated by the backend.</p>

<h6 id="request-query-data">Request query data:</h6>

<ul>
<li><strong>user_type[str]:</strong>
Must be in ['api', 'gui']. It will return the options according
to interface user is using. When requesting using 'gui',
self.gui_readonly field will be setted as read-only.</li>
<li><strong>field [str]:</strong>
Set to validade an specific field. If not set all
fields will be validated. Validation must be implemented.</li>
</ul>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<p>Return [dict]:
    Return an dictonary with <code>field_descriptions</code> generated by
    <code><a href="#PumpWoodRestService.cls_fields_options">cls_fields_options</a></code> and <code><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></code> indicating the fields
    that will be set as read-only if user_type='gui'</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django.views.generic.base.View</dt>
                                <dd id="PumpWoodRestService.__init__" class="function">View</dd>
                <dd id="PumpWoodRestService.setup" class="function">setup</dd>

            </div>
            <div><dt>rest_framework.viewsets.ViewSetMixin</dt>
                                <dd id="PumpWoodRestService.as_view" class="function">as_view</dd>
                <dd id="PumpWoodRestService.initialize_request" class="function">initialize_request</dd>
                <dd id="PumpWoodRestService.reverse_action" class="function">reverse_action</dd>
                <dd id="PumpWoodRestService.get_extra_actions" class="function">get_extra_actions</dd>
                <dd id="PumpWoodRestService.get_extra_action_url_map" class="function">get_extra_action_url_map</dd>

            </div>
            <div><dt>rest_framework.views.APIView</dt>
                                <dd id="PumpWoodRestService.schema" class="variable">schema</dd>
                <dd id="PumpWoodRestService.allowed_methods" class="variable">allowed_methods</dd>
                <dd id="PumpWoodRestService.http_method_not_allowed" class="function">http_method_not_allowed</dd>
                <dd id="PumpWoodRestService.permission_denied" class="function">permission_denied</dd>
                <dd id="PumpWoodRestService.throttled" class="function">throttled</dd>
                <dd id="PumpWoodRestService.get_authenticate_header" class="function">get_authenticate_header</dd>
                <dd id="PumpWoodRestService.get_parser_context" class="function">get_parser_context</dd>
                <dd id="PumpWoodRestService.get_renderer_context" class="function">get_renderer_context</dd>
                <dd id="PumpWoodRestService.get_exception_handler_context" class="function">get_exception_handler_context</dd>
                <dd id="PumpWoodRestService.get_view_name" class="function">get_view_name</dd>
                <dd id="PumpWoodRestService.get_view_description" class="function">get_view_description</dd>
                <dd id="PumpWoodRestService.get_format_suffix" class="function">get_format_suffix</dd>
                <dd id="PumpWoodRestService.get_renderers" class="function">get_renderers</dd>
                <dd id="PumpWoodRestService.get_parsers" class="function">get_parsers</dd>
                <dd id="PumpWoodRestService.get_authenticators" class="function">get_authenticators</dd>
                <dd id="PumpWoodRestService.get_permissions" class="function">get_permissions</dd>
                <dd id="PumpWoodRestService.get_throttles" class="function">get_throttles</dd>
                <dd id="PumpWoodRestService.get_content_negotiator" class="function">get_content_negotiator</dd>
                <dd id="PumpWoodRestService.get_exception_handler" class="function">get_exception_handler</dd>
                <dd id="PumpWoodRestService.perform_content_negotiation" class="function">perform_content_negotiation</dd>
                <dd id="PumpWoodRestService.perform_authentication" class="function">perform_authentication</dd>
                <dd id="PumpWoodRestService.check_permissions" class="function">check_permissions</dd>
                <dd id="PumpWoodRestService.check_object_permissions" class="function">check_object_permissions</dd>
                <dd id="PumpWoodRestService.check_throttles" class="function">check_throttles</dd>
                <dd id="PumpWoodRestService.determine_version" class="function">determine_version</dd>
                <dd id="PumpWoodRestService.initial" class="function">initial</dd>
                <dd id="PumpWoodRestService.finalize_response" class="function">finalize_response</dd>
                <dd id="PumpWoodRestService.handle_exception" class="function">handle_exception</dd>
                <dd id="PumpWoodRestService.dispatch" class="function">dispatch</dd>
                <dd id="PumpWoodRestService.options" class="function">options</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="PumpWoodDataBaseRestService">
                            <input id="PumpWoodDataBaseRestService-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">PumpWoodDataBaseRestService</span><wbr>(<span class="base"><a href="#PumpWoodRestService">PumpWoodRestService</a></span>):

                <label class="view-source-button" for="PumpWoodDataBaseRestService-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodDataBaseRestService"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodDataBaseRestService-1448"><a href="#PumpWoodDataBaseRestService-1448"><span class="linenos">1448</span></a><span class="k">class</span> <span class="nc">PumpWoodDataBaseRestService</span><span class="p">(</span><span class="n">PumpWoodRestService</span><span class="p">):</span>
</span><span id="PumpWoodDataBaseRestService-1449"><a href="#PumpWoodDataBaseRestService-1449"><span class="linenos">1449</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1450"><a href="#PumpWoodDataBaseRestService-1450"><span class="linenos">1450</span></a><span class="sd">    This view extends PumpWoodRestService, including pivot function.</span>
</span><span id="PumpWoodDataBaseRestService-1451"><a href="#PumpWoodDataBaseRestService-1451"><span class="linenos">1451</span></a>
</span><span id="PumpWoodDataBaseRestService-1452"><a href="#PumpWoodDataBaseRestService-1452"><span class="linenos">1452</span></a><span class="sd">    This view will make data end-points avaiable at frontend for retriving</span>
</span><span id="PumpWoodDataBaseRestService-1453"><a href="#PumpWoodDataBaseRestService-1453"><span class="linenos">1453</span></a><span class="sd">    data without the use of serializers using pivot end-point and bulk</span>
</span><span id="PumpWoodDataBaseRestService-1454"><a href="#PumpWoodDataBaseRestService-1454"><span class="linenos">1454</span></a><span class="sd">    save of data using bulk-save end-point.</span>
</span><span id="PumpWoodDataBaseRestService-1455"><a href="#PumpWoodDataBaseRestService-1455"><span class="linenos">1455</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1456"><a href="#PumpWoodDataBaseRestService-1456"><span class="linenos">1456</span></a>
</span><span id="PumpWoodDataBaseRestService-1457"><a href="#PumpWoodDataBaseRestService-1457"><span class="linenos">1457</span></a>    <span class="n">_view_type</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1458"><a href="#PumpWoodDataBaseRestService-1458"><span class="linenos">1458</span></a>
</span><span id="PumpWoodDataBaseRestService-1459"><a href="#PumpWoodDataBaseRestService-1459"><span class="linenos">1459</span></a>    <span class="n">model_variables</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodDataBaseRestService-1460"><a href="#PumpWoodDataBaseRestService-1460"><span class="linenos">1460</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Specify which model variables will be returned in pivot. Line index are</span>
</span><span id="PumpWoodDataBaseRestService-1461"><a href="#PumpWoodDataBaseRestService-1461"><span class="linenos">1461</span></a><span class="sd">       the model_variables - columns (function pivot parameter) itens.&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1462"><a href="#PumpWoodDataBaseRestService-1462"><span class="linenos">1462</span></a>    <span class="n">expected_cols_bulk_save</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodDataBaseRestService-1463"><a href="#PumpWoodDataBaseRestService-1463"><span class="linenos">1463</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the collumns needed at bulk_save.&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1464"><a href="#PumpWoodDataBaseRestService-1464"><span class="linenos">1464</span></a>
</span><span id="PumpWoodDataBaseRestService-1465"><a href="#PumpWoodDataBaseRestService-1465"><span class="linenos">1465</span></a>    <span class="k">def</span> <span class="nf">pivot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodDataBaseRestService-1466"><a href="#PumpWoodDataBaseRestService-1466"><span class="linenos">1466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1467"><a href="#PumpWoodDataBaseRestService-1467"><span class="linenos">1467</span></a><span class="sd">        Pivot QuerySet data acording to columns selected, and filters passed.</span>
</span><span id="PumpWoodDataBaseRestService-1468"><a href="#PumpWoodDataBaseRestService-1468"><span class="linenos">1468</span></a>
</span><span id="PumpWoodDataBaseRestService-1469"><a href="#PumpWoodDataBaseRestService-1469"><span class="linenos">1469</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodDataBaseRestService-1470"><a href="#PumpWoodDataBaseRestService-1470"><span class="linenos">1470</span></a><span class="sd">        `filter_dict`, `exclude_dict` and `order_by` parameters have same</span>
</span><span id="PumpWoodDataBaseRestService-1471"><a href="#PumpWoodDataBaseRestService-1471"><span class="linenos">1471</span></a><span class="sd">        behaviour as list end-point.</span>
</span><span id="PumpWoodDataBaseRestService-1472"><a href="#PumpWoodDataBaseRestService-1472"><span class="linenos">1472</span></a>
</span><span id="PumpWoodDataBaseRestService-1473"><a href="#PumpWoodDataBaseRestService-1473"><span class="linenos">1473</span></a><span class="sd">        - **columns [List[str]]:**</span>
</span><span id="PumpWoodDataBaseRestService-1474"><a href="#PumpWoodDataBaseRestService-1474"><span class="linenos">1474</span></a><span class="sd">            List of variables that will be considered as collumns to pivot</span>
</span><span id="PumpWoodDataBaseRestService-1475"><a href="#PumpWoodDataBaseRestService-1475"><span class="linenos">1475</span></a><span class="sd">            data.</span>
</span><span id="PumpWoodDataBaseRestService-1476"><a href="#PumpWoodDataBaseRestService-1476"><span class="linenos">1476</span></a><span class="sd">        - **format [{dict, list, series, split, tight, records,</span>
</span><span id="PumpWoodDataBaseRestService-1477"><a href="#PumpWoodDataBaseRestService-1477"><span class="linenos">1477</span></a><span class="sd">            index}]:** Format paramter to convert pandas DataFrame to</span>
</span><span id="PumpWoodDataBaseRestService-1478"><a href="#PumpWoodDataBaseRestService-1478"><span class="linenos">1478</span></a><span class="sd">            dictonary. This dictonary will be returned by the function.</span>
</span><span id="PumpWoodDataBaseRestService-1479"><a href="#PumpWoodDataBaseRestService-1479"><span class="linenos">1479</span></a><span class="sd">        - **variables [List[str]]:** Variables to be returned, this will</span>
</span><span id="PumpWoodDataBaseRestService-1480"><a href="#PumpWoodDataBaseRestService-1480"><span class="linenos">1480</span></a><span class="sd">            modify default behaviour of returning `model_variables` attribute</span>
</span><span id="PumpWoodDataBaseRestService-1481"><a href="#PumpWoodDataBaseRestService-1481"><span class="linenos">1481</span></a><span class="sd">            fields.</span>
</span><span id="PumpWoodDataBaseRestService-1482"><a href="#PumpWoodDataBaseRestService-1482"><span class="linenos">1482</span></a><span class="sd">        - **show_deleted [bool]:** If model has deleted field, results</span>
</span><span id="PumpWoodDataBaseRestService-1483"><a href="#PumpWoodDataBaseRestService-1483"><span class="linenos">1483</span></a><span class="sd">            flaged as deleted won&#39;t be fetched. Setting show_deleted = True</span>
</span><span id="PumpWoodDataBaseRestService-1484"><a href="#PumpWoodDataBaseRestService-1484"><span class="linenos">1484</span></a><span class="sd">            will return this filtered results.</span>
</span><span id="PumpWoodDataBaseRestService-1485"><a href="#PumpWoodDataBaseRestService-1485"><span class="linenos">1485</span></a><span class="sd">        - **add_pk_column [bool]:** If True, pk columns will be added to</span>
</span><span id="PumpWoodDataBaseRestService-1486"><a href="#PumpWoodDataBaseRestService-1486"><span class="linenos">1486</span></a><span class="sd">            results. Using pk columns will not permit to pivot information</span>
</span><span id="PumpWoodDataBaseRestService-1487"><a href="#PumpWoodDataBaseRestService-1487"><span class="linenos">1487</span></a><span class="sd">            (makes no sense). So far only `id` column will be added to results</span>
</span><span id="PumpWoodDataBaseRestService-1488"><a href="#PumpWoodDataBaseRestService-1488"><span class="linenos">1488</span></a><span class="sd">            treating composite pks is on the roadmap.</span>
</span><span id="PumpWoodDataBaseRestService-1489"><a href="#PumpWoodDataBaseRestService-1489"><span class="linenos">1489</span></a><span class="sd">        - **limit [int]:** Limit of the query results (number of objects that</span>
</span><span id="PumpWoodDataBaseRestService-1490"><a href="#PumpWoodDataBaseRestService-1490"><span class="linenos">1490</span></a><span class="sd">            will be returned).</span>
</span><span id="PumpWoodDataBaseRestService-1491"><a href="#PumpWoodDataBaseRestService-1491"><span class="linenos">1491</span></a>
</span><span id="PumpWoodDataBaseRestService-1492"><a href="#PumpWoodDataBaseRestService-1492"><span class="linenos">1492</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodDataBaseRestService-1493"><a href="#PumpWoodDataBaseRestService-1493"><span class="linenos">1493</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodDataBaseRestService-1494"><a href="#PumpWoodDataBaseRestService-1494"><span class="linenos">1494</span></a>
</span><span id="PumpWoodDataBaseRestService-1495"><a href="#PumpWoodDataBaseRestService-1495"><span class="linenos">1495</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodDataBaseRestService-1496"><a href="#PumpWoodDataBaseRestService-1496"><span class="linenos">1496</span></a><span class="sd">            Return a pandas DataFrame serialized according to format</span>
</span><span id="PumpWoodDataBaseRestService-1497"><a href="#PumpWoodDataBaseRestService-1497"><span class="linenos">1497</span></a><span class="sd">            parameter.</span>
</span><span id="PumpWoodDataBaseRestService-1498"><a href="#PumpWoodDataBaseRestService-1498"><span class="linenos">1498</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodDataBaseRestService-1499"><a href="#PumpWoodDataBaseRestService-1499"><span class="linenos">1499</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodDataBaseRestService-1500"><a href="#PumpWoodDataBaseRestService-1500"><span class="linenos">1500</span></a><span class="sd">                &#39;Pivot is not avaiable, set model_variables at view&#39;. Indicates</span>
</span><span id="PumpWoodDataBaseRestService-1501"><a href="#PumpWoodDataBaseRestService-1501"><span class="linenos">1501</span></a><span class="sd">                that this end-point is not avaiable. To habilitate it, it is</span>
</span><span id="PumpWoodDataBaseRestService-1502"><a href="#PumpWoodDataBaseRestService-1502"><span class="linenos">1502</span></a><span class="sd">                necessary to set `model_variables` attribute at view.</span>
</span><span id="PumpWoodDataBaseRestService-1503"><a href="#PumpWoodDataBaseRestService-1503"><span class="linenos">1503</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService-1504"><a href="#PumpWoodDataBaseRestService-1504"><span class="linenos">1504</span></a><span class="sd">                &#39;Columns must be a list of elements.&#39;. Indicates that columns</span>
</span><span id="PumpWoodDataBaseRestService-1505"><a href="#PumpWoodDataBaseRestService-1505"><span class="linenos">1505</span></a><span class="sd">                type is not a list of strings.</span>
</span><span id="PumpWoodDataBaseRestService-1506"><a href="#PumpWoodDataBaseRestService-1506"><span class="linenos">1506</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService-1507"><a href="#PumpWoodDataBaseRestService-1507"><span class="linenos">1507</span></a><span class="sd">                &#39;Column chosen as pivot is not at model variables&#39;. Indicates</span>
</span><span id="PumpWoodDataBaseRestService-1508"><a href="#PumpWoodDataBaseRestService-1508"><span class="linenos">1508</span></a><span class="sd">                that column is not present on `model_variables` attribute.</span>
</span><span id="PumpWoodDataBaseRestService-1509"><a href="#PumpWoodDataBaseRestService-1509"><span class="linenos">1509</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService-1510"><a href="#PumpWoodDataBaseRestService-1510"><span class="linenos">1510</span></a><span class="sd">                Propagate errors raised when executing the query.</span>
</span><span id="PumpWoodDataBaseRestService-1511"><a href="#PumpWoodDataBaseRestService-1511"><span class="linenos">1511</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService-1512"><a href="#PumpWoodDataBaseRestService-1512"><span class="linenos">1512</span></a><span class="sd">                &#39;value column not at melted data, it is not possible</span>
</span><span id="PumpWoodDataBaseRestService-1513"><a href="#PumpWoodDataBaseRestService-1513"><span class="linenos">1513</span></a><span class="sd">                 to pivot dataframe.&#39;. Indicates that value column is not</span>
</span><span id="PumpWoodDataBaseRestService-1514"><a href="#PumpWoodDataBaseRestService-1514"><span class="linenos">1514</span></a><span class="sd">                 avaiable query results, so it not possible to pivot data.</span>
</span><span id="PumpWoodDataBaseRestService-1515"><a href="#PumpWoodDataBaseRestService-1515"><span class="linenos">1515</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1516"><a href="#PumpWoodDataBaseRestService-1516"><span class="linenos">1516</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1517"><a href="#PumpWoodDataBaseRestService-1517"><span class="linenos">1517</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Pivot is not avaiable, set model_variables at view&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1518"><a href="#PumpWoodDataBaseRestService-1518"><span class="linenos">1518</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1519"><a href="#PumpWoodDataBaseRestService-1519"><span class="linenos">1519</span></a>
</span><span id="PumpWoodDataBaseRestService-1520"><a href="#PumpWoodDataBaseRestService-1520"><span class="linenos">1520</span></a>        <span class="n">columns</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="PumpWoodDataBaseRestService-1521"><a href="#PumpWoodDataBaseRestService-1521"><span class="linenos">1521</span></a>        <span class="nb">format</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1522"><a href="#PumpWoodDataBaseRestService-1522"><span class="linenos">1522</span></a>        <span class="n">model_variables</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1523"><a href="#PumpWoodDataBaseRestService-1523"><span class="linenos">1523</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variables&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1524"><a href="#PumpWoodDataBaseRestService-1524"><span class="linenos">1524</span></a>        <span class="n">show_deleted</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show_deleted&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1525"><a href="#PumpWoodDataBaseRestService-1525"><span class="linenos">1525</span></a>        <span class="n">add_pk_column</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;add_pk_column&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1526"><a href="#PumpWoodDataBaseRestService-1526"><span class="linenos">1526</span></a>        <span class="n">limit</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1527"><a href="#PumpWoodDataBaseRestService-1527"><span class="linenos">1527</span></a>
</span><span id="PumpWoodDataBaseRestService-1528"><a href="#PumpWoodDataBaseRestService-1528"><span class="linenos">1528</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1529"><a href="#PumpWoodDataBaseRestService-1529"><span class="linenos">1529</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1530"><a href="#PumpWoodDataBaseRestService-1530"><span class="linenos">1530</span></a>                <span class="s1">&#39;Columns must be a list of elements.&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1531"><a href="#PumpWoodDataBaseRestService-1531"><span class="linenos">1531</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1532"><a href="#PumpWoodDataBaseRestService-1532"><span class="linenos">1532</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1533"><a href="#PumpWoodDataBaseRestService-1533"><span class="linenos">1533</span></a>                <span class="s1">&#39;Column chosen as pivot is not at model variables&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1534"><a href="#PumpWoodDataBaseRestService-1534"><span class="linenos">1534</span></a>
</span><span id="PumpWoodDataBaseRestService-1535"><a href="#PumpWoodDataBaseRestService-1535"><span class="linenos">1535</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService-1536"><a href="#PumpWoodDataBaseRestService-1536"><span class="linenos">1536</span></a>        <span class="n">filter_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filter_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService-1537"><a href="#PumpWoodDataBaseRestService-1537"><span class="linenos">1537</span></a>        <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exclude_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService-1538"><a href="#PumpWoodDataBaseRestService-1538"><span class="linenos">1538</span></a>        <span class="n">order_by</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;order_by&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService-1539"><a href="#PumpWoodDataBaseRestService-1539"><span class="linenos">1539</span></a>
</span><span id="PumpWoodDataBaseRestService-1540"><a href="#PumpWoodDataBaseRestService-1540"><span class="linenos">1540</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodDataBaseRestService-1541"><a href="#PumpWoodDataBaseRestService-1541"><span class="linenos">1541</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">show_deleted</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1542"><a href="#PumpWoodDataBaseRestService-1542"><span class="linenos">1542</span></a>                <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodDataBaseRestService-1543"><a href="#PumpWoodDataBaseRestService-1543"><span class="linenos">1543</span></a>
</span><span id="PumpWoodDataBaseRestService-1544"><a href="#PumpWoodDataBaseRestService-1544"><span class="linenos">1544</span></a>        <span class="c1">#############################</span>
</span><span id="PumpWoodDataBaseRestService-1545"><a href="#PumpWoodDataBaseRestService-1545"><span class="linenos">1545</span></a>        <span class="c1"># Add id columns to results #</span>
</span><span id="PumpWoodDataBaseRestService-1546"><a href="#PumpWoodDataBaseRestService-1546"><span class="linenos">1546</span></a>        <span class="c1"># TODO: Add other fields if set as composite primary key.</span>
</span><span id="PumpWoodDataBaseRestService-1547"><a href="#PumpWoodDataBaseRestService-1547"><span class="linenos">1547</span></a>        <span class="k">if</span> <span class="n">add_pk_column</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1548"><a href="#PumpWoodDataBaseRestService-1548"><span class="linenos">1548</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1549"><a href="#PumpWoodDataBaseRestService-1549"><span class="linenos">1549</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1550"><a href="#PumpWoodDataBaseRestService-1550"><span class="linenos">1550</span></a>                    <span class="s2">&quot;Can not add pk column and pivot information&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1551"><a href="#PumpWoodDataBaseRestService-1551"><span class="linenos">1551</span></a>            <span class="n">model_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">model_variables</span>
</span><span id="PumpWoodDataBaseRestService-1552"><a href="#PumpWoodDataBaseRestService-1552"><span class="linenos">1552</span></a>
</span><span id="PumpWoodDataBaseRestService-1553"><a href="#PumpWoodDataBaseRestService-1553"><span class="linenos">1553</span></a>        <span class="c1"># Limit pivot results if limit parameter is set</span>
</span><span id="PumpWoodDataBaseRestService-1554"><a href="#PumpWoodDataBaseRestService-1554"><span class="linenos">1554</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span id="PumpWoodDataBaseRestService-1555"><a href="#PumpWoodDataBaseRestService-1555"><span class="linenos">1555</span></a>        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1556"><a href="#PumpWoodDataBaseRestService-1556"><span class="linenos">1556</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">query_set</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)]</span>
</span><span id="PumpWoodDataBaseRestService-1557"><a href="#PumpWoodDataBaseRestService-1557"><span class="linenos">1557</span></a>
</span><span id="PumpWoodDataBaseRestService-1558"><a href="#PumpWoodDataBaseRestService-1558"><span class="linenos">1558</span></a>        <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodDataBaseRestService-1559"><a href="#PumpWoodDataBaseRestService-1559"><span class="linenos">1559</span></a>            <span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="n">query_set</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService-1560"><a href="#PumpWoodDataBaseRestService-1560"><span class="linenos">1560</span></a>            <span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span> <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService-1561"><a href="#PumpWoodDataBaseRestService-1561"><span class="linenos">1561</span></a>            <span class="s1">&#39;order_by&#39;</span><span class="p">:</span> <span class="n">order_by</span><span class="p">}</span>
</span><span id="PumpWoodDataBaseRestService-1562"><a href="#PumpWoodDataBaseRestService-1562"><span class="linenos">1562</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1563"><a href="#PumpWoodDataBaseRestService-1563"><span class="linenos">1563</span></a>
</span><span id="PumpWoodDataBaseRestService-1564"><a href="#PumpWoodDataBaseRestService-1564"><span class="linenos">1564</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1565"><a href="#PumpWoodDataBaseRestService-1565"><span class="linenos">1565</span></a>            <span class="n">filtered_objects_as_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1566"><a href="#PumpWoodDataBaseRestService-1566"><span class="linenos">1566</span></a>                <span class="n">query_set</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)))</span>
</span><span id="PumpWoodDataBaseRestService-1567"><a href="#PumpWoodDataBaseRestService-1567"><span class="linenos">1567</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1568"><a href="#PumpWoodDataBaseRestService-1568"><span class="linenos">1568</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService-1569"><a href="#PumpWoodDataBaseRestService-1569"><span class="linenos">1569</span></a>
</span><span id="PumpWoodDataBaseRestService-1570"><a href="#PumpWoodDataBaseRestService-1570"><span class="linenos">1570</span></a>        <span class="n">melted_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1571"><a href="#PumpWoodDataBaseRestService-1571"><span class="linenos">1571</span></a>            <span class="n">filtered_objects_as_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1572"><a href="#PumpWoodDataBaseRestService-1572"><span class="linenos">1572</span></a>
</span><span id="PumpWoodDataBaseRestService-1573"><a href="#PumpWoodDataBaseRestService-1573"><span class="linenos">1573</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1574"><a href="#PumpWoodDataBaseRestService-1574"><span class="linenos">1574</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">melted_data</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService-1575"><a href="#PumpWoodDataBaseRestService-1575"><span class="linenos">1575</span></a>
</span><span id="PumpWoodDataBaseRestService-1576"><a href="#PumpWoodDataBaseRestService-1576"><span class="linenos">1576</span></a>        <span class="k">if</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1577"><a href="#PumpWoodDataBaseRestService-1577"><span class="linenos">1577</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({})</span>
</span><span id="PumpWoodDataBaseRestService-1578"><a href="#PumpWoodDataBaseRestService-1578"><span class="linenos">1578</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1579"><a href="#PumpWoodDataBaseRestService-1579"><span class="linenos">1579</span></a>            <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1580"><a href="#PumpWoodDataBaseRestService-1580"><span class="linenos">1580</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1581"><a href="#PumpWoodDataBaseRestService-1581"><span class="linenos">1581</span></a>                    <span class="s2">&quot;&#39;value&#39; column not at melted data, it is not possible&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1582"><a href="#PumpWoodDataBaseRestService-1582"><span class="linenos">1582</span></a>                    <span class="s2">&quot; to pivot dataframe.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1583"><a href="#PumpWoodDataBaseRestService-1583"><span class="linenos">1583</span></a>
</span><span id="PumpWoodDataBaseRestService-1584"><a href="#PumpWoodDataBaseRestService-1584"><span class="linenos">1584</span></a>            <span class="n">pivoted_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1585"><a href="#PumpWoodDataBaseRestService-1585"><span class="linenos">1585</span></a>                <span class="n">melted_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService-1586"><a href="#PumpWoodDataBaseRestService-1586"><span class="linenos">1586</span></a>                <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="PumpWoodDataBaseRestService-1587"><a href="#PumpWoodDataBaseRestService-1587"><span class="linenos">1587</span></a>
</span><span id="PumpWoodDataBaseRestService-1588"><a href="#PumpWoodDataBaseRestService-1588"><span class="linenos">1588</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1589"><a href="#PumpWoodDataBaseRestService-1589"><span class="linenos">1589</span></a>                <span class="n">pivoted_table</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService-1590"><a href="#PumpWoodDataBaseRestService-1590"><span class="linenos">1590</span></a>
</span><span id="PumpWoodDataBaseRestService-1591"><a href="#PumpWoodDataBaseRestService-1591"><span class="linenos">1591</span></a>    <span class="k">def</span> <span class="nf">bulk_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1592"><a href="#PumpWoodDataBaseRestService-1592"><span class="linenos">1592</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1593"><a href="#PumpWoodDataBaseRestService-1593"><span class="linenos">1593</span></a><span class="sd">        Bulk save data.</span>
</span><span id="PumpWoodDataBaseRestService-1594"><a href="#PumpWoodDataBaseRestService-1594"><span class="linenos">1594</span></a>
</span><span id="PumpWoodDataBaseRestService-1595"><a href="#PumpWoodDataBaseRestService-1595"><span class="linenos">1595</span></a><span class="sd">        This end-point is prefereble for large datainputs on Pumpwood, it is</span>
</span><span id="PumpWoodDataBaseRestService-1596"><a href="#PumpWoodDataBaseRestService-1596"><span class="linenos">1596</span></a><span class="sd">        not possible to update entries, just add new ones.</span>
</span><span id="PumpWoodDataBaseRestService-1597"><a href="#PumpWoodDataBaseRestService-1597"><span class="linenos">1597</span></a>
</span><span id="PumpWoodDataBaseRestService-1598"><a href="#PumpWoodDataBaseRestService-1598"><span class="linenos">1598</span></a><span class="sd">        It is much more performant than adding one by one using save</span>
</span><span id="PumpWoodDataBaseRestService-1599"><a href="#PumpWoodDataBaseRestService-1599"><span class="linenos">1599</span></a><span class="sd">        end-point.</span>
</span><span id="PumpWoodDataBaseRestService-1600"><a href="#PumpWoodDataBaseRestService-1600"><span class="linenos">1600</span></a>
</span><span id="PumpWoodDataBaseRestService-1601"><a href="#PumpWoodDataBaseRestService-1601"><span class="linenos">1601</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodDataBaseRestService-1602"><a href="#PumpWoodDataBaseRestService-1602"><span class="linenos">1602</span></a><span class="sd">        List of dictionaries which must have self.expected_cols_bulk_save.</span>
</span><span id="PumpWoodDataBaseRestService-1603"><a href="#PumpWoodDataBaseRestService-1603"><span class="linenos">1603</span></a>
</span><span id="PumpWoodDataBaseRestService-1604"><a href="#PumpWoodDataBaseRestService-1604"><span class="linenos">1604</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodDataBaseRestService-1605"><a href="#PumpWoodDataBaseRestService-1605"><span class="linenos">1605</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodDataBaseRestService-1606"><a href="#PumpWoodDataBaseRestService-1606"><span class="linenos">1606</span></a>
</span><span id="PumpWoodDataBaseRestService-1607"><a href="#PumpWoodDataBaseRestService-1607"><span class="linenos">1607</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodDataBaseRestService-1608"><a href="#PumpWoodDataBaseRestService-1608"><span class="linenos">1608</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodDataBaseRestService-1609"><a href="#PumpWoodDataBaseRestService-1609"><span class="linenos">1609</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodDataBaseRestService-1610"><a href="#PumpWoodDataBaseRestService-1610"><span class="linenos">1610</span></a><span class="sd">            A dictonary with key `saved_count` indicating the number of</span>
</span><span id="PumpWoodDataBaseRestService-1611"><a href="#PumpWoodDataBaseRestService-1611"><span class="linenos">1611</span></a><span class="sd">            objects that were add to database.</span>
</span><span id="PumpWoodDataBaseRestService-1612"><a href="#PumpWoodDataBaseRestService-1612"><span class="linenos">1612</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodDataBaseRestService-1613"><a href="#PumpWoodDataBaseRestService-1613"><span class="linenos">1613</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodDataBaseRestService-1614"><a href="#PumpWoodDataBaseRestService-1614"><span class="linenos">1614</span></a><span class="sd">                &#39;Bulk save not avaiable. Set expected_cols_bulk_save on</span>
</span><span id="PumpWoodDataBaseRestService-1615"><a href="#PumpWoodDataBaseRestService-1615"><span class="linenos">1615</span></a><span class="sd">                PumpWoodDataBaseRestService View to habilitate funciton.&#39;</span>
</span><span id="PumpWoodDataBaseRestService-1616"><a href="#PumpWoodDataBaseRestService-1616"><span class="linenos">1616</span></a><span class="sd">                Indicates that bulk_save end-point was not configured</span>
</span><span id="PumpWoodDataBaseRestService-1617"><a href="#PumpWoodDataBaseRestService-1617"><span class="linenos">1617</span></a><span class="sd">                for this model class. It is necessary to set</span>
</span><span id="PumpWoodDataBaseRestService-1618"><a href="#PumpWoodDataBaseRestService-1618"><span class="linenos">1618</span></a><span class="sd">                `expected_cols_bulk_save` attribute to make end-point</span>
</span><span id="PumpWoodDataBaseRestService-1619"><a href="#PumpWoodDataBaseRestService-1619"><span class="linenos">1619</span></a><span class="sd">                avaiable.</span>
</span><span id="PumpWoodDataBaseRestService-1620"><a href="#PumpWoodDataBaseRestService-1620"><span class="linenos">1620</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodDataBaseRestService-1621"><a href="#PumpWoodDataBaseRestService-1621"><span class="linenos">1621</span></a><span class="sd">                &#39;Post payload is a list of objects.&#39;. Indicates that the</span>
</span><span id="PumpWoodDataBaseRestService-1622"><a href="#PumpWoodDataBaseRestService-1622"><span class="linenos">1622</span></a><span class="sd">                request payload is not a list as expected.</span>
</span><span id="PumpWoodDataBaseRestService-1623"><a href="#PumpWoodDataBaseRestService-1623"><span class="linenos">1623</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodDataBaseRestService-1624"><a href="#PumpWoodDataBaseRestService-1624"><span class="linenos">1624</span></a><span class="sd">                &#39;Expected columns and data columns do not match:</span>
</span><span id="PumpWoodDataBaseRestService-1625"><a href="#PumpWoodDataBaseRestService-1625"><span class="linenos">1625</span></a><span class="sd">                \nExpected columns:{expected}</span>
</span><span id="PumpWoodDataBaseRestService-1626"><a href="#PumpWoodDataBaseRestService-1626"><span class="linenos">1626</span></a><span class="sd">                \nData columns:{data_cols}&#39;. Indicates that the fields passed</span>
</span><span id="PumpWoodDataBaseRestService-1627"><a href="#PumpWoodDataBaseRestService-1627"><span class="linenos">1627</span></a><span class="sd">                on the objects are diferent from the expected by the end-point</span>
</span><span id="PumpWoodDataBaseRestService-1628"><a href="#PumpWoodDataBaseRestService-1628"><span class="linenos">1628</span></a><span class="sd">                check the data or the configuration of the end-point.</span>
</span><span id="PumpWoodDataBaseRestService-1629"><a href="#PumpWoodDataBaseRestService-1629"><span class="linenos">1629</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService-1630"><a href="#PumpWoodDataBaseRestService-1630"><span class="linenos">1630</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1631"><a href="#PumpWoodDataBaseRestService-1631"><span class="linenos">1631</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1632"><a href="#PumpWoodDataBaseRestService-1632"><span class="linenos">1632</span></a>                <span class="s2">&quot;Bulk save not avaiable. Set expected_cols_bulk_save on &quot;</span>
</span><span id="PumpWoodDataBaseRestService-1633"><a href="#PumpWoodDataBaseRestService-1633"><span class="linenos">1633</span></a>                <span class="s2">&quot;PumpWoodDataBaseRestService View to habilitate funciton.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1634"><a href="#PumpWoodDataBaseRestService-1634"><span class="linenos">1634</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1635"><a href="#PumpWoodDataBaseRestService-1635"><span class="linenos">1635</span></a>
</span><span id="PumpWoodDataBaseRestService-1636"><a href="#PumpWoodDataBaseRestService-1636"><span class="linenos">1636</span></a>        <span class="n">data_to_save</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodDataBaseRestService-1637"><a href="#PumpWoodDataBaseRestService-1637"><span class="linenos">1637</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1638"><a href="#PumpWoodDataBaseRestService-1638"><span class="linenos">1638</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1639"><a href="#PumpWoodDataBaseRestService-1639"><span class="linenos">1639</span></a>                <span class="s1">&#39;Post payload is a list of objects.&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1640"><a href="#PumpWoodDataBaseRestService-1640"><span class="linenos">1640</span></a>
</span><span id="PumpWoodDataBaseRestService-1641"><a href="#PumpWoodDataBaseRestService-1641"><span class="linenos">1641</span></a>        <span class="n">pd_data_to_save</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1642"><a href="#PumpWoodDataBaseRestService-1642"><span class="linenos">1642</span></a>        <span class="n">pd_data_cols</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pd_data_to_save</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService-1643"><a href="#PumpWoodDataBaseRestService-1643"><span class="linenos">1643</span></a>
</span><span id="PumpWoodDataBaseRestService-1644"><a href="#PumpWoodDataBaseRestService-1644"><span class="linenos">1644</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">-</span> <span class="n">pd_data_cols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1645"><a href="#PumpWoodDataBaseRestService-1645"><span class="linenos">1645</span></a>            <span class="n">objects_to_load</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodDataBaseRestService-1646"><a href="#PumpWoodDataBaseRestService-1646"><span class="linenos">1646</span></a>            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data_to_save</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1647"><a href="#PumpWoodDataBaseRestService-1647"><span class="linenos">1647</span></a>                <span class="n">new_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1648"><a href="#PumpWoodDataBaseRestService-1648"><span class="linenos">1648</span></a>                <span class="n">objects_to_load</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_obj</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1649"><a href="#PumpWoodDataBaseRestService-1649"><span class="linenos">1649</span></a>
</span><span id="PumpWoodDataBaseRestService-1650"><a href="#PumpWoodDataBaseRestService-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1651"><a href="#PumpWoodDataBaseRestService-1651"><span class="linenos">1651</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;saved_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)})</span>
</span><span id="PumpWoodDataBaseRestService-1652"><a href="#PumpWoodDataBaseRestService-1652"><span class="linenos">1652</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService-1653"><a href="#PumpWoodDataBaseRestService-1653"><span class="linenos">1653</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1654"><a href="#PumpWoodDataBaseRestService-1654"><span class="linenos">1654</span></a>                <span class="s1">&#39;Expected columns and data columns do not match:&#39;</span> <span class="o">+</span>
</span><span id="PumpWoodDataBaseRestService-1655"><a href="#PumpWoodDataBaseRestService-1655"><span class="linenos">1655</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Expected columns:</span><span class="si">{expected}</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="PumpWoodDataBaseRestService-1656"><a href="#PumpWoodDataBaseRestService-1656"><span class="linenos">1656</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Data columns:</span><span class="si">{data_cols}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService-1657"><a href="#PumpWoodDataBaseRestService-1657"><span class="linenos">1657</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService-1658"><a href="#PumpWoodDataBaseRestService-1658"><span class="linenos">1658</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService-1659"><a href="#PumpWoodDataBaseRestService-1659"><span class="linenos">1659</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodDataBaseRestService-1660"><a href="#PumpWoodDataBaseRestService-1660"><span class="linenos">1660</span></a>                        <span class="s2">&quot;expected&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">),</span>
</span><span id="PumpWoodDataBaseRestService-1661"><a href="#PumpWoodDataBaseRestService-1661"><span class="linenos">1661</span></a>                        <span class="s2">&quot;data_cols&quot;</span><span class="p">:</span> <span class="n">pd_data_cols</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>This view extends PumpWoodRestService, including pivot function.</p>

<p>This view will make data end-points avaiable at frontend for retriving
data without the use of serializers using pivot end-point and bulk
save of data using bulk-save end-point.</p>
</div>


                            <div id="PumpWoodDataBaseRestService.model_variables" class="classattr">
                                <div class="attr variable">
            <span class="name">model_variables</span>        =
<span class="default_value">[]</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodDataBaseRestService.model_variables"></a>
    
            <div class="docstring"><p>Specify which model variables will be returned in pivot. Line index are
the model_variables - columns (function pivot parameter) itens.</p>
</div>


                            </div>
                            <div id="PumpWoodDataBaseRestService.expected_cols_bulk_save" class="classattr">
                                <div class="attr variable">
            <span class="name">expected_cols_bulk_save</span>        =
<span class="default_value">[]</span>

        
    </div>
    <a class="headerlink" href="#PumpWoodDataBaseRestService.expected_cols_bulk_save"></a>
    
            <div class="docstring"><p>Set the collumns needed at bulk_save.</p>
</div>


                            </div>
                            <div id="PumpWoodDataBaseRestService.pivot" class="classattr">
                                        <input id="PumpWoodDataBaseRestService.pivot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pivot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="PumpWoodDataBaseRestService.pivot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodDataBaseRestService.pivot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodDataBaseRestService.pivot-1465"><a href="#PumpWoodDataBaseRestService.pivot-1465"><span class="linenos">1465</span></a>    <span class="k">def</span> <span class="nf">pivot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1466"><a href="#PumpWoodDataBaseRestService.pivot-1466"><span class="linenos">1466</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1467"><a href="#PumpWoodDataBaseRestService.pivot-1467"><span class="linenos">1467</span></a><span class="sd">        Pivot QuerySet data acording to columns selected, and filters passed.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1468"><a href="#PumpWoodDataBaseRestService.pivot-1468"><span class="linenos">1468</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1469"><a href="#PumpWoodDataBaseRestService.pivot-1469"><span class="linenos">1469</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1470"><a href="#PumpWoodDataBaseRestService.pivot-1470"><span class="linenos">1470</span></a><span class="sd">        `filter_dict`, `exclude_dict` and `order_by` parameters have same</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1471"><a href="#PumpWoodDataBaseRestService.pivot-1471"><span class="linenos">1471</span></a><span class="sd">        behaviour as list end-point.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1472"><a href="#PumpWoodDataBaseRestService.pivot-1472"><span class="linenos">1472</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1473"><a href="#PumpWoodDataBaseRestService.pivot-1473"><span class="linenos">1473</span></a><span class="sd">        - **columns [List[str]]:**</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1474"><a href="#PumpWoodDataBaseRestService.pivot-1474"><span class="linenos">1474</span></a><span class="sd">            List of variables that will be considered as collumns to pivot</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1475"><a href="#PumpWoodDataBaseRestService.pivot-1475"><span class="linenos">1475</span></a><span class="sd">            data.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1476"><a href="#PumpWoodDataBaseRestService.pivot-1476"><span class="linenos">1476</span></a><span class="sd">        - **format [{dict, list, series, split, tight, records,</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1477"><a href="#PumpWoodDataBaseRestService.pivot-1477"><span class="linenos">1477</span></a><span class="sd">            index}]:** Format paramter to convert pandas DataFrame to</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1478"><a href="#PumpWoodDataBaseRestService.pivot-1478"><span class="linenos">1478</span></a><span class="sd">            dictonary. This dictonary will be returned by the function.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1479"><a href="#PumpWoodDataBaseRestService.pivot-1479"><span class="linenos">1479</span></a><span class="sd">        - **variables [List[str]]:** Variables to be returned, this will</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1480"><a href="#PumpWoodDataBaseRestService.pivot-1480"><span class="linenos">1480</span></a><span class="sd">            modify default behaviour of returning `model_variables` attribute</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1481"><a href="#PumpWoodDataBaseRestService.pivot-1481"><span class="linenos">1481</span></a><span class="sd">            fields.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1482"><a href="#PumpWoodDataBaseRestService.pivot-1482"><span class="linenos">1482</span></a><span class="sd">        - **show_deleted [bool]:** If model has deleted field, results</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1483"><a href="#PumpWoodDataBaseRestService.pivot-1483"><span class="linenos">1483</span></a><span class="sd">            flaged as deleted won&#39;t be fetched. Setting show_deleted = True</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1484"><a href="#PumpWoodDataBaseRestService.pivot-1484"><span class="linenos">1484</span></a><span class="sd">            will return this filtered results.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1485"><a href="#PumpWoodDataBaseRestService.pivot-1485"><span class="linenos">1485</span></a><span class="sd">        - **add_pk_column [bool]:** If True, pk columns will be added to</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1486"><a href="#PumpWoodDataBaseRestService.pivot-1486"><span class="linenos">1486</span></a><span class="sd">            results. Using pk columns will not permit to pivot information</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1487"><a href="#PumpWoodDataBaseRestService.pivot-1487"><span class="linenos">1487</span></a><span class="sd">            (makes no sense). So far only `id` column will be added to results</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1488"><a href="#PumpWoodDataBaseRestService.pivot-1488"><span class="linenos">1488</span></a><span class="sd">            treating composite pks is on the roadmap.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1489"><a href="#PumpWoodDataBaseRestService.pivot-1489"><span class="linenos">1489</span></a><span class="sd">        - **limit [int]:** Limit of the query results (number of objects that</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1490"><a href="#PumpWoodDataBaseRestService.pivot-1490"><span class="linenos">1490</span></a><span class="sd">            will be returned).</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1491"><a href="#PumpWoodDataBaseRestService.pivot-1491"><span class="linenos">1491</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1492"><a href="#PumpWoodDataBaseRestService.pivot-1492"><span class="linenos">1492</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1493"><a href="#PumpWoodDataBaseRestService.pivot-1493"><span class="linenos">1493</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1494"><a href="#PumpWoodDataBaseRestService.pivot-1494"><span class="linenos">1494</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1495"><a href="#PumpWoodDataBaseRestService.pivot-1495"><span class="linenos">1495</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1496"><a href="#PumpWoodDataBaseRestService.pivot-1496"><span class="linenos">1496</span></a><span class="sd">            Return a pandas DataFrame serialized according to format</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1497"><a href="#PumpWoodDataBaseRestService.pivot-1497"><span class="linenos">1497</span></a><span class="sd">            parameter.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1498"><a href="#PumpWoodDataBaseRestService.pivot-1498"><span class="linenos">1498</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1499"><a href="#PumpWoodDataBaseRestService.pivot-1499"><span class="linenos">1499</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1500"><a href="#PumpWoodDataBaseRestService.pivot-1500"><span class="linenos">1500</span></a><span class="sd">                &#39;Pivot is not avaiable, set model_variables at view&#39;. Indicates</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1501"><a href="#PumpWoodDataBaseRestService.pivot-1501"><span class="linenos">1501</span></a><span class="sd">                that this end-point is not avaiable. To habilitate it, it is</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1502"><a href="#PumpWoodDataBaseRestService.pivot-1502"><span class="linenos">1502</span></a><span class="sd">                necessary to set `model_variables` attribute at view.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1503"><a href="#PumpWoodDataBaseRestService.pivot-1503"><span class="linenos">1503</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1504"><a href="#PumpWoodDataBaseRestService.pivot-1504"><span class="linenos">1504</span></a><span class="sd">                &#39;Columns must be a list of elements.&#39;. Indicates that columns</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1505"><a href="#PumpWoodDataBaseRestService.pivot-1505"><span class="linenos">1505</span></a><span class="sd">                type is not a list of strings.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1506"><a href="#PumpWoodDataBaseRestService.pivot-1506"><span class="linenos">1506</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1507"><a href="#PumpWoodDataBaseRestService.pivot-1507"><span class="linenos">1507</span></a><span class="sd">                &#39;Column chosen as pivot is not at model variables&#39;. Indicates</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1508"><a href="#PumpWoodDataBaseRestService.pivot-1508"><span class="linenos">1508</span></a><span class="sd">                that column is not present on `model_variables` attribute.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1509"><a href="#PumpWoodDataBaseRestService.pivot-1509"><span class="linenos">1509</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1510"><a href="#PumpWoodDataBaseRestService.pivot-1510"><span class="linenos">1510</span></a><span class="sd">                Propagate errors raised when executing the query.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1511"><a href="#PumpWoodDataBaseRestService.pivot-1511"><span class="linenos">1511</span></a><span class="sd">            PumpWoodQueryException:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1512"><a href="#PumpWoodDataBaseRestService.pivot-1512"><span class="linenos">1512</span></a><span class="sd">                &#39;value column not at melted data, it is not possible</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1513"><a href="#PumpWoodDataBaseRestService.pivot-1513"><span class="linenos">1513</span></a><span class="sd">                 to pivot dataframe.&#39;. Indicates that value column is not</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1514"><a href="#PumpWoodDataBaseRestService.pivot-1514"><span class="linenos">1514</span></a><span class="sd">                 avaiable query results, so it not possible to pivot data.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1515"><a href="#PumpWoodDataBaseRestService.pivot-1515"><span class="linenos">1515</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1516"><a href="#PumpWoodDataBaseRestService.pivot-1516"><span class="linenos">1516</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1517"><a href="#PumpWoodDataBaseRestService.pivot-1517"><span class="linenos">1517</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Pivot is not avaiable, set model_variables at view&quot;</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1518"><a href="#PumpWoodDataBaseRestService.pivot-1518"><span class="linenos">1518</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1519"><a href="#PumpWoodDataBaseRestService.pivot-1519"><span class="linenos">1519</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1520"><a href="#PumpWoodDataBaseRestService.pivot-1520"><span class="linenos">1520</span></a>        <span class="n">columns</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1521"><a href="#PumpWoodDataBaseRestService.pivot-1521"><span class="linenos">1521</span></a>        <span class="nb">format</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1522"><a href="#PumpWoodDataBaseRestService.pivot-1522"><span class="linenos">1522</span></a>        <span class="n">model_variables</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1523"><a href="#PumpWoodDataBaseRestService.pivot-1523"><span class="linenos">1523</span></a>            <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;variables&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1524"><a href="#PumpWoodDataBaseRestService.pivot-1524"><span class="linenos">1524</span></a>        <span class="n">show_deleted</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show_deleted&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1525"><a href="#PumpWoodDataBaseRestService.pivot-1525"><span class="linenos">1525</span></a>        <span class="n">add_pk_column</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;add_pk_column&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1526"><a href="#PumpWoodDataBaseRestService.pivot-1526"><span class="linenos">1526</span></a>        <span class="n">limit</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1527"><a href="#PumpWoodDataBaseRestService.pivot-1527"><span class="linenos">1527</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1528"><a href="#PumpWoodDataBaseRestService.pivot-1528"><span class="linenos">1528</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1529"><a href="#PumpWoodDataBaseRestService.pivot-1529"><span class="linenos">1529</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1530"><a href="#PumpWoodDataBaseRestService.pivot-1530"><span class="linenos">1530</span></a>                <span class="s1">&#39;Columns must be a list of elements.&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1531"><a href="#PumpWoodDataBaseRestService.pivot-1531"><span class="linenos">1531</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1532"><a href="#PumpWoodDataBaseRestService.pivot-1532"><span class="linenos">1532</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1533"><a href="#PumpWoodDataBaseRestService.pivot-1533"><span class="linenos">1533</span></a>                <span class="s1">&#39;Column chosen as pivot is not at model variables&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1534"><a href="#PumpWoodDataBaseRestService.pivot-1534"><span class="linenos">1534</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1535"><a href="#PumpWoodDataBaseRestService.pivot-1535"><span class="linenos">1535</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1536"><a href="#PumpWoodDataBaseRestService.pivot-1536"><span class="linenos">1536</span></a>        <span class="n">filter_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;filter_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1537"><a href="#PumpWoodDataBaseRestService.pivot-1537"><span class="linenos">1537</span></a>        <span class="n">exclude_dict</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exclude_dict&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1538"><a href="#PumpWoodDataBaseRestService.pivot-1538"><span class="linenos">1538</span></a>        <span class="n">order_by</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;order_by&#39;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1539"><a href="#PumpWoodDataBaseRestService.pivot-1539"><span class="linenos">1539</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1540"><a href="#PumpWoodDataBaseRestService.pivot-1540"><span class="linenos">1540</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">,</span> <span class="s1">&#39;deleted&#39;</span><span class="p">):</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1541"><a href="#PumpWoodDataBaseRestService.pivot-1541"><span class="linenos">1541</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">show_deleted</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1542"><a href="#PumpWoodDataBaseRestService.pivot-1542"><span class="linenos">1542</span></a>                <span class="n">filter_dict</span><span class="p">[</span><span class="s2">&quot;deleted&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1543"><a href="#PumpWoodDataBaseRestService.pivot-1543"><span class="linenos">1543</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1544"><a href="#PumpWoodDataBaseRestService.pivot-1544"><span class="linenos">1544</span></a>        <span class="c1">#############################</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1545"><a href="#PumpWoodDataBaseRestService.pivot-1545"><span class="linenos">1545</span></a>        <span class="c1"># Add id columns to results #</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1546"><a href="#PumpWoodDataBaseRestService.pivot-1546"><span class="linenos">1546</span></a>        <span class="c1"># TODO: Add other fields if set as composite primary key.</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1547"><a href="#PumpWoodDataBaseRestService.pivot-1547"><span class="linenos">1547</span></a>        <span class="k">if</span> <span class="n">add_pk_column</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1548"><a href="#PumpWoodDataBaseRestService.pivot-1548"><span class="linenos">1548</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1549"><a href="#PumpWoodDataBaseRestService.pivot-1549"><span class="linenos">1549</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1550"><a href="#PumpWoodDataBaseRestService.pivot-1550"><span class="linenos">1550</span></a>                    <span class="s2">&quot;Can not add pk column and pivot information&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1551"><a href="#PumpWoodDataBaseRestService.pivot-1551"><span class="linenos">1551</span></a>            <span class="n">model_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">model_variables</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1552"><a href="#PumpWoodDataBaseRestService.pivot-1552"><span class="linenos">1552</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1553"><a href="#PumpWoodDataBaseRestService.pivot-1553"><span class="linenos">1553</span></a>        <span class="c1"># Limit pivot results if limit parameter is set</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1554"><a href="#PumpWoodDataBaseRestService.pivot-1554"><span class="linenos">1554</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1555"><a href="#PumpWoodDataBaseRestService.pivot-1555"><span class="linenos">1555</span></a>        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1556"><a href="#PumpWoodDataBaseRestService.pivot-1556"><span class="linenos">1556</span></a>            <span class="n">query_set</span> <span class="o">=</span> <span class="n">query_set</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="n">limit</span><span class="p">)]</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1557"><a href="#PumpWoodDataBaseRestService.pivot-1557"><span class="linenos">1557</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1558"><a href="#PumpWoodDataBaseRestService.pivot-1558"><span class="linenos">1558</span></a>        <span class="n">arg_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1559"><a href="#PumpWoodDataBaseRestService.pivot-1559"><span class="linenos">1559</span></a>            <span class="s1">&#39;query_set&#39;</span><span class="p">:</span> <span class="n">query_set</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1560"><a href="#PumpWoodDataBaseRestService.pivot-1560"><span class="linenos">1560</span></a>            <span class="s1">&#39;filter_dict&#39;</span><span class="p">:</span> <span class="n">filter_dict</span><span class="p">,</span> <span class="s1">&#39;exclude_dict&#39;</span><span class="p">:</span> <span class="n">exclude_dict</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1561"><a href="#PumpWoodDataBaseRestService.pivot-1561"><span class="linenos">1561</span></a>            <span class="s1">&#39;order_by&#39;</span><span class="p">:</span> <span class="n">order_by</span><span class="p">}</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1562"><a href="#PumpWoodDataBaseRestService.pivot-1562"><span class="linenos">1562</span></a>        <span class="n">query_set</span> <span class="o">=</span> <span class="n">filter_by_dict</span><span class="p">(</span><span class="o">**</span><span class="n">arg_dict</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1563"><a href="#PumpWoodDataBaseRestService.pivot-1563"><span class="linenos">1563</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1564"><a href="#PumpWoodDataBaseRestService.pivot-1564"><span class="linenos">1564</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1565"><a href="#PumpWoodDataBaseRestService.pivot-1565"><span class="linenos">1565</span></a>            <span class="n">filtered_objects_as_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1566"><a href="#PumpWoodDataBaseRestService.pivot-1566"><span class="linenos">1566</span></a>                <span class="n">query_set</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">model_variables</span><span class="p">)))</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1567"><a href="#PumpWoodDataBaseRestService.pivot-1567"><span class="linenos">1567</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1568"><a href="#PumpWoodDataBaseRestService.pivot-1568"><span class="linenos">1568</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1569"><a href="#PumpWoodDataBaseRestService.pivot-1569"><span class="linenos">1569</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1570"><a href="#PumpWoodDataBaseRestService.pivot-1570"><span class="linenos">1570</span></a>        <span class="n">melted_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1571"><a href="#PumpWoodDataBaseRestService.pivot-1571"><span class="linenos">1571</span></a>            <span class="n">filtered_objects_as_list</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">model_variables</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1572"><a href="#PumpWoodDataBaseRestService.pivot-1572"><span class="linenos">1572</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1573"><a href="#PumpWoodDataBaseRestService.pivot-1573"><span class="linenos">1573</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1574"><a href="#PumpWoodDataBaseRestService.pivot-1574"><span class="linenos">1574</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">melted_data</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1575"><a href="#PumpWoodDataBaseRestService.pivot-1575"><span class="linenos">1575</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1576"><a href="#PumpWoodDataBaseRestService.pivot-1576"><span class="linenos">1576</span></a>        <span class="k">if</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1577"><a href="#PumpWoodDataBaseRestService.pivot-1577"><span class="linenos">1577</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({})</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1578"><a href="#PumpWoodDataBaseRestService.pivot-1578"><span class="linenos">1578</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1579"><a href="#PumpWoodDataBaseRestService.pivot-1579"><span class="linenos">1579</span></a>            <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">melted_data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1580"><a href="#PumpWoodDataBaseRestService.pivot-1580"><span class="linenos">1580</span></a>                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodQueryException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1581"><a href="#PumpWoodDataBaseRestService.pivot-1581"><span class="linenos">1581</span></a>                    <span class="s2">&quot;&#39;value&#39; column not at melted data, it is not possible&quot;</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1582"><a href="#PumpWoodDataBaseRestService.pivot-1582"><span class="linenos">1582</span></a>                    <span class="s2">&quot; to pivot dataframe.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1583"><a href="#PumpWoodDataBaseRestService.pivot-1583"><span class="linenos">1583</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1584"><a href="#PumpWoodDataBaseRestService.pivot-1584"><span class="linenos">1584</span></a>            <span class="n">pivoted_table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1585"><a href="#PumpWoodDataBaseRestService.pivot-1585"><span class="linenos">1585</span></a>                <span class="n">melted_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1586"><a href="#PumpWoodDataBaseRestService.pivot-1586"><span class="linenos">1586</span></a>                <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1587"><a href="#PumpWoodDataBaseRestService.pivot-1587"><span class="linenos">1587</span></a>
</span><span id="PumpWoodDataBaseRestService.pivot-1588"><a href="#PumpWoodDataBaseRestService.pivot-1588"><span class="linenos">1588</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.pivot-1589"><a href="#PumpWoodDataBaseRestService.pivot-1589"><span class="linenos">1589</span></a>                <span class="n">pivoted_table</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="nb">format</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Pivot QuerySet data acording to columns selected, and filters passed.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p><code>filter_dict</code>, <code>exclude_dict</code> and <code>order_by</code> parameters have same
behaviour as list end-point.</p>

<ul>
<li><strong>columns [List[str]]:</strong>
List of variables that will be considered as collumns to pivot
data.</li>
<li><strong>format [{dict, list, series, split, tight, records,
index}]:</strong> Format paramter to convert pandas DataFrame to
dictonary. This dictonary will be returned by the function.</li>
<li><strong>variables [List[str]]:</strong> Variables to be returned, this will
modify default behaviour of returning <code><a href="#PumpWoodDataBaseRestService.model_variables">model_variables</a></code> attribute
fields.</li>
<li><strong>show_deleted [bool]:</strong> If model has deleted field, results
flaged as deleted won't be fetched. Setting show_deleted = True
will return this filtered results.</li>
<li><strong>add_pk_column [bool]:</strong> If True, pk columns will be added to
results. Using pk columns will not permit to pivot information
(makes no sense). So far only <code>id</code> column will be added to results
treating composite pks is on the roadmap.</li>
<li><strong>limit [int]:</strong> Limit of the query results (number of objects that
will be returned).</li>
</ul>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Return a pandas DataFrame serialized according to format
  parameter.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'Pivot is not avaiable, set model_variables at view'. Indicates
that this end-point is not avaiable. To habilitate it, it is
necessary to set <code><a href="#PumpWoodDataBaseRestService.model_variables">model_variables</a></code> attribute at view.</li>
<li><strong>PumpWoodQueryException:</strong>  'Columns must be a list of elements.'. Indicates that columns
type is not a list of strings.</li>
<li><strong>PumpWoodQueryException:</strong>  'Column chosen as pivot is not at model variables'. Indicates
that column is not present on <code><a href="#PumpWoodDataBaseRestService.model_variables">model_variables</a></code> attribute.</li>
<li><strong>PumpWoodQueryException:</strong>  Propagate errors raised when executing the query.</li>
<li><strong>PumpWoodQueryException:</strong>  'value column not at melted data, it is not possible
to pivot dataframe.'. Indicates that value column is not
avaiable query results, so it not possible to pivot data.</li>
</ul>
</div>


                            </div>
                            <div id="PumpWoodDataBaseRestService.bulk_save" class="classattr">
                                        <input id="PumpWoodDataBaseRestService.bulk_save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bulk_save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">request</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="PumpWoodDataBaseRestService.bulk_save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#PumpWoodDataBaseRestService.bulk_save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="PumpWoodDataBaseRestService.bulk_save-1591"><a href="#PumpWoodDataBaseRestService.bulk_save-1591"><span class="linenos">1591</span></a>    <span class="k">def</span> <span class="nf">bulk_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1592"><a href="#PumpWoodDataBaseRestService.bulk_save-1592"><span class="linenos">1592</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1593"><a href="#PumpWoodDataBaseRestService.bulk_save-1593"><span class="linenos">1593</span></a><span class="sd">        Bulk save data.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1594"><a href="#PumpWoodDataBaseRestService.bulk_save-1594"><span class="linenos">1594</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1595"><a href="#PumpWoodDataBaseRestService.bulk_save-1595"><span class="linenos">1595</span></a><span class="sd">        This end-point is prefereble for large datainputs on Pumpwood, it is</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1596"><a href="#PumpWoodDataBaseRestService.bulk_save-1596"><span class="linenos">1596</span></a><span class="sd">        not possible to update entries, just add new ones.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1597"><a href="#PumpWoodDataBaseRestService.bulk_save-1597"><span class="linenos">1597</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1598"><a href="#PumpWoodDataBaseRestService.bulk_save-1598"><span class="linenos">1598</span></a><span class="sd">        It is much more performant than adding one by one using save</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1599"><a href="#PumpWoodDataBaseRestService.bulk_save-1599"><span class="linenos">1599</span></a><span class="sd">        end-point.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1600"><a href="#PumpWoodDataBaseRestService.bulk_save-1600"><span class="linenos">1600</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1601"><a href="#PumpWoodDataBaseRestService.bulk_save-1601"><span class="linenos">1601</span></a><span class="sd">        ###### Request payload data:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1602"><a href="#PumpWoodDataBaseRestService.bulk_save-1602"><span class="linenos">1602</span></a><span class="sd">        List of dictionaries which must have self.expected_cols_bulk_save.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1603"><a href="#PumpWoodDataBaseRestService.bulk_save-1603"><span class="linenos">1603</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1604"><a href="#PumpWoodDataBaseRestService.bulk_save-1604"><span class="linenos">1604</span></a><span class="sd">        ###### Request query data:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1605"><a href="#PumpWoodDataBaseRestService.bulk_save-1605"><span class="linenos">1605</span></a><span class="sd">        No query parameters.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1606"><a href="#PumpWoodDataBaseRestService.bulk_save-1606"><span class="linenos">1606</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1607"><a href="#PumpWoodDataBaseRestService.bulk_save-1607"><span class="linenos">1607</span></a><span class="sd">        Args:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1608"><a href="#PumpWoodDataBaseRestService.bulk_save-1608"><span class="linenos">1608</span></a><span class="sd">            request: Django request.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1609"><a href="#PumpWoodDataBaseRestService.bulk_save-1609"><span class="linenos">1609</span></a><span class="sd">        Returns:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1610"><a href="#PumpWoodDataBaseRestService.bulk_save-1610"><span class="linenos">1610</span></a><span class="sd">            A dictonary with key `saved_count` indicating the number of</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1611"><a href="#PumpWoodDataBaseRestService.bulk_save-1611"><span class="linenos">1611</span></a><span class="sd">            objects that were add to database.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1612"><a href="#PumpWoodDataBaseRestService.bulk_save-1612"><span class="linenos">1612</span></a><span class="sd">        Raises:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1613"><a href="#PumpWoodDataBaseRestService.bulk_save-1613"><span class="linenos">1613</span></a><span class="sd">            PumpWoodForbidden:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1614"><a href="#PumpWoodDataBaseRestService.bulk_save-1614"><span class="linenos">1614</span></a><span class="sd">                &#39;Bulk save not avaiable. Set expected_cols_bulk_save on</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1615"><a href="#PumpWoodDataBaseRestService.bulk_save-1615"><span class="linenos">1615</span></a><span class="sd">                PumpWoodDataBaseRestService View to habilitate funciton.&#39;</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1616"><a href="#PumpWoodDataBaseRestService.bulk_save-1616"><span class="linenos">1616</span></a><span class="sd">                Indicates that bulk_save end-point was not configured</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1617"><a href="#PumpWoodDataBaseRestService.bulk_save-1617"><span class="linenos">1617</span></a><span class="sd">                for this model class. It is necessary to set</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1618"><a href="#PumpWoodDataBaseRestService.bulk_save-1618"><span class="linenos">1618</span></a><span class="sd">                `expected_cols_bulk_save` attribute to make end-point</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1619"><a href="#PumpWoodDataBaseRestService.bulk_save-1619"><span class="linenos">1619</span></a><span class="sd">                avaiable.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1620"><a href="#PumpWoodDataBaseRestService.bulk_save-1620"><span class="linenos">1620</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1621"><a href="#PumpWoodDataBaseRestService.bulk_save-1621"><span class="linenos">1621</span></a><span class="sd">                &#39;Post payload is a list of objects.&#39;. Indicates that the</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1622"><a href="#PumpWoodDataBaseRestService.bulk_save-1622"><span class="linenos">1622</span></a><span class="sd">                request payload is not a list as expected.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1623"><a href="#PumpWoodDataBaseRestService.bulk_save-1623"><span class="linenos">1623</span></a><span class="sd">            PumpWoodObjectSavingException:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1624"><a href="#PumpWoodDataBaseRestService.bulk_save-1624"><span class="linenos">1624</span></a><span class="sd">                &#39;Expected columns and data columns do not match:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1625"><a href="#PumpWoodDataBaseRestService.bulk_save-1625"><span class="linenos">1625</span></a><span class="sd">                \nExpected columns:{expected}</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1626"><a href="#PumpWoodDataBaseRestService.bulk_save-1626"><span class="linenos">1626</span></a><span class="sd">                \nData columns:{data_cols}&#39;. Indicates that the fields passed</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1627"><a href="#PumpWoodDataBaseRestService.bulk_save-1627"><span class="linenos">1627</span></a><span class="sd">                on the objects are diferent from the expected by the end-point</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1628"><a href="#PumpWoodDataBaseRestService.bulk_save-1628"><span class="linenos">1628</span></a><span class="sd">                check the data or the configuration of the end-point.</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1629"><a href="#PumpWoodDataBaseRestService.bulk_save-1629"><span class="linenos">1629</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1630"><a href="#PumpWoodDataBaseRestService.bulk_save-1630"><span class="linenos">1630</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1631"><a href="#PumpWoodDataBaseRestService.bulk_save-1631"><span class="linenos">1631</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1632"><a href="#PumpWoodDataBaseRestService.bulk_save-1632"><span class="linenos">1632</span></a>                <span class="s2">&quot;Bulk save not avaiable. Set expected_cols_bulk_save on &quot;</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1633"><a href="#PumpWoodDataBaseRestService.bulk_save-1633"><span class="linenos">1633</span></a>                <span class="s2">&quot;PumpWoodDataBaseRestService View to habilitate funciton.&quot;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1634"><a href="#PumpWoodDataBaseRestService.bulk_save-1634"><span class="linenos">1634</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodForbidden</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1635"><a href="#PumpWoodDataBaseRestService.bulk_save-1635"><span class="linenos">1635</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1636"><a href="#PumpWoodDataBaseRestService.bulk_save-1636"><span class="linenos">1636</span></a>        <span class="n">data_to_save</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1637"><a href="#PumpWoodDataBaseRestService.bulk_save-1637"><span class="linenos">1637</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1638"><a href="#PumpWoodDataBaseRestService.bulk_save-1638"><span class="linenos">1638</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1639"><a href="#PumpWoodDataBaseRestService.bulk_save-1639"><span class="linenos">1639</span></a>                <span class="s1">&#39;Post payload is a list of objects.&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1640"><a href="#PumpWoodDataBaseRestService.bulk_save-1640"><span class="linenos">1640</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1641"><a href="#PumpWoodDataBaseRestService.bulk_save-1641"><span class="linenos">1641</span></a>        <span class="n">pd_data_to_save</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_to_save</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1642"><a href="#PumpWoodDataBaseRestService.bulk_save-1642"><span class="linenos">1642</span></a>        <span class="n">pd_data_cols</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">pd_data_to_save</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1643"><a href="#PumpWoodDataBaseRestService.bulk_save-1643"><span class="linenos">1643</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1644"><a href="#PumpWoodDataBaseRestService.bulk_save-1644"><span class="linenos">1644</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">)</span> <span class="o">-</span> <span class="n">pd_data_cols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1645"><a href="#PumpWoodDataBaseRestService.bulk_save-1645"><span class="linenos">1645</span></a>            <span class="n">objects_to_load</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1646"><a href="#PumpWoodDataBaseRestService.bulk_save-1646"><span class="linenos">1646</span></a>            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data_to_save</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1647"><a href="#PumpWoodDataBaseRestService.bulk_save-1647"><span class="linenos">1647</span></a>                <span class="n">new_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1648"><a href="#PumpWoodDataBaseRestService.bulk_save-1648"><span class="linenos">1648</span></a>                <span class="n">objects_to_load</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_obj</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1649"><a href="#PumpWoodDataBaseRestService.bulk_save-1649"><span class="linenos">1649</span></a>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1650"><a href="#PumpWoodDataBaseRestService.bulk_save-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">service_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1651"><a href="#PumpWoodDataBaseRestService.bulk_save-1651"><span class="linenos">1651</span></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">({</span><span class="s1">&#39;saved_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">objects_to_load</span><span class="p">)})</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1652"><a href="#PumpWoodDataBaseRestService.bulk_save-1652"><span class="linenos">1652</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1653"><a href="#PumpWoodDataBaseRestService.bulk_save-1653"><span class="linenos">1653</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1654"><a href="#PumpWoodDataBaseRestService.bulk_save-1654"><span class="linenos">1654</span></a>                <span class="s1">&#39;Expected columns and data columns do not match:&#39;</span> <span class="o">+</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1655"><a href="#PumpWoodDataBaseRestService.bulk_save-1655"><span class="linenos">1655</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Expected columns:</span><span class="si">{expected}</span><span class="s1">&#39;</span> <span class="o">+</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1656"><a href="#PumpWoodDataBaseRestService.bulk_save-1656"><span class="linenos">1656</span></a>                <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Data columns:</span><span class="si">{data_cols}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1657"><a href="#PumpWoodDataBaseRestService.bulk_save-1657"><span class="linenos">1657</span></a>            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PumpWoodObjectSavingException</span><span class="p">(</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1658"><a href="#PumpWoodDataBaseRestService.bulk_save-1658"><span class="linenos">1658</span></a>                    <span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1659"><a href="#PumpWoodDataBaseRestService.bulk_save-1659"><span class="linenos">1659</span></a>                    <span class="n">payload</span><span class="o">=</span><span class="p">{</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1660"><a href="#PumpWoodDataBaseRestService.bulk_save-1660"><span class="linenos">1660</span></a>                        <span class="s2">&quot;expected&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">expected_cols_bulk_save</span><span class="p">),</span>
</span><span id="PumpWoodDataBaseRestService.bulk_save-1661"><a href="#PumpWoodDataBaseRestService.bulk_save-1661"><span class="linenos">1661</span></a>                        <span class="s2">&quot;data_cols&quot;</span><span class="p">:</span> <span class="n">pd_data_cols</span><span class="p">})</span>
</span></pre></div>


            <div class="docstring"><p>Bulk save data.</p>

<p>This end-point is prefereble for large datainputs on Pumpwood, it is
not possible to update entries, just add new ones.</p>

<p>It is much more performant than adding one by one using save
end-point.</p>

<h6 id="request-payload-data">Request payload data:</h6>

<p>List of dictionaries which must have self.expected_cols_bulk_save.</p>

<h6 id="request-query-data">Request query data:</h6>

<p>No query parameters.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request:</strong>  Django request.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A dictonary with key <code>saved_count</code> indicating the number of
  objects that were add to database.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>PumpWoodForbidden:</strong>  'Bulk save not avaiable. Set expected_cols_bulk_save on
PumpWoodDataBaseRestService View to habilitate funciton.'
Indicates that bulk_save end-point was not configured
for this model class. It is necessary to set
<code><a href="#PumpWoodDataBaseRestService.expected_cols_bulk_save">expected_cols_bulk_save</a></code> attribute to make end-point
avaiable.</li>
<li><strong>PumpWoodObjectSavingException:</strong>  'Post payload is a list of objects.'. Indicates that the
request payload is not a list as expected.</li>
<li><strong>PumpWoodObjectSavingException:</strong>  'Expected columns and data columns do not match:
\nExpected columns:{expected}
\nData columns:{data_cols}'. Indicates that the fields passed
on the objects are diferent from the expected by the end-point
check the data or the configuration of the end-point.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django.views.generic.base.View</dt>
                                <dd id="PumpWoodDataBaseRestService.__init__" class="function">View</dd>
                <dd id="PumpWoodDataBaseRestService.setup" class="function">setup</dd>

            </div>
            <div><dt><a href="#PumpWoodRestService">PumpWoodRestService</a></dt>
                                <dd id="PumpWoodDataBaseRestService.endpoint_description" class="variable"><a href="#PumpWoodRestService.endpoint_description">endpoint_description</a></dd>
                <dd id="PumpWoodDataBaseRestService.dimensions" class="variable"><a href="#PumpWoodRestService.dimensions">dimensions</a></dd>
                <dd id="PumpWoodDataBaseRestService.icon" class="variable"><a href="#PumpWoodRestService.icon">icon</a></dd>
                <dd id="PumpWoodDataBaseRestService.service_model" class="variable"><a href="#PumpWoodRestService.service_model">service_model</a></dd>
                <dd id="PumpWoodDataBaseRestService.storage_object" class="variable"><a href="#PumpWoodRestService.storage_object">storage_object</a></dd>
                <dd id="PumpWoodDataBaseRestService.microservice" class="variable"><a href="#PumpWoodRestService.microservice">microservice</a></dd>
                <dd id="PumpWoodDataBaseRestService.trigger" class="variable"><a href="#PumpWoodRestService.trigger">trigger</a></dd>
                <dd id="PumpWoodDataBaseRestService.serializer" class="variable"><a href="#PumpWoodRestService.serializer">serializer</a></dd>
                <dd id="PumpWoodDataBaseRestService.file_fields" class="variable"><a href="#PumpWoodRestService.file_fields">file_fields</a></dd>
                <dd id="PumpWoodDataBaseRestService.list_paginate_limit" class="variable"><a href="#PumpWoodRestService.list_paginate_limit">list_paginate_limit</a></dd>
                <dd id="PumpWoodDataBaseRestService.gui_retrieve_fieldset" class="variable"><a href="#PumpWoodRestService.gui_retrieve_fieldset">gui_retrieve_fieldset</a></dd>
                <dd id="PumpWoodDataBaseRestService.gui_verbose_field" class="variable"><a href="#PumpWoodRestService.gui_verbose_field">gui_verbose_field</a></dd>
                <dd id="PumpWoodDataBaseRestService.gui_readonly" class="variable"><a href="#PumpWoodRestService.gui_readonly">gui_readonly</a></dd>
                <dd id="PumpWoodDataBaseRestService.get_gui_retrieve_fieldset" class="function"><a href="#PumpWoodRestService.get_gui_retrieve_fieldset">get_gui_retrieve_fieldset</a></dd>
                <dd id="PumpWoodDataBaseRestService.get_gui_verbose_field" class="function"><a href="#PumpWoodRestService.get_gui_verbose_field">get_gui_verbose_field</a></dd>
                <dd id="PumpWoodDataBaseRestService.get_gui_readonly" class="function"><a href="#PumpWoodRestService.get_gui_readonly">get_gui_readonly</a></dd>
                <dd id="PumpWoodDataBaseRestService.get_list_fields" class="function"><a href="#PumpWoodRestService.get_list_fields">get_list_fields</a></dd>
                <dd id="PumpWoodDataBaseRestService.list" class="function"><a href="#PumpWoodRestService.list">list</a></dd>
                <dd id="PumpWoodDataBaseRestService.list_without_pag" class="function"><a href="#PumpWoodRestService.list_without_pag">list_without_pag</a></dd>
                <dd id="PumpWoodDataBaseRestService.retrieve" class="function"><a href="#PumpWoodRestService.retrieve">retrieve</a></dd>
                <dd id="PumpWoodDataBaseRestService.retrieve_file" class="function"><a href="#PumpWoodRestService.retrieve_file">retrieve_file</a></dd>
                <dd id="PumpWoodDataBaseRestService.delete" class="function"><a href="#PumpWoodRestService.delete">delete</a></dd>
                <dd id="PumpWoodDataBaseRestService.delete_many" class="function"><a href="#PumpWoodRestService.delete_many">delete_many</a></dd>
                <dd id="PumpWoodDataBaseRestService.remove_file_field" class="function"><a href="#PumpWoodRestService.remove_file_field">remove_file_field</a></dd>
                <dd id="PumpWoodDataBaseRestService.save" class="function"><a href="#PumpWoodRestService.save">save</a></dd>
                <dd id="PumpWoodDataBaseRestService.list_actions" class="function"><a href="#PumpWoodRestService.list_actions">list_actions</a></dd>
                <dd id="PumpWoodDataBaseRestService.execute_action" class="function"><a href="#PumpWoodRestService.execute_action">execute_action</a></dd>
                <dd id="PumpWoodDataBaseRestService.cls_fields_options" class="function"><a href="#PumpWoodRestService.cls_fields_options">cls_fields_options</a></dd>
                <dd id="PumpWoodDataBaseRestService.search_options" class="function"><a href="#PumpWoodRestService.search_options">search_options</a></dd>
                <dd id="PumpWoodDataBaseRestService.fill_options" class="function"><a href="#PumpWoodRestService.fill_options">fill_options</a></dd>
                <dd id="PumpWoodDataBaseRestService.list_view_options" class="function"><a href="#PumpWoodRestService.list_view_options">list_view_options</a></dd>
                <dd id="PumpWoodDataBaseRestService.retrieve_view_options" class="function"><a href="#PumpWoodRestService.retrieve_view_options">retrieve_view_options</a></dd>
                <dd id="PumpWoodDataBaseRestService.fill_options_validation" class="function"><a href="#PumpWoodRestService.fill_options_validation">fill_options_validation</a></dd>

            </div>
            <div><dt>rest_framework.viewsets.ViewSetMixin</dt>
                                <dd id="PumpWoodDataBaseRestService.as_view" class="function">as_view</dd>
                <dd id="PumpWoodDataBaseRestService.initialize_request" class="function">initialize_request</dd>
                <dd id="PumpWoodDataBaseRestService.reverse_action" class="function">reverse_action</dd>
                <dd id="PumpWoodDataBaseRestService.get_extra_actions" class="function">get_extra_actions</dd>
                <dd id="PumpWoodDataBaseRestService.get_extra_action_url_map" class="function">get_extra_action_url_map</dd>

            </div>
            <div><dt>rest_framework.views.APIView</dt>
                                <dd id="PumpWoodDataBaseRestService.schema" class="variable">schema</dd>
                <dd id="PumpWoodDataBaseRestService.allowed_methods" class="variable">allowed_methods</dd>
                <dd id="PumpWoodDataBaseRestService.http_method_not_allowed" class="function">http_method_not_allowed</dd>
                <dd id="PumpWoodDataBaseRestService.permission_denied" class="function">permission_denied</dd>
                <dd id="PumpWoodDataBaseRestService.throttled" class="function">throttled</dd>
                <dd id="PumpWoodDataBaseRestService.get_authenticate_header" class="function">get_authenticate_header</dd>
                <dd id="PumpWoodDataBaseRestService.get_parser_context" class="function">get_parser_context</dd>
                <dd id="PumpWoodDataBaseRestService.get_renderer_context" class="function">get_renderer_context</dd>
                <dd id="PumpWoodDataBaseRestService.get_exception_handler_context" class="function">get_exception_handler_context</dd>
                <dd id="PumpWoodDataBaseRestService.get_view_name" class="function">get_view_name</dd>
                <dd id="PumpWoodDataBaseRestService.get_view_description" class="function">get_view_description</dd>
                <dd id="PumpWoodDataBaseRestService.get_format_suffix" class="function">get_format_suffix</dd>
                <dd id="PumpWoodDataBaseRestService.get_renderers" class="function">get_renderers</dd>
                <dd id="PumpWoodDataBaseRestService.get_parsers" class="function">get_parsers</dd>
                <dd id="PumpWoodDataBaseRestService.get_authenticators" class="function">get_authenticators</dd>
                <dd id="PumpWoodDataBaseRestService.get_permissions" class="function">get_permissions</dd>
                <dd id="PumpWoodDataBaseRestService.get_throttles" class="function">get_throttles</dd>
                <dd id="PumpWoodDataBaseRestService.get_content_negotiator" class="function">get_content_negotiator</dd>
                <dd id="PumpWoodDataBaseRestService.get_exception_handler" class="function">get_exception_handler</dd>
                <dd id="PumpWoodDataBaseRestService.perform_content_negotiation" class="function">perform_content_negotiation</dd>
                <dd id="PumpWoodDataBaseRestService.perform_authentication" class="function">perform_authentication</dd>
                <dd id="PumpWoodDataBaseRestService.check_permissions" class="function">check_permissions</dd>
                <dd id="PumpWoodDataBaseRestService.check_object_permissions" class="function">check_object_permissions</dd>
                <dd id="PumpWoodDataBaseRestService.check_throttles" class="function">check_throttles</dd>
                <dd id="PumpWoodDataBaseRestService.determine_version" class="function">determine_version</dd>
                <dd id="PumpWoodDataBaseRestService.initial" class="function">initial</dd>
                <dd id="PumpWoodDataBaseRestService.finalize_response" class="function">finalize_response</dd>
                <dd id="PumpWoodDataBaseRestService.handle_exception" class="function">handle_exception</dd>
                <dd id="PumpWoodDataBaseRestService.dispatch" class="function">dispatch</dd>
                <dd id="PumpWoodDataBaseRestService.options" class="function">options</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>